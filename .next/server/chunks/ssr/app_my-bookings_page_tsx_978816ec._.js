module.exports=[6380,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(72211),f=a.i(13216),g=a.i(40695),h=a.i(3130),i=a.i(54161),j=a.i(96221),k=a.i(41675),l=a.i(24987),m=a.i(16201),n=a.i(41710),o=a.i(62722),p=a.i(24569),q=a.i(81560),r=a.i(11156),s=a.i(77156),t=a.i(33508),u=a.i(73570),v=a.i(63519),w=a.i(67900),x=a.i(38246),y=a.i(71987),z=a.i(65733),A=a.i(5522),B=a.i(17171),C=a.i(23292);function D(){let a,D,E,F,G,H,I,J,K=(0,d.useRouter)(),L=(0,d.useSearchParams)(),{user:M,isAuthenticated:N,isLoading:O}=(0,f.useAuth)(),[P,Q]=(0,c.useState)([]),[R,S]=(0,c.useState)(null),[T,U]=(0,c.useState)(!0),[V,W]=(0,c.useState)(""),[X,Y]=(0,c.useState)({}),[Z,$]=(0,c.useState)({}),[_,aa]=(0,c.useState)(!1),[ab,ac]=(0,c.useState)(null),[ad,ae]=(0,c.useState)({checkInDate:"",checkOutDate:"",numberOfGuests:1,requestedPrice:void 0}),[af,ag]=(0,c.useState)(!1),[ah,ai]=(0,c.useState)(null),[aj,ak]=(0,c.useState)({}),[al,am]=(0,c.useState)([]),[an,ao]=(0,c.useState)(!1),[ap,aq]=(0,c.useState)({}),[ar,as]=(0,c.useState)({}),[at,au]=(0,c.useState)({}),[av,aw]=(0,c.useState)({}),[ax,ay]=(0,c.useState)({}),az=L.get("tab")||"current";(0,c.useEffect)(()=>{if(!O){if(!N||!M)return void K.push("/login?redirect=/my-bookings");aB(),"complaints"===az&&aC()}},[M,N,O,K,az]);let aA=async a=>{try{$(b=>({...b,[String(a.propertyId)]:!0}));let b=await e.apiClient.properties.getById(String(a.propertyId));return{...a,property:b}}catch(b){return{...a,property:void 0}}finally{$(b=>({...b,[String(a.propertyId)]:!1}))}},aB=async()=>{if(M?.id)try{U(!0),W("");let a=[],b=null;switch(az){case"current":let c=await e.apiClient.bookings.getCurrentBooking(parseInt(M.id));if(c){let a=await aA(c);b=a,S(a)}else S(null);Q([]);break;case"pending":let d=await e.apiClient.bookings.getPendingBookings(parseInt(M.id));a=d&&0!==d.length?d||[]:(await e.apiClient.bookings.getByTenantId(parseInt(M.id))||[]).filter(a=>"PENDING_NEGOTIATION"===a.status||"PENDING"===a.status&&null!=a.requestedNegotiationPercent&&a.requestedNegotiationPercent>0);break;case"payment":let f=await e.apiClient.bookings.getAwaitingPaymentBookings(parseInt(M.id));a=f&&0!==f.length?f||[]:(await e.apiClient.bookings.getByTenantId(parseInt(M.id))||[]).filter(a=>"PENDING_PAYMENT"===a.status||"PENDING"===a.status&&(null==a.requestedNegotiationPercent||0===a.requestedNegotiationPercent));break;case"rejected":a=(await e.apiClient.bookings.getByTenantId(parseInt(M.id))||[]).filter(a=>"NEGOTIATION_REJECTED"===a.status);break;case"complaints":a=[];break;default:a=await e.apiClient.bookings.getByTenantId(parseInt(M.id))||[]}if(a.length>0){let b=await Promise.all(a.map(a=>aA(a)));Q(b)}else Q([]);"current"!==az&&(S(null),b=null),(a.length>0||b)&&await aE(a,b);let g=[...b?[b]:[],...a].filter(a=>"CONFIRMED"===a.status);g.length>0&&await aF(g)}catch(a){W(a.message||"Failed to load bookings")}finally{U(!1)}},aC=async()=>{if(M?.id){ao(!0);try{let a=await e.apiClient.reclamations.getMyComplaints(M.id);am(a||[]),a&&a.length>0&&await aD(a)}catch(a){am([])}finally{ao(!1)}}},aD=async a=>{try{let b={},c={};await Promise.all(a.map(async a=>{try{ay(b=>({...b,[a.id]:!0}));try{let d=await e.apiClient.bookings.getById(a.bookingId);if(d&&d.propertyId){let f=null;try{f=await e.apiClient.properties.getById(String(d.propertyId)),b[a.id]=f}catch(a){}try{if(f?.userId){let b=await e.apiClient.users.getById(f.userId);b.phoneNumber&&(c[a.id]=String(b.phoneNumber))}else{let b=await e.apiClient.bookings.getPropertyInfo(String(d.propertyId));if(b.ownerId){let d=await e.apiClient.users.getById(b.ownerId);d.phoneNumber&&(c[a.id]=String(d.phoneNumber))}}}catch(a){}}}catch(a){}}catch(a){}finally{ay(b=>({...b,[a.id]:!1}))}})),au(a=>({...a,...b})),aw(a=>({...a,...c}))}catch(a){}},aE=async(a,b)=>{if(M?.id)try{let c={},d=b?[b,...a]:a;await Promise.all(d.map(async a=>{try{let b=await e.apiClient.reclamations.getByBookingIdAndComplainant(a.id,parseInt(M.id));b&&(c[a.id]=b)}catch(a){}})),ak(c)}catch(a){}},aF=async a=>{try{let b={};await Promise.all(a.map(async a=>{try{if(as(b=>({...b,[a.id]:!0})),a.property?.userId){let c=a.property.userId;try{let d=await e.apiClient.users.getById(c);if(d&&null!==d.phoneNumber&&void 0!==d.phoneNumber){let c=String(d.phoneNumber);b[a.id]=c}else b[a.id]=null}catch(c){b[a.id]=null}}else try{let c=await e.apiClient.bookings.getPropertyInfo(String(a.propertyId));if(c.ownerId){let d=await e.apiClient.users.getById(c.ownerId);if(d&&null!==d.phoneNumber&&void 0!==d.phoneNumber){let c=String(d.phoneNumber);b[a.id]=c}else b[a.id]=null}else b[a.id]=null}catch(c){b[a.id]=null}}catch(c){b[a.id]=null}finally{as(b=>({...b,[a.id]:!1}))}})),aq(a=>({...a,...b}))}catch(a){}},aG=a=>{K.push(`/reclamation/${a}?isHost=false`)},aH=async(a,b)=>{if(window.confirm("Are you sure you want to remove this reclamation?")){if(!M?.id)return void W("User not found");Y(b=>({...b,[a]:!0})),W("");try{await e.apiClient.reclamations.delete(b,parseInt(M.id)),ak(b=>{let c={...b};return delete c[a],c}),await aB()}catch(a){W(a.message||"Failed to remove reclamation")}finally{Y(b=>({...b,[a]:!1}))}}},aI=a=>{K.push(`/my-bookings?tab=${a}`)},aJ=async a=>{if(window.confirm("Are you sure you have checked out?")){Y(b=>({...b,[a]:!0})),W("");try{await e.apiClient.bookings.tenantCheckout(a,parseInt(M.id)),C.toast.success("Checkout confirmed! Waiting for host confirmation."),await aB()}catch(b){let a=b.message||"Failed to confirm checkout";W(a),C.toast.error(a)}finally{Y(b=>({...b,[a]:!1}))}}},aK=a=>{K.push(`/payment?bookingId=${a}`)},aL=async a=>{if(window.confirm("Are you sure you want to cancel this booking? This action cannot be undone.")){if(!M?.id)return void W("User not found");Y(b=>({...b,[a]:!0})),W("");try{await e.apiClient.bookings.delete(a,parseInt(M.id)),await aB()}catch(a){W(a.message||"Failed to cancel booking")}finally{Y(b=>({...b,[a]:!1}))}}},aM=a=>{ac(a);let b=a=>{if(!a)return"";try{let b=new Date(a),c=b.getFullYear(),d=String(b.getMonth()+1).padStart(2,"0"),e=String(b.getDate()).padStart(2,"0");return`${c}-${d}-${e}`}catch{return a}};ae({checkInDate:b(a.checkInDate),checkOutDate:b(a.checkOutDate),numberOfGuests:1,requestedPrice:a.requestedNegotiationPercent||"NEGOTIATION_REJECTED"===a.status?a.totalPrice?.toString():void 0}),aa(!0)},aN=async()=>{if(!ab)return;if(!ad.checkInDate||!ad.checkOutDate)return void W("Please fill in all required fields");let a=new Date(ad.checkInDate),b=new Date(ad.checkOutDate),c=new Date;if(c.setHours(0,0,0,0),a<c)return void W("Check-in date must be today or later");if(b<=a)return void W("Check-out date must be after check-in date");Y(a=>({...a,[ab.id]:!0})),W("");try{if(ad.requestedPrice){let a=parseFloat(ad.requestedPrice);if(isNaN(a)||a<=0){W("Requested price must be greater than 0"),Y(a=>({...a,[ab.id]:!1}));return}}else if("NEGOTIATION_REJECTED"===ab.status){W("Please enter a requested price"),Y(a=>({...a,[ab.id]:!1}));return}let a=await e.apiClient.bookings.update(ab.id,{checkInDate:ad.checkInDate,checkOutDate:ad.checkOutDate,numberOfGuests:ad.numberOfGuests,requestedPrice:ad.requestedPrice?parseFloat(ad.requestedPrice):void 0});if("rejected"===a.status||"PRICE_TOO_LOW"===a.error)return void W(a.message||"Price is not acceptable. Please increase it.");aa(!1),ac(null),W(""),await aB()}catch(b){let a="Failed to update booking";b.message&&(a=b.message.includes("Price is not acceptable")?b.message:b.message.includes("PRICE_TOO_LOW")?"Price is not acceptable. Please increase it.":b.message),W(a)}finally{Y(a=>({...a,[ab.id]:!1}))}},aO=a=>{switch(a.toUpperCase()){case"PENDING_PAYMENT":return(0,b.jsx)(i.Badge,{className:"bg-blue-100 text-blue-800 border-blue-200",children:"Awaiting Payment"});case"PENDING_NEGOTIATION":return(0,b.jsx)(i.Badge,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"Pending Negotiation"});case"NEGOTIATION_REJECTED":return(0,b.jsx)(i.Badge,{className:"bg-orange-100 text-orange-800 border-orange-200",children:"Negotiation Rejected"});case"CONFIRMED":return(0,b.jsx)(i.Badge,{className:"bg-green-100 text-green-800 border-green-200",children:"Confirmed"});case"COMPLETED":return(0,b.jsx)(i.Badge,{className:"bg-gray-100 text-gray-800 border-gray-200",children:"Completed"});case"TENANT_CHECKED_OUT":return(0,b.jsx)(i.Badge,{className:"bg-purple-100 text-purple-800 border-purple-200",children:"Checked Out"});case"IN_DISPUTE":return(0,b.jsx)(i.Badge,{className:"bg-red-100 text-red-800 border-red-200",children:"In Dispute"});case"CANCELLED_BY_HOST":return(0,b.jsx)(i.Badge,{className:"bg-red-100 text-red-800 border-red-200",children:"Cancelled by Host"});case"CANCELLED_BY_TENANT":return(0,b.jsx)(i.Badge,{className:"bg-red-100 text-red-800 border-red-200",children:"Cancelled"});case"PENDING":return(0,b.jsx)(i.Badge,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"Pending"});default:return(0,b.jsx)(i.Badge,{className:"bg-gray-100 text-gray-800 border-gray-200",children:a})}},aP=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return a}},aQ=(a,b)=>{if(!a||!b)return 0;try{let c=new Date(a),d=new Date(b),e=Math.abs(d.getTime()-c.getTime());return Math.ceil(e/864e5)}catch{return 0}},aR=a=>{if(!a?.propertyImages||0===a.propertyImages.length)return null;let b=a.propertyImages.find(a=>a.cover);return b?b.url:a.propertyImages[0].url},aS=a=>a?a.startsWith("http://")||a.startsWith("https://")?a:a.startsWith("/uploads")?`http://localhost:8081${a}`:a:"/placeholder.jpg",aT=(a,c=!1,d=az)=>{let e=a.property,f=aR(e),i=aQ(a.checkInDate,a.checkOutDate),o=Z[String(a.propertyId)];return(0,b.jsxs)(h.Card,{className:`overflow-hidden hover:shadow-2xl transition-all duration-300 ${c?"max-w-2xl mx-auto":""}`,children:[(0,b.jsxs)("div",{className:"relative h-64 bg-gradient-to-br from-teal-100 to-teal-200 overflow-hidden",children:[o?(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(j.Loader2,{className:"h-8 w-8 animate-spin text-teal-600"})}):f?(0,b.jsx)(y.default,{src:aS(f),alt:e?.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(l.MapPin,{className:"w-16 h-16 text-teal-300"})}),(0,b.jsx)("div",{className:"absolute top-4 right-4",children:aO(a.status)}),(0,b.jsxs)("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl px-4 py-2 shadow-lg",children:[(0,b.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,b.jsx)("span",{className:"text-2xl font-bold text-teal-600",children:a.totalPrice?.toFixed(4)||"N/A"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"MAD"})]}),a.requestedNegotiationPercent&&a.requestedNegotiationPercent>0&&(0,b.jsxs)("p",{className:"text-xs text-yellow-600 font-medium mt-1",children:["Negotiated: ",a.requestedNegotiationPercent,"%"]}),a.longStayDiscountPercent&&a.longStayDiscountPercent>0&&(0,b.jsxs)("p",{className:"text-xs text-blue-600 font-medium mt-1",children:["Discount: ",a.longStayDiscountPercent,"%"]})]})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2 line-clamp-1",children:e?.title||`Property ${a.propertyId}`}),e?.address&&(0,b.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,b.jsx)(l.MapPin,{className:"w-4 h-4 mr-1.5 text-teal-600 flex-shrink-0"}),(0,b.jsxs)("span",{className:"line-clamp-1",children:[e.address.city,", ",e.address.country]})]})]}),(0,b.jsxs)("div",{className:"space-y-3 mb-6 pb-6 border-b border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,b.jsx)(k.Calendar,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsx)("span",{className:"font-medium",children:"Check-in"})]}),(0,b.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:aP(a.checkInDate)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,b.jsx)(k.Calendar,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsx)("span",{className:"font-medium",children:"Check-out"})]}),(0,b.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:aP(a.checkOutDate)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,b.jsx)(n.Clock,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsx)("span",{className:"font-medium",children:"Duration"})]}),(0,b.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[i," ",1===i?"night":"nights"]})]}),"CONFIRMED"===a.status&&(0,b.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,b.jsx)(v.Phone,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsx)("span",{className:"font-medium",children:"Host Phone"})]}),(0,b.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:ar[a.id]?(0,b.jsx)(j.Loader2,{className:"w-4 h-4 animate-spin inline"}):ap[a.id]?ap[a.id]:"N/A"})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:["PENDING_PAYMENT"===a.status&&(0,b.jsxs)(g.Button,{onClick:()=>aK(a.id),className:"flex-1 bg-teal-600 hover:bg-teal-700 text-white",children:[(0,b.jsx)(r.CreditCard,{className:"w-4 h-4 mr-2"}),"Pay Now"]}),"NEGOTIATION_REJECTED"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"w-full p-3 bg-orange-50 border-2 border-orange-200 rounded-lg mb-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-orange-800 text-center mb-2",children:"⚠️ Your negotiation was rejected by the host"}),(0,b.jsx)("p",{className:"text-xs text-orange-700 text-center",children:"You can change the price and resubmit, or cancel the booking"})]}),(0,b.jsxs)(g.Button,{onClick:()=>aM(a),className:"w-full bg-orange-600 hover:bg-orange-700 text-white mb-2",children:[(0,b.jsx)(p.Edit,{className:"w-4 h-4 mr-2"}),"Change Price"]})]}),"CONFIRMED"===a.status&&"current"===d&&(0,b.jsx)(g.Button,{onClick:()=>aJ(a.id),disabled:X[a.id],className:"w-full bg-green-600 hover:bg-green-700 text-white mb-2",children:X[a.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.CheckCircle,{className:"w-4 h-4 mr-2"}),"I've Checked Out"]})}),"CONFIRMED"===a.status&&"current"===d&&(0,b.jsx)(b.Fragment,{children:aj[a.id]?(0,b.jsx)(g.Button,{onClick:()=>aH(a.id,aj[a.id].id),disabled:X[a.id],variant:"outline",className:"w-full border-red-300 text-red-700 hover:bg-red-50 mb-2",children:X[a.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.X,{className:"w-4 h-4 mr-2"}),"Remove Reclamation"]})}):(0,b.jsxs)(g.Button,{onClick:()=>aG(a.id),variant:"outline",className:"w-full border-orange-300 text-orange-700 hover:bg-orange-50 mb-2",children:[(0,b.jsx)(u.AlertTriangle,{className:"w-4 h-4 mr-2"}),"Reclamation"]})}),"TENANT_CHECKED_OUT"===a.status&&(0,b.jsx)("div",{className:"w-full p-3 bg-yellow-50 border-2 border-yellow-200 rounded-lg text-center",children:(0,b.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"⏳ Waiting for host to confirm checkout"})}),(0,b.jsxs)(g.Button,{onClick:()=>{ai(a),ag(!0)},variant:"outline",className:"flex-1",children:[(0,b.jsx)(s.Eye,{className:"w-4 h-4 mr-2"}),"View"]}),("PENDING_PAYMENT"===a.status||"PENDING_NEGOTIATION"===a.status)&&(0,b.jsxs)(g.Button,{onClick:()=>aM(a),variant:"outline",className:"flex-1",children:[(0,b.jsx)(p.Edit,{className:"w-4 h-4 mr-2"}),"Edit"]}),("PENDING_PAYMENT"===a.status||"PENDING_NEGOTIATION"===a.status||"NEGOTIATION_REJECTED"===a.status)&&(0,b.jsx)(g.Button,{onClick:()=>aL(a.id),disabled:X[a.id],variant:"destructive",className:"NEGOTIATION_REJECTED"===a.status?"w-full":"flex-1",children:X[a.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.Trash2,{className:"w-4 h-4 mr-2"}),"Cancel"]})})]})]})]},a.id)};return O?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(j.Loader2,{className:"h-12 w-12 animate-spin text-teal-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Checking authentication..."})]})}):N&&M?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:(0,b.jsxs)("div",{className:"flex items-stretch divide-x divide-gray-200",children:[(0,b.jsx)(x.default,{href:"/properties",className:"flex-1 px-6 py-4 text-center transition-colors hover:bg-gray-50",children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("label",{className:"text-xs font-semibold mb-1 text-gray-900",children:"Create"}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"New Booking"})]})}),(0,b.jsx)("button",{onClick:()=>aI("current"),className:`flex-1 px-6 py-4 text-center transition-colors ${"current"===az?"bg-teal-600 text-white":"hover:bg-gray-50"}`,children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("label",{className:`text-xs font-semibold mb-1 ${"current"===az?"text-white":"text-gray-900"}`,children:"Current"}),(0,b.jsx)("span",{className:`text-sm ${"current"===az?"text-white":"text-gray-600"}`,children:"Booking"})]})}),(0,b.jsx)("button",{onClick:()=>aI("pending"),className:`flex-1 px-6 py-4 text-center transition-colors ${"pending"===az?"bg-teal-600 text-white":"hover:bg-gray-50"}`,children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("label",{className:`text-xs font-semibold mb-1 ${"pending"===az?"text-white":"text-gray-900"}`,children:"Pending"}),(0,b.jsx)("span",{className:`text-sm ${"pending"===az?"text-white":"text-gray-600"}`,children:"Negotiations"})]})}),(0,b.jsx)("button",{onClick:()=>aI("payment"),className:`flex-1 px-6 py-4 text-center transition-colors ${"payment"===az?"bg-teal-600 text-white":"hover:bg-gray-50"}`,children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("label",{className:`text-xs font-semibold mb-1 ${"payment"===az?"text-white":"text-gray-900"}`,children:"Awaiting"}),(0,b.jsx)("span",{className:`text-sm ${"payment"===az?"text-white":"text-gray-600"}`,children:"Payment"})]})}),(0,b.jsx)("button",{onClick:()=>aI("rejected"),className:`flex-1 px-6 py-4 text-center transition-colors ${"rejected"===az?"bg-teal-600 text-white":"hover:bg-gray-50"}`,children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("label",{className:`text-xs font-semibold mb-1 ${"rejected"===az?"text-white":"text-gray-900"}`,children:"Rejected"}),(0,b.jsx)("span",{className:`text-sm ${"rejected"===az?"text-white":"text-gray-600"}`,children:"Negotiations"})]})}),(0,b.jsx)("button",{onClick:()=>aI("complaints"),className:`flex-1 px-6 py-4 text-center transition-colors rounded-r-2xl ${"complaints"===az?"bg-teal-600 text-white":"hover:bg-gray-50"}`,children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("label",{className:`text-xs font-semibold mb-1 ${"complaints"===az?"text-white":"text-gray-900"}`,children:"My"}),(0,b.jsx)("span",{className:`text-sm ${"complaints"===az?"text-white":"text-gray-600"}`,children:"Complaints"})]})})]})})}),(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["current"===az&&"Current Booking","pending"===az&&"Pending Negotiations","payment"===az&&"Awaiting Payment","rejected"===az&&"Rejected Negotiations","complaints"===az&&"My Complaints"]}),(0,b.jsxs)("p",{className:"text-gray-600",children:["current"===az&&"Your active confirmed booking - You can check out when ready","pending"===az&&"Bookings waiting for host approval - Your negotiation requests","payment"===az&&"Bookings waiting for payment - Complete payment to confirm","rejected"===az&&"Rejected negotiations - Edit the price or cancel","complaints"===az&&"View and manage your complaints"]})]}),V&&(0,b.jsxs)(h.Card,{className:"p-6 mb-6 border-red-200 bg-red-50",children:[(0,b.jsx)("p",{className:"text-red-700",children:V}),(0,b.jsx)(g.Button,{onClick:aB,variant:"outline",className:"mt-4",children:"Try Again"})]}),T?(0,b.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,b.jsx)(j.Loader2,{className:"h-12 w-12 animate-spin text-teal-600"}),(0,b.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading bookings..."})]}):(0,b.jsxs)(b.Fragment,{children:["current"===az&&(0,b.jsx)(b.Fragment,{children:R?aT(R,!0):(0,b.jsxs)(h.Card,{className:"p-12 text-center",children:[(0,b.jsx)(k.Calendar,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No current booking"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have an active booking at the moment."}),(0,b.jsx)(x.default,{href:"/properties",children:(0,b.jsx)(g.Button,{className:"bg-teal-600 hover:bg-teal-700",children:"Browse Properties"})})]})}),"pending"===az&&(0,b.jsx)(b.Fragment,{children:0===P.length?(0,b.jsxs)(h.Card,{className:"p-12 text-center",children:[(0,b.jsx)(k.Calendar,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No pending negotiations"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have any negotiations waiting for host approval."}),(0,b.jsx)(x.default,{href:"/properties",children:(0,b.jsx)(g.Button,{className:"bg-teal-600 hover:bg-teal-700",children:"Browse Properties"})})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(a=>aT(a))})}),"payment"===az&&(0,b.jsx)(b.Fragment,{children:0===P.length?(0,b.jsxs)(h.Card,{className:"p-12 text-center",children:[(0,b.jsx)(r.CreditCard,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No bookings awaiting payment"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have any bookings waiting for payment."}),(0,b.jsx)(x.default,{href:"/properties",children:(0,b.jsx)(g.Button,{className:"bg-teal-600 hover:bg-teal-700",children:"Browse Properties"})})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(a=>aT(a))})}),"rejected"===az&&(0,b.jsx)(b.Fragment,{children:0===P.length?(0,b.jsxs)(h.Card,{className:"p-12 text-center",children:[(0,b.jsx)(o.XCircle,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No rejected negotiations"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have any rejected negotiations."}),(0,b.jsx)(x.default,{href:"/properties",children:(0,b.jsx)(g.Button,{className:"bg-teal-600 hover:bg-teal-700",children:"Browse Properties"})})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(a=>aT(a))})}),"complaints"===az&&(0,b.jsx)(b.Fragment,{children:an?(0,b.jsxs)(h.Card,{className:"p-12 text-center",children:[(0,b.jsx)(j.Loader2,{className:"w-8 h-8 animate-spin text-teal-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading complaints..."})]}):0===al.length?(0,b.jsxs)(h.Card,{className:"p-12 text-center",children:[(0,b.jsx)(u.AlertTriangle,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No complaints"}),(0,b.jsx)("p",{className:"text-gray-600",children:"You haven't filed any complaints yet."})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:al.map(a=>{let c=at[a.id],d=av[a.id];return ax[a.id],(0,b.jsx)(h.Card,{className:"p-6 hover:shadow-lg transition-shadow",children:(0,b.jsxs)("div",{className:"flex flex-col h-full",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2 flex-1",children:a.title})}),(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)(i.Badge,{className:"OPEN"===a.status?"bg-blue-100 text-blue-800":"IN_REVIEW"===a.status?"bg-yellow-100 text-yellow-800":"RESOLVED"===a.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:a.status.replace("_"," ")}),(0,b.jsx)(i.Badge,{className:"LOW"===a.severity?"bg-green-100 text-green-800":"MEDIUM"===a.severity?"bg-yellow-100 text-yellow-800":"HIGH"===a.severity?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800",children:a.severity})]})]}),(0,b.jsx)("p",{className:"text-gray-600 mb-4 text-sm line-clamp-3 flex-1",children:a.description}),c&&(0,b.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)(w.Building2,{className:"w-4 h-4 text-teal-600"}),(0,b.jsx)("span",{className:"font-semibold text-sm text-gray-900",children:c.title})]}),c.address&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[(0,b.jsx)(l.MapPin,{className:"w-3 h-3 text-teal-600"}),(0,b.jsxs)("span",{children:[c.address.city,", ",c.address.country]})]})]}),d&&(0,b.jsxs)("div",{className:"mb-4 flex items-center gap-2 text-sm",children:[(0,b.jsx)(v.Phone,{className:"w-4 h-4 text-teal-600"}),(0,b.jsx)("span",{className:"text-gray-600",children:"Host Phone:"}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:d})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"Type: "}),(0,b.jsx)("span",{className:"text-xs font-medium text-gray-700",children:a.type.replace("_"," ")})]}),(0,b.jsxs)("div",{className:"mb-4 space-y-1",children:[a.refundAmount&&(0,b.jsxs)("div",{className:"text-sm font-semibold text-green-600",children:["Refund: $",a.refundAmount.toFixed(2)]}),a.penaltyPoints&&(0,b.jsxs)("div",{className:"text-sm font-semibold text-red-600",children:["Penalty: ",a.penaltyPoints," pts"]})]}),a.resolutionNotes&&(0,b.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-blue-900 mb-1",children:"Resolution:"}),(0,b.jsx)("p",{className:"text-xs text-blue-700",children:a.resolutionNotes})]}),(0,b.jsxs)("div",{className:"flex gap-2 mt-auto pt-4 border-t border-gray-200",children:[(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>K.push(`/reclamation/${a.bookingId}?isHost=${"HOST"===a.complainantRole}&reclamationId=${a.id}`),children:[(0,b.jsx)(s.Eye,{className:"w-4 h-4 mr-1"}),"View"]}),"OPEN"===a.status&&(0,b.jsx)(g.Button,{variant:"destructive",size:"sm",onClick:()=>aH(a.bookingId,a.id),disabled:X[a.bookingId],children:X[a.bookingId]?(0,b.jsx)(j.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(q.Trash2,{className:"w-4 h-4"})})]})]})},a.id)})})})]}),(0,b.jsx)(z.Dialog,{open:_,onOpenChange:aa,children:(0,b.jsxs)(z.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(z.DialogHeader,{children:(0,b.jsxs)(z.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:["Edit Booking #",ab?.id]})}),ab&&(0,b.jsxs)("div",{className:"space-y-6 mt-4",children:[ab.property&&(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:ab.property.title}),ab.property.address&&(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:[ab.property.address.city,", ",ab.property.address.country]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(B.Label,{htmlFor:"checkInDate",className:"text-sm font-semibold text-gray-700",children:"Check-in Date *"}),(0,b.jsx)(A.Input,{id:"checkInDate",type:"date",value:ad.checkInDate,onChange:a=>ae({...ad,checkInDate:a.target.value}),min:(D=(a=new Date).getFullYear(),E=String(a.getMonth()+1).padStart(2,"0"),F=String(a.getDate()).padStart(2,"0"),`${D}-${E}-${F}`),className:"mt-2"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(B.Label,{htmlFor:"checkOutDate",className:"text-sm font-semibold text-gray-700",children:"Check-out Date *"}),(0,b.jsx)(A.Input,{id:"checkOutDate",type:"date",value:ad.checkOutDate,onChange:a=>ae({...ad,checkOutDate:a.target.value}),min:ad.checkInDate||(H=(G=new Date).getFullYear(),I=String(G.getMonth()+1).padStart(2,"0"),J=String(G.getDate()).padStart(2,"0"),`${H}-${I}-${J}`),className:"mt-2"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(B.Label,{htmlFor:"numberOfGuests",className:"text-sm font-semibold text-gray-700",children:"Number of Guests"}),(0,b.jsx)(A.Input,{id:"numberOfGuests",type:"number",min:"1",value:ad.numberOfGuests,onChange:a=>ae({...ad,numberOfGuests:parseInt(a.target.value)||1}),className:"mt-2"})]}),(ab.property?.negotiationPercentage&&ab.property.negotiationPercentage>0||"NEGOTIATION_REJECTED"===ab.status||"PENDING_NEGOTIATION"===ab.status)&&(0,b.jsxs)("div",{children:[(0,b.jsx)(B.Label,{htmlFor:"requestedPrice",className:"text-sm font-semibold text-gray-700",children:"Requested Price (MAD) *"}),(0,b.jsx)(A.Input,{id:"requestedPrice",type:"number",step:"0.001",min:"0",value:ad.requestedPrice||"",onChange:a=>ae({...ad,requestedPrice:a.target.value||void 0}),placeholder:"Enter your requested price",className:"mt-2",required:!0}),ab.property?.negotiationPercentage&&ab.property.negotiationPercentage>0&&(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum negotiation: ",ab.property.negotiationPercentage,"%"]}),"NEGOTIATION_REJECTED"===ab.status&&(0,b.jsx)("p",{className:"text-xs text-orange-600 mt-1 font-medium",children:"⚠️ Your previous negotiation was rejected. Please enter a new price."})]}),V&&(0,b.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm text-red-700",children:V})}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>{aa(!1),ac(null),W("")},className:"flex-1",children:"Cancel"}),(0,b.jsx)(g.Button,{onClick:aN,disabled:X[ab.id],className:"flex-1 bg-teal-600 hover:bg-teal-700 text-white",children:X[ab.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})}),(0,b.jsx)(z.Dialog,{open:af,onOpenChange:ag,children:(0,b.jsxs)(z.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(z.DialogHeader,{children:(0,b.jsx)(z.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:"Booking Details"})}),ah&&(0,b.jsxs)("div",{className:"space-y-6 mt-4",children:[ah.property&&(0,b.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-teal-100 to-teal-200 rounded-lg overflow-hidden mb-4",children:[aR(ah.property)?(0,b.jsx)(y.default,{src:aS(aR(ah.property)),alt:ah.property.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 80vw"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(l.MapPin,{className:"w-16 h-16 text-teal-300"})}),(0,b.jsx)("div",{className:"absolute top-4 right-4",children:aO(ah.status)})]}),ah.property&&(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:ah.property.title}),ah.property.address&&(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(l.MapPin,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsxs)("span",{children:[ah.property.address.city,", ",ah.property.address.country]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,b.jsx)(k.Calendar,{className:"w-5 h-5 mr-2 text-teal-600"}),"Booking Dates"]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-in"}),(0,b.jsx)("p",{className:"text-base font-semibold text-gray-900",children:aP(ah.checkInDate)})]}),(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-out"}),(0,b.jsx)("p",{className:"text-base font-semibold text-gray-900",children:aP(ah.checkOutDate)})]})]}),(0,b.jsx)("div",{className:"p-4 bg-teal-50 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-700",children:[(0,b.jsx)(n.Clock,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsx)("span",{className:"font-medium",children:"Duration"})]}),(0,b.jsxs)("span",{className:"text-lg font-bold text-teal-700",children:[aQ(ah.checkInDate,ah.checkOutDate)," ",1===aQ(ah.checkInDate,ah.checkOutDate)?"night":"nights"]})]})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,b.jsx)(r.CreditCard,{className:"w-5 h-5 mr-2 text-teal-600"}),"Pricing"]}),(0,b.jsxs)("div",{className:"p-6 bg-gradient-to-br from-teal-50 to-teal-100 rounded-lg border-2 border-teal-200",children:[(0,b.jsxs)("div",{className:"flex items-baseline justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Total Price"}),(0,b.jsxs)("span",{className:"text-xl font-bold text-teal-700",children:[ah.totalPrice?.toFixed(0)||"N/A"," MAD"]})]}),ah.longStayDiscountPercent&&ah.longStayDiscountPercent>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-teal-200",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Long Stay Discount"}),(0,b.jsxs)("span",{className:"text-sm font-semibold text-blue-600",children:[ah.longStayDiscountPercent,"%"]})]}),ah.requestedNegotiationPercent&&ah.requestedNegotiationPercent>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Negotiation"}),(0,b.jsxs)("span",{className:"text-sm font-semibold text-yellow-600",children:[ah.requestedNegotiationPercent,"%"]})]})]})]}),"PENDING_NEGOTIATION"===ah.status&&(0,b.jsx)("div",{className:"p-4 bg-yellow-50 border-2 border-yellow-200 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm font-medium text-yellow-800 text-center",children:"⏳ Waiting for host to approve your negotiation"})}),"NEGOTIATION_REJECTED"===ah.status&&(0,b.jsxs)("div",{className:"p-4 bg-orange-50 border-2 border-orange-200 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-orange-800 text-center mb-2",children:"⚠️ Your negotiation was rejected by the host"}),(0,b.jsx)("p",{className:"text-xs text-orange-700 text-center",children:"You can edit the booking to change the price or cancel it"})]}),"TENANT_CHECKED_OUT"===ah.status&&(0,b.jsx)("div",{className:"p-4 bg-yellow-50 border-2 border-yellow-200 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm font-medium text-yellow-800 text-center",children:"⏳ Waiting for host to confirm your checkout"})}),"COMPLETED"===ah.status&&(0,b.jsx)("div",{className:"p-4 bg-green-50 border-2 border-green-200 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm font-medium text-green-800 text-center",children:"✓ Booking completed successfully"})}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3 pt-4 border-t border-gray-200",children:["PENDING_PAYMENT"===ah.status&&(0,b.jsxs)(g.Button,{onClick:()=>{ag(!1),aK(ah.id)},className:"flex-1 bg-teal-600 hover:bg-teal-700 text-white",children:[(0,b.jsx)(r.CreditCard,{className:"w-4 h-4 mr-2"}),"Pay Now"]}),"NEGOTIATION_REJECTED"===ah.status&&(0,b.jsxs)(g.Button,{onClick:()=>{ag(!1),aM(ah)},className:"flex-1 bg-orange-600 hover:bg-orange-700 text-white",children:[(0,b.jsx)(p.Edit,{className:"w-4 h-4 mr-2"}),"Change Price"]}),"CONFIRMED"===ah.status&&(0,b.jsx)(g.Button,{onClick:async()=>{ag(!1),await aJ(ah.id)},disabled:X[ah.id],className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:X[ah.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.CheckCircle,{className:"w-4 h-4 mr-2"}),"I've Checked Out"]})}),"CONFIRMED"===ah.status&&(0,b.jsx)(b.Fragment,{children:aj[ah.id]?(0,b.jsx)(g.Button,{onClick:async()=>{ag(!1),await aH(ah.id,aj[ah.id].id)},disabled:X[ah.id],variant:"outline",className:"flex-1 border-red-300 text-red-700 hover:bg-red-50",children:X[ah.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.X,{className:"w-4 h-4 mr-2"}),"Remove Reclamation"]})}):(0,b.jsxs)(g.Button,{onClick:()=>{ag(!1),aG(ah.id)},variant:"outline",className:"flex-1 border-orange-300 text-orange-700 hover:bg-orange-50",children:[(0,b.jsx)(u.AlertTriangle,{className:"w-4 h-4 mr-2"}),"Reclamation"]})}),("PENDING_PAYMENT"===ah.status||"PENDING_NEGOTIATION"===ah.status||"NEGOTIATION_REJECTED"===ah.status)&&(0,b.jsxs)(g.Button,{onClick:()=>{ag(!1),aM(ah)},variant:"outline",className:"flex-1",children:[(0,b.jsx)(p.Edit,{className:"w-4 h-4 mr-2"}),"Edit"]}),("PENDING_PAYMENT"===ah.status||"PENDING_NEGOTIATION"===ah.status||"NEGOTIATION_REJECTED"===ah.status)&&(0,b.jsx)(g.Button,{onClick:async()=>{ag(!1),await aL(ah.id)},disabled:X[ah.id],variant:"destructive",className:"flex-1",children:X[ah.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Deleting..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.Trash2,{className:"w-4 h-4 mr-2"}),"Cancel"]})}),(0,b.jsx)(g.Button,{onClick:()=>ag(!1),variant:"outline",className:"flex-1",children:"Close"})]})]})]})})]})}):null}a.s(["default",()=>D])}];

//# sourceMappingURL=app_my-bookings_page_tsx_978816ec._.js.map