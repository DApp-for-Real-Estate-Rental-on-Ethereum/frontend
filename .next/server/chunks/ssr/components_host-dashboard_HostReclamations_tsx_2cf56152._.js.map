{"version":3,"sources":["../../../../components/host-dashboard/HostReclamations.tsx","../../../../node_modules/lucide-react/src/icons/pen.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { apiClient } from \"@/lib/services/api\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Textarea } from \"@/components/ui/textarea\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\"\r\nimport { Loader2, AlertTriangle, Eye, Trash2, Phone, MapPin, Building2, Edit2, X, Upload, Image as ImageIcon } from \"lucide-react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { toast } from \"sonner\"\r\nimport Image from \"next/image\"\r\n\r\nconst RECLAMATION_API_BASE_URL = process.env.NEXT_PUBLIC_RECLAMATION_API_BASE_URL || \"http://localhost:8091\"\r\n\r\ninterface HostReclamationsProps {\r\n  ownerId: string | number\r\n  filter: \"my-complaints\" | \"complaints-against-me\"\r\n}\r\n\r\ninterface ImagePreview {\r\n  file?: File\r\n  preview: string\r\n  url?: string\r\n}\r\n\r\nexport function HostReclamations({ ownerId, filter }: HostReclamationsProps) {\r\n  const router = useRouter()\r\n  const [reclamations, setReclamations] = useState<any[]>([])\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const [error, setError] = useState(\"\")\r\n  const [actionLoading, setActionLoading] = useState<{ [key: number]: boolean }>({})\r\n  const [properties, setProperties] = useState<{ [key: number]: any }>({})\r\n  const [phoneNumbers, setPhoneNumbers] = useState<{ [key: number]: string | null }>({})\r\n  const [loadingData, setLoadingData] = useState<{ [key: number]: boolean }>({})\r\n  const [attachments, setAttachments] = useState<{ [key: number]: any[] }>({})\r\n  \r\n  // View/Edit Dialog State\r\n  const [viewDialogOpen, setViewDialogOpen] = useState(false)\r\n  const [editDialogOpen, setEditDialogOpen] = useState(false)\r\n  const [selectedReclamation, setSelectedReclamation] = useState<any | null>(null)\r\n  const [editTitle, setEditTitle] = useState(\"\")\r\n  const [editDescription, setEditDescription] = useState(\"\")\r\n  const [editImages, setEditImages] = useState<ImagePreview[]>([])\r\n  const [loadingAttachments, setLoadingAttachments] = useState(false)\r\n  const [updating, setUpdating] = useState(false)\r\n\r\n  useEffect(() => {\r\n    fetchReclamations()\r\n  }, [ownerId, filter])\r\n\r\n  const fetchReclamations = async () => {\r\n    setIsLoading(true)\r\n    setError(\"\")\r\n    try {\r\n      let data: any[] = []\r\n      if (filter === \"my-complaints\") {\r\n        data = await apiClient.reclamations.getMyComplaints(ownerId)\r\n      } else {\r\n        data = await apiClient.reclamations.getComplaintsAgainstMe(ownerId)\r\n      }\r\n      setReclamations(data || [])\r\n      \r\n      // Fetch property and phone number data for each reclamation\r\n      if (data && data.length > 0) {\r\n        await fetchReclamationDetails(data)\r\n      }\r\n    } catch (err: any) {\r\n      setError(err.message || \"Failed to fetch reclamations\")\r\n      toast.error(\"Failed to load reclamations\")\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  const fetchReclamationDetails = async (reclamations: any[]) => {\r\n    try {\r\n      const propertiesMap: { [key: number]: any } = {}\r\n      const phoneNumbersMap: { [key: number]: string | null } = {}\r\n      \r\n      await Promise.all(\r\n        reclamations.map(async (complaint) => {\r\n          try {\r\n            setLoadingData((prev) => ({ ...prev, [complaint.id]: true }))\r\n            \r\n            // Fetch booking to get propertyId\r\n            try {\r\n              const booking = await apiClient.bookings.getById(complaint.bookingId)\r\n              if (booking && booking.propertyId) {\r\n                // Fetch property details\r\n                try {\r\n                  const property = await apiClient.properties.getById(String(booking.propertyId))\r\n                  propertiesMap[complaint.id] = property\r\n                } catch (err) {\r\n                }\r\n                \r\n                // Fetch phone number - for complaints against me, get complainant phone\r\n                if (filter === \"complaints-against-me\") {\r\n                  try {\r\n                    const phone = await apiClient.reclamations.getUserPhoneNumber(complaint.complainantId)\r\n                    phoneNumbersMap[complaint.id] = phone\r\n                  } catch (err) {\r\n                  }\r\n                }\r\n              }\r\n            } catch (err) {\r\n            }\r\n          } catch (err) {\r\n          } finally {\r\n            setLoadingData((prev) => ({ ...prev, [complaint.id]: false }))\r\n          }\r\n        })\r\n      )\r\n      \r\n      setProperties((prev) => ({ ...prev, ...propertiesMap }))\r\n      setPhoneNumbers((prev) => ({ ...prev, ...phoneNumbersMap }))\r\n    } catch (err) {\r\n    }\r\n  }\r\n\r\n  const fetchAttachments = async (reclamationId: number) => {\r\n    setLoadingAttachments(true)\r\n    try {\r\n      // Use regular reclamations endpoint instead of admin endpoint\r\n      const atts = await apiClient.reclamations.getAttachments(reclamationId)\r\n      setAttachments((prev) => ({ ...prev, [reclamationId]: atts || [] }))\r\n      return atts || []\r\n    } catch (err: any) {\r\n      // Try admin endpoint as fallback\r\n      try {\r\n        const atts = await apiClient.adminReclamations.getAttachments(reclamationId)\r\n        setAttachments((prev) => ({ ...prev, [reclamationId]: atts || [] }))\r\n        return atts || []\r\n      } catch (adminErr: any) {\r\n        return []\r\n      }\r\n    } finally {\r\n      setLoadingAttachments(false)\r\n    }\r\n  }\r\n\r\n  const handleView = async (reclamation: any) => {\r\n    setSelectedReclamation(reclamation)\r\n    setViewDialogOpen(true)\r\n    await fetchAttachments(reclamation.id)\r\n  }\r\n\r\n  const handleEdit = async (reclamation: any) => {\r\n    setSelectedReclamation(reclamation)\r\n    setEditTitle(reclamation.title)\r\n    setEditDescription(reclamation.description)\r\n    setEditImages([])\r\n    setEditDialogOpen(true)\r\n    const atts = await fetchAttachments(reclamation.id)\r\n    // Load existing images as previews\r\n    const existingImages: ImagePreview[] = (atts || []).map((att: any) => {\r\n      // Build filename from filePath\r\n      let filename = att.filePath\r\n      if (att.filePath.includes('/')) {\r\n        filename = att.filePath.split('/').pop() || att.filePath\r\n      }\r\n      filename = filename.replace(/\\\\/g, '/').split('/').pop() || filename\r\n      \r\n      // Use regular endpoint for images\r\n      const imageUrl = `${RECLAMATION_API_BASE_URL}/api/reclamations/files/${reclamation.id}/${encodeURIComponent(filename)}`\r\n      console.log(\"üì∏ Edit dialog - Image URL:\", imageUrl, \"from filePath:\", att.filePath)\r\n      return { preview: imageUrl, url: imageUrl }\r\n    })\r\n    setEditImages(existingImages)\r\n  }\r\n\r\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = e.target.files\r\n    if (!files) return\r\n\r\n    const newImages: ImagePreview[] = []\r\n    for (let i = 0; i < files.length && editImages.length + newImages.length < 3; i++) {\r\n      const file = files[i]\r\n      if (file.type.startsWith('image/')) {\r\n        const reader = new FileReader()\r\n        reader.onload = (e) => {\r\n          setEditImages((prev) => [...prev, { file, preview: e.target?.result as string }])\r\n        }\r\n        reader.readAsDataURL(file)\r\n      }\r\n    }\r\n  }\r\n\r\n  const removeImage = (index: number) => {\r\n    setEditImages((prev) => prev.filter((_, i) => i !== index))\r\n  }\r\n\r\n  const handleUpdate = async () => {\r\n    if (!selectedReclamation) return\r\n\r\n    if (!editTitle.trim() || !editDescription.trim()) {\r\n      toast.error(\"Title and description are required\")\r\n      return\r\n    }\r\n\r\n    setUpdating(true)\r\n    try {\r\n      // Check if images were modified (new files added or images removed)\r\n      const existingImageCount = editImages.filter(img => !img.file && img.url).length\r\n      const newImageFiles = editImages.filter(img => img.file).map(img => img.file!)\r\n      const totalImages = existingImageCount + newImageFiles.length\r\n      \r\n      // If total images exceed 3, show error\r\n      if (totalImages > 3) {\r\n        toast.error(\"Maximum 3 images allowed\")\r\n        setUpdating(false)\r\n        return\r\n      }\r\n      \r\n      // If user removed all images or added new ones, send all images (new files only)\r\n      // Backend will replace all old images with new ones\r\n      const imagesToSend = newImageFiles.length > 0 ? newImageFiles : undefined\r\n      \r\n      await apiClient.reclamations.update(\r\n        selectedReclamation.id,\r\n        ownerId,\r\n        editTitle.trim(),\r\n        editDescription.trim(),\r\n        imagesToSend\r\n      )\r\n\r\n      toast.success(\"Reclamation updated successfully\")\r\n      setEditDialogOpen(false)\r\n      await fetchReclamations()\r\n    } catch (err: any) {\r\n      toast.error(err.message || \"Failed to update reclamation\")\r\n    } finally {\r\n      setUpdating(false)\r\n    }\r\n  }\r\n\r\n  const handleRemoveReclamation = async (reclamationId: number) => {\r\n    if (!window.confirm(\"Are you sure you want to remove this reclamation?\")) {\r\n      return\r\n    }\r\n\r\n    setActionLoading((prev) => ({ ...prev, [reclamationId]: true }))\r\n    try {\r\n      await apiClient.reclamations.delete(reclamationId, ownerId)\r\n      setReclamations((prev) => prev.filter((r) => r.id !== reclamationId))\r\n      toast.success(\"Reclamation removed successfully\")\r\n    } catch (err: any) {\r\n      toast.error(err.message || \"Failed to remove reclamation\")\r\n    } finally {\r\n      setActionLoading((prev) => ({ ...prev, [reclamationId]: false }))\r\n    }\r\n  }\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const colors: Record<string, string> = {\r\n      OPEN: \"bg-blue-100 text-blue-800\",\r\n      IN_REVIEW: \"bg-yellow-100 text-yellow-800\",\r\n      RESOLVED: \"bg-green-100 text-green-800\",\r\n      REJECTED: \"bg-red-100 text-red-800\",\r\n    }\r\n\r\n    return (\r\n      <Badge className={colors[status] || \"bg-gray-100 text-gray-800\"}>\r\n        {status.replace(\"_\", \" \")}\r\n      </Badge>\r\n    )\r\n  }\r\n\r\n  const getSeverityBadge = (severity: string) => {\r\n    const colors: Record<string, string> = {\r\n      LOW: \"bg-green-100 text-green-800\",\r\n      MEDIUM: \"bg-yellow-100 text-yellow-800\",\r\n      HIGH: \"bg-orange-100 text-orange-800\",\r\n      CRITICAL: \"bg-red-100 text-red-800\",\r\n    }\r\n\r\n    return (\r\n      <Badge className={colors[severity] || \"bg-gray-100 text-gray-800\"}>\r\n        {severity}\r\n      </Badge>\r\n    )\r\n  }\r\n\r\n  const getTypeLabel = (type: string) => {\r\n    const labels: Record<string, string> = {\r\n      ACCESS_ISSUE: \"Access Issue\",\r\n      NOT_AS_DESCRIBED: \"Not As Described\",\r\n      CLEANLINESS: \"Cleanliness\",\r\n      SAFETY_HEALTH: \"Safety & Health\",\r\n      PROPERTY_DAMAGE: \"Property Damage\",\r\n      EXTRA_CLEANING: \"Extra Cleaning\",\r\n      HOUSE_RULE_VIOLATION: \"House Rule Violation\",\r\n      UNAUTHORIZED_GUESTS_OR_STAY: \"Unauthorized Guests/Stay\",\r\n    }\r\n    return labels[type] || type\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Card className=\"p-12 text-center\">\r\n        <Loader2 className=\"w-8 h-8 animate-spin text-teal-600 mx-auto mb-4\" />\r\n        <p className=\"text-gray-600\">Loading reclamations...</p>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card className=\"p-6 border-red-200 bg-red-50\">\r\n        <p className=\"text-red-700\">{error}</p>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  if (reclamations.length === 0) {\r\n    return (\r\n      <Card className=\"p-12 text-center\">\r\n        <AlertTriangle className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\r\n        <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">\r\n          {filter === \"my-complaints\" ? \"No complaints filed\" : \"No complaints against you\"}\r\n        </h2>\r\n        <p className=\"text-gray-600\">\r\n          {filter === \"my-complaints\"\r\n            ? \"You haven't filed any complaints yet.\"\r\n            : \"You don't have any complaints filed against you.\"}\r\n        </p>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {reclamations.map((complaint) => {\r\n          const property = properties[complaint.id]\r\n          const phoneNumber = phoneNumbers[complaint.id]\r\n          const isLoadingDetails = loadingData[complaint.id]\r\n          \r\n          // Debug: Log complaint data for my-complaints\r\n          if (filter === \"my-complaints\") {\r\n            console.log(\"üîç Reclamation Debug:\", {\r\n              id: complaint.id,\r\n              status: complaint.status,\r\n              statusType: typeof complaint.status,\r\n              filter: filter,\r\n              canEdit: filter === \"my-complaints\" && complaint.status === \"OPEN\",\r\n              statusCheck: complaint.status === \"OPEN\",\r\n              statusValue: JSON.stringify(complaint.status)\r\n            })\r\n          }\r\n          \r\n          return (\r\n            <Card key={complaint.id} className=\"p-6 hover:shadow-lg transition-shadow\">\r\n              <div className=\"flex flex-col h-full\">\r\n                {/* Header */}\r\n                <div className=\"mb-4\">\r\n                  <div className=\"flex items-start justify-between mb-2\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 line-clamp-2 flex-1\">{complaint.title}</h3>\r\n                  </div>\r\n                  {/* Status and Severity - Only for my-complaints */}\r\n                {filter === \"my-complaints\" && (\r\n                  <div className=\"flex items-center gap-2 flex-wrap\">\r\n                    {getStatusBadge(complaint.status)}\r\n                    {getSeverityBadge(complaint.severity)}\r\n                  </div>\r\n                )}\r\n                </div>\r\n                \r\n                {/* Description */}\r\n                <p className=\"text-gray-600 mb-4 text-sm line-clamp-3 flex-1\">{complaint.description}</p>\r\n                \r\n                {/* Property Info - Only for my-complaints */}\r\n                {filter === \"my-complaints\" && property && (\r\n                  <div className=\"mb-4 p-3 bg-gray-50 rounded-lg\">\r\n                    <div className=\"flex items-center gap-2 mb-1\">\r\n                      <Building2 className=\"w-4 h-4 text-teal-600\" />\r\n                      <span className=\"font-semibold text-sm text-gray-900\">{property.title}</span>\r\n                    </div>\r\n                    {property.address && (\r\n                      <div className=\"flex items-center gap-2 text-xs text-gray-600\">\r\n                        <MapPin className=\"w-3 h-3 text-teal-600\" />\r\n                        <span>{property.address.city}, {property.address.country}</span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n                \r\n                {/* Phone Number - Only for complaints-against-me */}\r\n                {filter === \"complaints-against-me\" && phoneNumber && (\r\n                  <div className=\"mb-4 p-3 bg-teal-50 rounded-lg\">\r\n                    <div className=\"flex items-center gap-2 text-sm\">\r\n                      <Phone className=\"w-4 h-4 text-teal-600\" />\r\n                      <span className=\"text-gray-600\">Complainant Phone:</span>\r\n                      <span className=\"font-semibold text-gray-900\">{phoneNumber}</span>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n                \r\n                {/* Type - Only for my-complaints */}\r\n                {filter === \"my-complaints\" && (\r\n                  <div className=\"mb-4\">\r\n                    <span className=\"text-xs text-gray-500\">Type: </span>\r\n                    <span className=\"text-xs font-medium text-gray-700\">{getTypeLabel(complaint.type)}</span>\r\n                  </div>\r\n                )}\r\n                \r\n                {/* Refund and Penalty - Only for my-complaints */}\r\n                {filter === \"my-complaints\" && (\r\n                  <div className=\"mb-4 space-y-1\">\r\n                    {complaint.refundAmount && (\r\n                      <div className=\"text-sm font-semibold text-green-600\">\r\n                        Refund: {complaint.refundAmount.toFixed(2)} MAD\r\n                      </div>\r\n                    )}\r\n                    {complaint.penaltyPoints && (\r\n                      <div className=\"text-sm font-semibold text-red-600\">\r\n                        Penalty: {complaint.penaltyPoints} pts\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n                \r\n                {/* Resolution Notes - Only for my-complaints */}\r\n                {filter === \"my-complaints\" && complaint.resolutionNotes && (\r\n                  <div className=\"mb-4 p-3 bg-blue-50 rounded-lg\">\r\n                    <p className=\"text-xs font-semibold text-blue-900 mb-1\">Resolution:</p>\r\n                    <p className=\"text-xs text-blue-700\">{complaint.resolutionNotes}</p>\r\n                  </div>\r\n                )}\r\n                \r\n                {/* Actions */}\r\n                <div className=\"flex gap-2 mt-auto pt-4 border-t border-gray-200\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    className=\"flex-1\"\r\n                    onClick={() => handleView(complaint)}\r\n                  >\r\n                    <Eye className=\"w-4 h-4 mr-1\" />\r\n                    View\r\n                  </Button>\r\n                  {(() => {\r\n                    // Check if we're in my-complaints filter\r\n                    const isMyComplaints = filter === \"my-complaints\"\r\n                    \r\n                    // Get status value - handle both string and object\r\n                    let statusValue = complaint.status\r\n                    if (typeof statusValue === \"object\" && statusValue !== null) {\r\n                      statusValue = (statusValue as any).name || (statusValue as any).value || String(statusValue)\r\n                    }\r\n                    statusValue = String(statusValue || \"\").trim().toUpperCase()\r\n                    \r\n                    // Check if status is OPEN\r\n                    const isOpen = statusValue === \"OPEN\"\r\n                    \r\n                    // Log for debugging\r\n                    if (isMyComplaints) {\r\n                      console.log(\"üîß Edit Button Logic:\", {\r\n                        id: complaint.id,\r\n                        isMyComplaints: isMyComplaints,\r\n                        originalStatus: complaint.status,\r\n                        statusValue: statusValue,\r\n                        isOpen: isOpen,\r\n                        willShowEdit: isMyComplaints && isOpen\r\n                      })\r\n                    }\r\n                    \r\n                    // Show edit buttons only if: my-complaints AND status is OPEN\r\n                    if (isMyComplaints && isOpen) {\r\n                      return (\r\n                        <>\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            onClick={() => handleEdit(complaint)}\r\n                            title=\"Edit reclamation\"\r\n                          >\r\n                            <Edit2 className=\"w-4 h-4 mr-1\" />\r\n                            Edit\r\n                          </Button>\r\n                          <Button\r\n                            variant=\"destructive\"\r\n                            size=\"sm\"\r\n                            onClick={() => handleRemoveReclamation(complaint.id)}\r\n                            disabled={actionLoading[complaint.id]}\r\n                          >\r\n                            {actionLoading[complaint.id] ? (\r\n                              <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                            ) : (\r\n                              <Trash2 className=\"w-4 h-4\" />\r\n                            )}\r\n                          </Button>\r\n                        </>\r\n                      )\r\n                    } else if (isMyComplaints) {\r\n                      return (\r\n                        <div className=\"text-xs text-gray-500 italic px-2 py-1 bg-gray-50 rounded\">\r\n                          Cannot edit (Status: {statusValue})\r\n                        </div>\r\n                      )\r\n                    }\r\n                    return null\r\n                  })()}\r\n                </div>\r\n              </div>\r\n            </Card>\r\n          )\r\n        })}\r\n      </div>\r\n\r\n      {/* View Dialog */}\r\n      <Dialog open={viewDialogOpen} onOpenChange={setViewDialogOpen}>\r\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\r\n          <DialogHeader>\r\n            <DialogTitle>Reclamation Details</DialogTitle>\r\n            <DialogDescription>\r\n              {filter === \"my-complaints\" ? \"View your reclamation\" : \"View reclamation against you\"}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          \r\n          {selectedReclamation && (\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <Label className=\"text-sm font-medium text-gray-700\">Title</Label>\r\n                <p className=\"text-sm text-gray-900 mt-1\">{selectedReclamation.title}</p>\r\n              </div>\r\n              \r\n              <div>\r\n                <Label className=\"text-sm font-medium text-gray-700\">Description</Label>\r\n                <p className=\"text-sm text-gray-900 whitespace-pre-wrap mt-1\">{selectedReclamation.description}</p>\r\n              </div>\r\n\r\n              {/* Images */}\r\n              <div>\r\n                <Label className=\"text-sm font-medium text-gray-700 mb-2 block\">Attachments</Label>\r\n                {loadingAttachments ? (\r\n                  <div className=\"flex items-center justify-center py-4\">\r\n                    <Loader2 className=\"w-5 h-5 animate-spin text-gray-400\" />\r\n                    <span className=\"ml-2 text-sm text-gray-500\">Loading images...</span>\r\n                  </div>\r\n                ) : attachments[selectedReclamation.id]?.length > 0 ? (\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    {attachments[selectedReclamation.id].map((attachment: any, index: number) => {\r\n                      // Build image URL from filePath\r\n                      // filePath format: \"reclamationId/filename\" (e.g., \"4/8c2f0278-d8d5-45d7-bee6-606f82cb0347.png\")\r\n                      let filename = attachment.filePath\r\n                      if (attachment.filePath.includes('/')) {\r\n                        // Extract filename from path like \"4/filename.png\"\r\n                        filename = attachment.filePath.split('/').pop() || attachment.filePath\r\n                      }\r\n                      // Remove any backslashes (Windows paths)\r\n                      filename = filename.replace(/\\\\/g, '/').split('/').pop() || filename\r\n                      \r\n                      // Try regular endpoint first, fallback to admin endpoint\r\n                      const imageUrl = `${RECLAMATION_API_BASE_URL}/api/reclamations/files/${selectedReclamation.id}/${encodeURIComponent(filename)}`\r\n                      console.log(\"üñºÔ∏è Image URL:\", imageUrl, \"from filePath:\", attachment.filePath, \"filename:\", filename)\r\n                      \r\n                      return (\r\n                        <div key={attachment.id || index} className=\"relative\">\r\n                          <img\r\n                            src={imageUrl}\r\n                            alt={`Attachment ${index + 1}`}\r\n                            className=\"w-full h-48 object-cover rounded-lg border border-gray-200\"\r\n                            onError={(e) => {\r\n                              const target = e.target as HTMLImageElement\r\n                              console.error(\"‚ùå Failed to load image:\", imageUrl, \"from filePath:\", attachment.filePath)\r\n                              // Try admin endpoint as fallback\r\n                              const adminUrl = `${RECLAMATION_API_BASE_URL}/api/admin/reclamations/files/${selectedReclamation.id}/${encodeURIComponent(filename)}`\r\n                              if (target.src !== adminUrl) {\r\n                                target.src = adminUrl\r\n                              } else {\r\n                                target.src = \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Crect fill='%23ddd' width='100' height='100'/%3E%3Ctext fill='%23999' font-family='sans-serif' font-size='14' x='50%25' y='50%25' text-anchor='middle' dy='.3em'%3EImage not found%3C/text%3E%3C/svg%3E\"\r\n                              }\r\n                            }}\r\n                            onLoad={() => {\r\n                              console.log(\"‚úÖ Image loaded successfully:\", imageUrl)\r\n                            }}\r\n                          />\r\n                        </div>\r\n                      )\r\n                    })}\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"text-sm text-gray-500\">No images attached</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Phone Number - Only for complaints-against-me */}\r\n              {filter === \"complaints-against-me\" && phoneNumbers[selectedReclamation.id] && (\r\n                <div className=\"p-3 bg-teal-50 rounded-lg\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Phone className=\"w-4 h-4 text-teal-600\" />\r\n                    <span className=\"text-sm text-gray-600\">Complainant Phone:</span>\r\n                    <span className=\"text-sm font-semibold text-gray-900\">{phoneNumbers[selectedReclamation.id]}</span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Edit Dialog */}\r\n      <Dialog open={editDialogOpen} onOpenChange={setEditDialogOpen}>\r\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n          <DialogHeader>\r\n            <DialogTitle>Edit Reclamation</DialogTitle>\r\n            <DialogDescription>\r\n              Update title, description, and images. Only OPEN reclamations can be edited.\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          \r\n          {selectedReclamation && (\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <Label htmlFor=\"edit-title\">Title *</Label>\r\n                <Input\r\n                  id=\"edit-title\"\r\n                  value={editTitle}\r\n                  onChange={(e) => setEditTitle(e.target.value)}\r\n                  placeholder=\"Enter reclamation title\"\r\n                />\r\n              </div>\r\n              \r\n              <div>\r\n                <Label htmlFor=\"edit-description\">Description *</Label>\r\n                <Textarea\r\n                  id=\"edit-description\"\r\n                  value={editDescription}\r\n                  onChange={(e) => setEditDescription(e.target.value)}\r\n                  placeholder=\"Enter reclamation description\"\r\n                  rows={5}\r\n                />\r\n              </div>\r\n\r\n              {/* Images */}\r\n              <div>\r\n                <Label>Images (Max 3)</Label>\r\n                <div className=\"grid grid-cols-3 gap-4 mt-2\">\r\n                  {editImages.map((img, index) => (\r\n                    <div key={index} className=\"relative group\">\r\n                      <img\r\n                        src={img.preview}\r\n                        alt={`Preview ${index + 1}`}\r\n                        className=\"w-full h-32 object-cover rounded-lg border border-gray-200\"\r\n                      />\r\n                      <button\r\n                        onClick={() => removeImage(index)}\r\n                        className=\"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                      >\r\n                        <X className=\"w-4 h-4\" />\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                  {editImages.length < 3 && (\r\n                    <label className=\"flex items-center justify-center h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-teal-500 transition-colors\">\r\n                      <input\r\n                        type=\"file\"\r\n                        accept=\"image/*\"\r\n                        multiple\r\n                        className=\"hidden\"\r\n                        onChange={handleImageUpload}\r\n                      />\r\n                      <div className=\"text-center\">\r\n                        <Upload className=\"w-6 h-6 text-gray-400 mx-auto mb-1\" />\r\n                        <span className=\"text-xs text-gray-500\">Add Image</span>\r\n                      </div>\r\n                    </label>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex gap-2 pt-4\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => setEditDialogOpen(false)}\r\n                  className=\"flex-1\"\r\n                >\r\n                  Cancel\r\n                </Button>\r\n                <Button\r\n                  onClick={handleUpdate}\r\n                  disabled={updating || !editTitle.trim() || !editDescription.trim()}\r\n                  className=\"flex-1\"\r\n                >\r\n                  {updating ? (\r\n                    <>\r\n                      <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\r\n                      Updating...\r\n                    </>\r\n                  ) : (\r\n                    \"Update\"\r\n                  )}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  )\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Pen\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuMTc0IDYuODEyYTEgMSAwIDAgMC0zLjk4Ni0zLjk4N0wzLjg0MiAxNi4xNzRhMiAyIDAgMCAwLS41LjgzbC0xLjMyMSA0LjM1MmEuNS41IDAgMCAwIC42MjMuNjIybDQuMzUzLTEuMzJhMiAyIDAgMCAwIC44My0uNDk3eiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pen\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Pen = createLucideIcon('Pen', [\n  [\n    'path',\n    {\n      d: 'M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z',\n      key: '1a8usu',\n    },\n  ],\n]);\n\nexport default Pen;\n"],"names":[],"mappings":"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","ignoreList":[1]}