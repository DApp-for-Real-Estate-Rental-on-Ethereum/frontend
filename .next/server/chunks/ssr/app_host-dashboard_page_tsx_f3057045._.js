module.exports=[32886,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(13216),e=a.i(50944),f=a.i(72211),g=a.i(41675),h=a.i(67900),i=a.i(73570),j=a.i(5784);function k({activeSection:a,onSectionChange:d}){let f=(0,e.useRouter)(),[k,l]=(0,c.useState)(null),m=[{id:"bookings",label:"Bookings",icon:g.Calendar,subSections:[{id:"paid",label:"Paid Bookings"},{id:"negotiations",label:"Pending Approvals"},{id:"current",label:"Current Bookings"},{id:"checkout-requests",label:"Checkout Requests"},{id:"calendar",label:"Calendar"}]},{id:"properties",label:"Properties",icon:h.Building2,subSections:[{id:"my-properties",label:"All Properties"},{id:"draft",label:"Draft"},{id:"pending-approval",label:"Pending Approval"},{id:"approved",label:"Approved"},{id:"disapproved",label:"Disapproved"},{id:"suspended",label:"Suspended"},{id:"hidden",label:"Hidden"},{id:"add-property",label:"Add New Property"}]},{id:"reclamations",label:"Reclamations",icon:i.AlertTriangle,subSections:[{id:"my-complaints",label:"My Complaints"},{id:"complaints-against-me",label:"Complaints Against Me"}]}];return(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 mb-6 overflow-visible",children:(0,b.jsx)("div",{className:"flex items-stretch divide-x divide-gray-200",children:m.map(c=>{let e=c.icon,g=c.subSections.some(b=>b.id===a),h=k===c.id;return(0,b.jsxs)("div",{className:"flex-1 relative overflow-visible",children:[(0,b.jsx)("button",{onClick:()=>{var a;k===(a=c.id)?l(null):l(a)},className:`w-full px-4 py-3 text-center transition-colors ${g?"bg-teal-600 text-white":"hover:bg-gray-50"}`,children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-1.5",children:[(0,b.jsx)(e,{className:`w-4 h-4 ${g?"text-white":"text-gray-600"}`}),(0,b.jsx)("span",{className:`text-xs font-semibold ${g?"text-white":"text-gray-900"}`,children:c.label}),(0,b.jsx)(j.ChevronDown,{className:`w-3 h-3 transition-transform ${h?"rotate-180":""} ${g?"text-white":"text-gray-600"}`})]})}),h&&(0,b.jsx)("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 shadow-xl z-[100] rounded-b-lg mt-1",children:(0,b.jsx)("div",{className:"py-1",children:c.subSections.map(c=>(0,b.jsx)("button",{onClick:()=>(a=>{if("add-property"===a){f.push("/post-property"),l(null);return}d(a),l(null)})(c.id),className:`w-full px-4 py-2.5 text-left text-xs transition-colors ${a===c.id?"bg-teal-50 text-teal-700 font-semibold":"text-gray-700 hover:bg-gray-50"}`,children:c.label},c.id))})})]},c.id)})})})}var l=a.i(3130),m=a.i(40695),n=a.i(54161),o=a.i(96221),p=a.i(41710),q=a.i(16201),r=a.i(24987),s=a.i(77156),t=a.i(33508),u=a.i(63519),v=a.i(71987),w=a.i(65733),x=a.i(23292);function y({ownerId:a,onUpdate:h}){let j=(0,e.useRouter)(),{user:k}=(0,d.useAuth)(),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(!0),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)({}),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)({}),[M,N]=(0,c.useState)({}),[O,P]=(0,c.useState)({}),[Q,R]=(0,c.useState)({}),[S,T]=(0,c.useState)({});(0,c.useEffect)(()=>{V()},[a]),(0,c.useEffect)(()=>{let a=y.filter(a=>"CONFIRMED"===a.status||"TENANT_CHECKED_OUT"===a.status||"COMPLETED"===a.status);y.length>0&&X(),a.length>0&&(Z(a),U(a))},[y]);let U=async a=>{try{Array.from(new Set(a.map(a=>a.userId))).forEach(async a=>{if(a)try{if(P(b=>({...b,[a]:!0})),f.apiClient.risk&&f.apiClient.risk.getTenantRiskScore){let b=await f.apiClient.risk.getTenantRiskScore(Number(a));N(c=>({...c,[a]:b}))}}catch(b){console.error(`Failed to fetch risk score for tenant ${a}`,b)}finally{P(b=>({...b,[a]:!1}))}})}catch(a){console.error("Error fetching risk scores",a)}},V=async()=>{try{B(!0),D("");let b=await f.apiClient.bookings.getCurrentBookingsByOwner(parseInt(String(a))),c=await Promise.all(b.map(async a=>{try{let b=await f.apiClient.properties.getById(String(a.propertyId));return{...a,property:b}}catch{return{...a,property:void 0}}}));z(c)}catch(a){D(a.message||"Failed to load current bookings")}finally{B(!1)}},W=async b=>{if(window.confirm("Are you sure the tenant has checked out?")){F(a=>({...a,[b]:!0})),D("");try{let c=y.find(a=>a.id===b);if(!c)return void D("Booking not found");if("TENANT_CHECKED_OUT"!==c.status)return void D(`Cannot confirm checkout. Booking status must be TENANT_CHECKED_OUT, but it is ${c.status}`);let d=parseInt(String(a));if(isNaN(d))throw Error("Invalid owner ID. Please refresh the page and try again.");await f.apiClient.bookings.ownerConfirmCheckout(b,d),x.toast.success("Checkout confirmed successfully");try{console.log("ðŸ”— Attempting to complete booking on blockchain..."),await f.apiClient.payments.completeBooking(b),console.log("âœ… Booking completed successfully on blockchain"),x.toast.success("Funds distributed successfully on blockchain")}catch(b){let a=b?.message||b?.toString()||"Unknown error";a.includes("Contract not found")||a.includes("Please deploy")?a="Blockchain contract not found. Please contact support to deploy the contract.":a.includes("Cannot verify contract")?a="Cannot connect to blockchain. Please ensure Hardhat node is running.":a.includes("Authorization failed")||a.includes("Not admin")?a="Authorization failed. Please check blockchain configuration.":a.length>100&&(a=a.substring(0,100)+"..."),console.error("âŒ Blockchain completion failed:",a),x.toast.error(`Blockchain transaction failed: ${a}`),D(`Checkout confirmed, but blockchain transaction failed: ${a}`)}await V(),h&&h()}catch(a){D(a.message||"Failed to confirm checkout")}finally{F(a=>({...a,[b]:!1}))}}},X=async()=>{if(k?.id)try{let a={},b=parseInt(String(k.id));await Promise.all(y.map(async c=>{try{let d=await f.apiClient.reclamations.getByBookingIdAndComplainant(c.id,b);d&&(a[c.id]=d)}catch(a){}})),L(a)}catch(a){}},Y=a=>{j.push(`/reclamation/${a}?isHost=true`)},Z=async a=>{try{let b={};await Promise.all(a.map(async a=>{try{T(b=>({...b,[a.id]:!0}));let c=a.userId;try{let d=await f.apiClient.users.getById(c);if(d&&d.phoneNumber){let c=String(d.phoneNumber);b[a.id]=c}else b[a.id]=null}catch(c){b[a.id]=null}}catch(c){b[a.id]=null}finally{T(b=>({...b,[a.id]:!1}))}})),R(a=>({...a,...b}))}catch(a){}},$=async(a,b)=>{if(window.confirm("Are you sure you want to remove this reclamation?")){if(!k?.id)return void D("User not found");F(b=>({...b,[a]:!0})),D("");try{let c=parseInt(String(k.id));await f.apiClient.reclamations.delete(b,c),L(b=>{let c={...b};return delete c[a],c}),h&&h()}catch(a){D(a.message||"Failed to remove reclamation")}finally{F(b=>({...b,[a]:!1}))}}},_=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return a}},aa=(a,b)=>{if(!a||!b)return 0;try{let c=new Date(a),d=new Date(b),e=Math.abs(d.getTime()-c.getTime());return Math.ceil(e/864e5)}catch{return 0}},ab=a=>{if(!a?.propertyImages||0===a.propertyImages.length)return null;let b=a.propertyImages.find(a=>a.cover);return b?b.url:a.propertyImages[0].url},ac=a=>a?a.startsWith("http://")||a.startsWith("https://")?a:a.startsWith("/uploads")?`http://localhost:8081${a}`:a:"/houses_placeholder.png";return A?(0,b.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,b.jsx)(o.Loader2,{className:"h-12 w-12 animate-spin text-teal-600"}),(0,b.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading current bookings..."})]}):C?(0,b.jsxs)(l.Card,{className:"p-6 border-red-200 bg-red-50",children:[(0,b.jsx)("p",{className:"text-red-700",children:C}),(0,b.jsx)(m.Button,{onClick:V,variant:"outline",className:"mt-4",children:"Try Again"})]}):0===y.length?(0,b.jsxs)(l.Card,{className:"p-12 text-center",children:[(0,b.jsx)(g.Calendar,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No current bookings"}),(0,b.jsx)("p",{className:"text-gray-600",children:"You don't have any active bookings at the moment."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(a=>{let c=ab(a.property),d=aa(a.checkInDate,a.checkOutDate),e=M[a.userId];return(0,b.jsxs)(l.Card,{className:"overflow-hidden hover:shadow-2xl transition-all duration-300",children:[(0,b.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-teal-100 to-teal-200 overflow-hidden",children:[c?(0,b.jsx)(v.default,{src:ac(c),alt:a.property?.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(r.MapPin,{className:"w-16 h-16 text-teal-300"})}),(0,b.jsx)("div",{className:"absolute top-4 right-4 flex gap-2",children:(a=>{switch(a.toUpperCase()){case"CONFIRMED":return(0,b.jsx)(n.Badge,{className:"bg-green-100 text-green-800 border-green-200",children:"Confirmed"});case"TENANT_CHECKED_OUT":return(0,b.jsx)(n.Badge,{className:"bg-purple-100 text-purple-800 border-purple-200",children:"Checked Out"});case"COMPLETED":return(0,b.jsx)(n.Badge,{className:"bg-gray-100 text-gray-800 border-gray-200",children:"Completed"});default:return(0,b.jsx)(n.Badge,{className:"bg-gray-100 text-gray-800 border-gray-200",children:a})}})(a.status)}),(0,b.jsx)("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl px-4 py-2 shadow-lg",children:(0,b.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,b.jsx)("span",{className:"text-xl font-bold text-teal-600",children:a.totalPrice?.toFixed(4)||"N/A"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"MAD"})]})})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-1",children:a.property?.title||`Property ${a.propertyId}`}),a.property?.address&&(0,b.jsxs)("div",{className:"flex items-center text-gray-600 text-sm mb-4",children:[(0,b.jsx)(r.MapPin,{className:"w-4 h-4 mr-1.5 text-teal-600 flex-shrink-0"}),(0,b.jsxs)("span",{className:"line-clamp-1",children:[a.property.address.city,", ",a.property.address.country]})]}),e&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider block mb-1",children:"Tenant Risk"}),(a=>{if(!a)return null;let{risk_band:c,trust_score:d}=a,e="bg-gray-100 text-gray-800 border-gray-200",f=(0,b.jsx)(q.CheckCircle,{className:"w-3 h-3 mr-1"});switch(c){case"LOW":e="bg-green-100 text-green-800 border-green-200";break;case"MEDIUM":e="bg-yellow-100 text-yellow-800 border-yellow-200",f=(0,b.jsx)(i.AlertTriangle,{className:"w-3 h-3 mr-1"});break;case"HIGH":e="bg-orange-100 text-orange-800 border-orange-200",f=(0,b.jsx)(i.AlertTriangle,{className:"w-3 h-3 mr-1"});break;case"CRITICAL":e="bg-red-100 text-red-800 border-red-200",f=(0,b.jsx)(t.X,{className:"w-3 h-3 mr-1"})}return(0,b.jsxs)(n.Badge,{className:`${e} ml-2 flex items-center`,children:[f,"Trust: ",d,"/100 (",c,")"]})})(e)]}),(0,b.jsxs)("div",{className:"space-y-2 mb-4 pb-4 border-b border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(g.Calendar,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsx)("span",{children:"Check-in"})]}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:_(a.checkInDate)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(g.Calendar,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsx)("span",{children:"Check-out"})]}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:_(a.checkOutDate)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(p.Clock,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsx)("span",{children:"Duration"})]}),(0,b.jsxs)("span",{className:"font-semibold text-gray-900",children:[d," ",1===d?"night":"nights"]})]}),("CONFIRMED"===a.status||"TENANT_CHECKED_OUT"===a.status||"COMPLETED"===a.status)&&(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm pt-2 border-t border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(u.Phone,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsx)("span",{children:"Tenant Phone"})]}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:S[a.id]?(0,b.jsx)(o.Loader2,{className:"w-4 h-4 animate-spin inline"}):Q[a.id]?Q[a.id]:"N/A"})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:["TENANT_CHECKED_OUT"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Button,{onClick:()=>W(a.id),disabled:E[a.id],className:"w-full bg-green-600 hover:bg-green-700 text-white",children:E[a.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.CheckCircle,{className:"w-4 h-4 mr-2"}),"Confirm Checkout"]})}),K[a.id]?(0,b.jsx)(m.Button,{onClick:()=>$(a.id,K[a.id].id),disabled:E[a.id],variant:"outline",className:"w-full border-red-300 text-red-700 hover:bg-red-50",children:E[a.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.X,{className:"w-4 h-4 mr-2"}),"Remove Reclamation"]})}):(0,b.jsxs)(m.Button,{onClick:()=>Y(a.id),variant:"outline",className:"w-full border-orange-300 text-orange-700 hover:bg-orange-50",children:[(0,b.jsx)(i.AlertTriangle,{className:"w-4 h-4 mr-2"}),"Reclamation"]})]}),"CONFIRMED"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-full p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-center mb-2",children:(0,b.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"â³ Waiting for tenant to check out"})}),K[a.id]?(0,b.jsx)(m.Button,{onClick:()=>$(a.id,K[a.id].id),disabled:E[a.id],variant:"outline",className:"w-full border-red-300 text-red-700 hover:bg-red-50",children:E[a.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.X,{className:"w-4 h-4 mr-2"}),"Remove Reclamation"]})}):(0,b.jsxs)(m.Button,{onClick:()=>Y(a.id),variant:"outline",className:"w-full border-orange-300 text-orange-700 hover:bg-orange-50",children:[(0,b.jsx)(i.AlertTriangle,{className:"w-4 h-4 mr-2"}),"Reclamation"]})]}),(0,b.jsxs)(m.Button,{onClick:()=>{J(a),H(!0)},variant:"outline",className:"w-full",children:[(0,b.jsx)(s.Eye,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]})]},a.id)})}),(0,b.jsx)(w.Dialog,{open:G,onOpenChange:H,children:(0,b.jsxs)(w.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(w.DialogHeader,{children:(0,b.jsx)(w.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:"Booking Details"})}),I&&(0,b.jsxs)("div",{className:"space-y-6 mt-4",children:[I.property&&ab(I.property)&&(0,b.jsx)("div",{className:"relative h-48 bg-gradient-to-br from-teal-100 to-teal-200 rounded-lg overflow-hidden",children:(0,b.jsx)(v.default,{src:ac(ab(I.property)),alt:I.property.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 80vw"})}),I.property&&(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:I.property.title}),I.property.address&&(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(r.MapPin,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsxs)("span",{children:[I.property.address.city,", ",I.property.address.country]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-in"}),(0,b.jsx)("p",{className:"text-base font-semibold text-gray-900",children:_(I.checkInDate)})]}),(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-out"}),(0,b.jsx)("p",{className:"text-base font-semibold text-gray-900",children:_(I.checkOutDate)})]})]}),(0,b.jsx)("div",{className:"p-4 bg-teal-50 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Duration"}),(0,b.jsxs)("span",{className:"text-lg font-bold text-teal-700",children:[aa(I.checkInDate,I.checkOutDate)," ",1===aa(I.checkInDate,I.checkOutDate)?"night":"nights"]})]})}),(0,b.jsx)("div",{className:"p-6 bg-gradient-to-br from-teal-50 to-teal-100 rounded-lg border-2 border-teal-200",children:(0,b.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Total Price"}),(0,b.jsxs)("span",{className:"text-xl font-bold text-teal-700",children:[I.totalPrice?.toFixed(0)||"N/A"," MAD"]})]})})]}),"TENANT_CHECKED_OUT"===I.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Button,{onClick:async()=>{H(!1),await W(I.id)},disabled:E[I.id],className:"w-full bg-green-600 hover:bg-green-700 text-white",children:E[I.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.CheckCircle,{className:"w-4 h-4 mr-2"}),"Confirm Checkout"]})}),K[I.id]?(0,b.jsx)(m.Button,{onClick:async()=>{H(!1),await $(I.id,K[I.id].id)},disabled:E[I.id],variant:"outline",className:"w-full border-red-300 text-red-700 hover:bg-red-50",children:E[I.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.X,{className:"w-4 h-4 mr-2"}),"Remove Reclamation"]})}):(0,b.jsxs)(m.Button,{onClick:()=>{H(!1),Y(I.id)},variant:"outline",className:"w-full border-orange-300 text-orange-700 hover:bg-orange-50",children:[(0,b.jsx)(i.AlertTriangle,{className:"w-4 h-4 mr-2"}),"Reclamation"]})]})]})]})})]})}function z({ownerId:a,onUpdate:h}){let j=(0,e.useRouter)(),{user:k}=(0,d.useAuth)(),[u,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(!0),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)({}),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)({});(0,c.useEffect)(()=>{L()},[a]),(0,c.useEffect)(()=>{u.length>0&&N()},[u]);let L=async()=>{try{A(!0),C("");let b=(await f.apiClient.bookings.getCurrentBookingsByOwner(parseInt(String(a)))).filter(a=>"TENANT_CHECKED_OUT"===a.status),c=await Promise.all(b.map(async a=>{try{let b=await f.apiClient.properties.getById(String(a.propertyId));return{...a,property:b}}catch{return{...a,property:void 0}}}));y(c)}catch(a){C(a.message||"Failed to load checkout requests")}finally{A(!1)}},M=async b=>{if(window.confirm("Are you sure the tenant has checked out?")){E(a=>({...a,[b]:!0})),C("");try{let c=u.find(a=>a.id===b);if(!c)return void C("Booking not found");if("TENANT_CHECKED_OUT"!==c.status){let a=`Cannot confirm checkout. Booking status must be TENANT_CHECKED_OUT, but it is ${c.status}`;C(a),x.toast.error(a);return}let d=parseInt(String(a));if(isNaN(d))throw Error("Invalid owner ID. Please refresh the page and try again.");await f.apiClient.bookings.ownerConfirmCheckout(b,d);try{await f.apiClient.payments.completeBooking(b),x.toast.success("Booking completed successfully on blockchain")}catch(a){x.toast.warning("Booking marked as completed, but blockchain transaction failed. Please contact support.")}x.toast.success("Checkout confirmed successfully"),await L(),h&&h()}catch(b){let a=b.message||"Failed to confirm checkout";C(a),x.toast.error(a)}finally{E(a=>({...a,[b]:!1}))}}},N=async()=>{if(k?.id)try{let a={},b=parseInt(String(k.id));await Promise.all(u.map(async c=>{try{let d=await f.apiClient.reclamations.getByBookingIdAndComplainant(c.id,b);d&&(a[c.id]=d)}catch(a){}})),K(a)}catch(a){}},O=a=>{j.push(`/reclamation/${a}?isHost=true`)},P=async(a,b)=>{if(window.confirm("Are you sure you want to remove this reclamation?")){if(!k?.id)return void C("User not found");E(b=>({...b,[a]:!0})),C("");try{let c=parseInt(String(k.id));await f.apiClient.reclamations.delete(b,c),K(b=>{let c={...b};return delete c[a],c}),x.toast.success("Reclamation removed successfully"),h&&h()}catch(a){C(a.message||"Failed to remove reclamation"),x.toast.error(a.message||"Failed to remove reclamation")}finally{E(b=>({...b,[a]:!1}))}}},Q=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return a}},R=(a,b)=>{if(!a||!b)return 0;try{let c=new Date(a),d=new Date(b),e=Math.abs(d.getTime()-c.getTime());return Math.ceil(e/864e5)}catch{return 0}},S=a=>{if(!a?.propertyImages||0===a.propertyImages.length)return null;let b=a.propertyImages.find(a=>a.cover);return b?b.url:a.propertyImages[0].url},T=a=>a?a.startsWith("http://")||a.startsWith("https://")?a:a.startsWith("/uploads")?`http://localhost:8081${a}`:a:"/houses_placeholder.png";return z?(0,b.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,b.jsx)(o.Loader2,{className:"h-12 w-12 animate-spin text-teal-600"}),(0,b.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading checkout requests..."})]}):B&&!u.length?(0,b.jsxs)(l.Card,{className:"p-6 border-red-200 bg-red-50",children:[(0,b.jsx)("p",{className:"text-red-700",children:B}),(0,b.jsx)(m.Button,{onClick:L,variant:"outline",className:"mt-4",children:"Try Again"})]}):0===u.length?(0,b.jsxs)(l.Card,{className:"p-12 text-center",children:[(0,b.jsx)(q.CheckCircle,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No checkout requests"}),(0,b.jsx)("p",{className:"text-gray-600",children:"You don't have any bookings waiting for checkout confirmation."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(a=>{let c=S(a.property),d=R(a.checkInDate,a.checkOutDate);return(0,b.jsxs)(l.Card,{className:"overflow-hidden hover:shadow-2xl transition-all duration-300 border-2 border-purple-200",children:[(0,b.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-purple-100 to-purple-200 overflow-hidden",children:[c?(0,b.jsx)(v.default,{src:T(c),alt:a.property?.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(r.MapPin,{className:"w-16 h-16 text-purple-300"})}),(0,b.jsx)("div",{className:"absolute top-4 right-4",children:(0,b.jsx)(n.Badge,{className:"bg-purple-100 text-purple-800 border-purple-200",children:"Awaiting Confirmation"})}),(0,b.jsx)("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl px-4 py-2 shadow-lg",children:(0,b.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,b.jsx)("span",{className:"text-xl font-bold text-purple-600",children:a.totalPrice?.toFixed(4)||"N/A"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"MAD"})]})})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-1",children:a.property?.title||`Property ${a.propertyId}`}),a.property?.address&&(0,b.jsxs)("div",{className:"flex items-center text-gray-600 text-sm mb-4",children:[(0,b.jsx)(r.MapPin,{className:"w-4 h-4 mr-1.5 text-purple-600 flex-shrink-0"}),(0,b.jsxs)("span",{className:"line-clamp-1",children:[a.property.address.city,", ",a.property.address.country]})]}),(0,b.jsxs)("div",{className:"space-y-2 mb-4 pb-4 border-b border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(g.Calendar,{className:"w-4 h-4 mr-2 text-purple-600"}),(0,b.jsx)("span",{children:"Check-in"})]}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:Q(a.checkInDate)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(g.Calendar,{className:"w-4 h-4 mr-2 text-purple-600"}),(0,b.jsx)("span",{children:"Check-out"})]}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:Q(a.checkOutDate)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(p.Clock,{className:"w-4 h-4 mr-2 text-purple-600"}),(0,b.jsx)("span",{children:"Duration"})]}),(0,b.jsxs)("span",{className:"font-semibold text-gray-900",children:[d," ",1===d?"night":"nights"]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)(m.Button,{onClick:()=>M(a.id),disabled:D[a.id],className:"w-full bg-green-600 hover:bg-green-700 text-white",children:D[a.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.CheckCircle,{className:"w-4 h-4 mr-2"}),"Confirm Checkout"]})}),J[a.id]?(0,b.jsx)(m.Button,{onClick:()=>P(a.id,J[a.id].id),disabled:D[a.id],variant:"outline",className:"w-full border-red-300 text-red-700 hover:bg-red-50",children:D[a.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.X,{className:"w-4 h-4 mr-2"}),"Remove Reclamation"]})}):(0,b.jsxs)(m.Button,{onClick:()=>O(a.id),variant:"outline",className:"w-full border-orange-300 text-orange-700 hover:bg-orange-50",children:[(0,b.jsx)(i.AlertTriangle,{className:"w-4 h-4 mr-2"}),"Reclamation"]}),(0,b.jsxs)(m.Button,{onClick:()=>{I(a),G(!0)},variant:"outline",className:"w-full",children:[(0,b.jsx)(s.Eye,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]})]},a.id)})}),(0,b.jsx)(w.Dialog,{open:F,onOpenChange:G,children:(0,b.jsxs)(w.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(w.DialogHeader,{children:(0,b.jsx)(w.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:"Checkout Request Details"})}),H&&(0,b.jsxs)("div",{className:"space-y-6 mt-4",children:[H.property&&S(H.property)&&(0,b.jsx)("div",{className:"relative h-48 bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg overflow-hidden",children:(0,b.jsx)(v.default,{src:T(S(H.property)),alt:H.property.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 80vw"})}),H.property&&(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:H.property.title}),H.property.address&&(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(r.MapPin,{className:"w-4 h-4 mr-2 text-purple-600"}),(0,b.jsxs)("span",{children:[H.property.address.city,", ",H.property.address.country]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-in"}),(0,b.jsx)("p",{className:"text-base font-semibold text-gray-900",children:Q(H.checkInDate)})]}),(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-out"}),(0,b.jsx)("p",{className:"text-base font-semibold text-gray-900",children:Q(H.checkOutDate)})]})]}),(0,b.jsx)("div",{className:"p-4 bg-purple-50 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Duration"}),(0,b.jsxs)("span",{className:"text-lg font-bold text-purple-700",children:[R(H.checkInDate,H.checkOutDate)," ",1===R(H.checkInDate,H.checkOutDate)?"night":"nights"]})]})}),(0,b.jsx)("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg border-2 border-purple-200",children:(0,b.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Total Price"}),(0,b.jsxs)("span",{className:"text-xl font-bold text-purple-700",children:[H.totalPrice?.toFixed(0)||"N/A"," MAD"]})]})})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(m.Button,{onClick:async()=>{G(!1),await M(H.id)},disabled:D[H.id],className:"w-full bg-green-600 hover:bg-green-700 text-white",children:D[H.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.CheckCircle,{className:"w-4 h-4 mr-2"}),"Confirm Checkout"]})}),J[H.id]?(0,b.jsx)(m.Button,{onClick:async()=>{G(!1),await P(H.id,J[H.id].id)},disabled:D[H.id],variant:"outline",className:"w-full border-red-300 text-red-700 hover:bg-red-50",children:D[H.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.X,{className:"w-4 h-4 mr-2"}),"Remove Reclamation"]})}):(0,b.jsxs)(m.Button,{onClick:()=>{G(!1),O(H.id)},variant:"outline",className:"w-full border-orange-300 text-orange-700 hover:bg-orange-50",children:[(0,b.jsx)(i.AlertTriangle,{className:"w-4 h-4 mr-2"}),"Reclamation"]})]})]})]})})]})}var A=a.i(62722),B=a.i(70106);let C=(0,B.default)("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);function D({ownerId:a,onUpdate:d}){let[e,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!0),[k,t]=(0,c.useState)(""),[u,x]=(0,c.useState)({}),[y,z]=(0,c.useState)(!1),[B,D]=(0,c.useState)(null);(0,c.useEffect)(()=>{E()},[a]);let E=async()=>{try{j(!0),t("");let b=await f.apiClient.bookings.getPendingNegotiations(parseInt(String(a))),c=await Promise.all(b.map(async a=>{try{let b=await f.apiClient.properties.getById(String(a.propertyId));return{...a,property:b}}catch{return{...a,property:void 0}}}));h(c)}catch(a){t(a.message||"Failed to load pending negotiations")}finally{j(!1)}},F=async b=>{if(window.confirm("Are you sure you want to accept this negotiation?")){x(a=>({...a,[b]:!0})),t("");try{await f.apiClient.bookings.acceptNegotiation(b,parseInt(String(a))),await E(),d&&d()}catch(a){t(a.message||"Failed to accept negotiation")}finally{x(a=>({...a,[b]:!1}))}}},G=async b=>{if(window.confirm("Are you sure you want to reject this negotiation? The tenant can change the price.")){x(a=>({...a,[b]:!0})),t("");try{await f.apiClient.bookings.rejectNegotiation(b,parseInt(String(a))),await E(),d&&d()}catch(a){t(a.message||"Failed to reject negotiation")}finally{x(a=>({...a,[b]:!1}))}}},H=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return a}},I=(a,b)=>{if(!a||!b)return 0;try{let c=new Date(a),d=new Date(b),e=Math.abs(d.getTime()-c.getTime());return Math.ceil(e/864e5)}catch{return 0}},J=a=>{if(!a?.propertyImages||0===a.propertyImages.length)return null;let b=a.propertyImages.find(a=>a.cover);return b?b.url:a.propertyImages[0].url},K=a=>a?a.startsWith("http://")||a.startsWith("https://")?a:a.startsWith("/uploads")?`http://localhost:8081${a}`:a:"/houses_placeholder.png";return i?(0,b.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,b.jsx)(o.Loader2,{className:"h-12 w-12 animate-spin text-teal-600"}),(0,b.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading pending negotiations..."})]}):k?(0,b.jsxs)(l.Card,{className:"p-6 border-red-200 bg-red-50",children:[(0,b.jsx)("p",{className:"text-red-700",children:k}),(0,b.jsx)(m.Button,{onClick:E,variant:"outline",className:"mt-4",children:"Try Again"})]}):0===e.length?(0,b.jsxs)(l.Card,{className:"p-12 text-center",children:[(0,b.jsx)(C,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No pending negotiations"}),(0,b.jsx)("p",{className:"text-gray-600",children:"You don't have any pending negotiation requests."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>{let c=J(a.property),d=I(a.checkInDate,a.checkOutDate);return(0,b.jsxs)(l.Card,{className:"overflow-hidden hover:shadow-2xl transition-all duration-300",children:[(0,b.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-yellow-100 to-yellow-200 overflow-hidden",children:[c?(0,b.jsx)(v.default,{src:K(c),alt:a.property?.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(r.MapPin,{className:"w-16 h-16 text-yellow-300"})}),(0,b.jsx)("div",{className:"absolute top-4 right-4",children:(0,b.jsx)(n.Badge,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"Negotiation"})}),(0,b.jsxs)("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl px-4 py-2 shadow-lg",children:[(0,b.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,b.jsx)("span",{className:"text-xl font-bold text-yellow-600",children:a.totalPrice?.toFixed(4)||"N/A"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"ETH"})]}),a.requestedNegotiationPercent&&(0,b.jsxs)("p",{className:"text-xs text-yellow-600 font-medium mt-1",children:[a.requestedNegotiationPercent,"% discount"]})]})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-1",children:a.property?.title||`Property ${a.propertyId}`}),a.property?.address&&(0,b.jsxs)("div",{className:"flex items-center text-gray-600 text-sm mb-4",children:[(0,b.jsx)(r.MapPin,{className:"w-4 h-4 mr-1.5 text-teal-600 flex-shrink-0"}),(0,b.jsxs)("span",{className:"line-clamp-1",children:[a.property.address.city,", ",a.property.address.country]})]}),(0,b.jsxs)("div",{className:"space-y-2 mb-4 pb-4 border-b border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(g.Calendar,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsx)("span",{children:"Check-in"})]}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:H(a.checkInDate)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(g.Calendar,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsx)("span",{children:"Check-out"})]}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:H(a.checkOutDate)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(p.Clock,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsx)("span",{children:"Duration"})]}),(0,b.jsxs)("span",{className:"font-semibold text-gray-900",children:[d," ",1===d?"night":"nights"]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsx)(m.Button,{onClick:()=>F(a.id),disabled:u[a.id],className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:u[a.id]?(0,b.jsx)(o.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.CheckCircle,{className:"w-4 h-4 mr-2"}),"Accept"]})}),(0,b.jsx)(m.Button,{onClick:()=>G(a.id),disabled:u[a.id],variant:"destructive",className:"flex-1",children:u[a.id]?(0,b.jsx)(o.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A.XCircle,{className:"w-4 h-4 mr-2"}),"Reject"]})})]}),(0,b.jsxs)(m.Button,{onClick:()=>{D(a),z(!0)},variant:"outline",className:"w-full",children:[(0,b.jsx)(s.Eye,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]})]},a.id)})}),(0,b.jsx)(w.Dialog,{open:y,onOpenChange:z,children:(0,b.jsxs)(w.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(w.DialogHeader,{children:(0,b.jsx)(w.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:"Negotiation Details"})}),B&&(0,b.jsxs)("div",{className:"space-y-6 mt-4",children:[B.property&&J(B.property)&&(0,b.jsx)("div",{className:"relative h-48 bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg overflow-hidden",children:(0,b.jsx)(v.default,{src:K(J(B.property)),alt:B.property.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 80vw"})}),B.property&&(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:B.property.title}),B.property.address&&(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(r.MapPin,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsxs)("span",{children:[B.property.address.city,", ",B.property.address.country]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-in"}),(0,b.jsx)("p",{className:"text-base font-semibold text-gray-900",children:H(B.checkInDate)})]}),(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-out"}),(0,b.jsx)("p",{className:"text-base font-semibold text-gray-900",children:H(B.checkOutDate)})]})]}),(0,b.jsx)("div",{className:"p-4 bg-teal-50 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Duration"}),(0,b.jsxs)("span",{className:"text-lg font-bold text-teal-700",children:[I(B.checkInDate,B.checkOutDate)," ",1===I(B.checkInDate,B.checkOutDate)?"night":"nights"]})]})}),(0,b.jsxs)("div",{className:"p-6 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg border-2 border-yellow-200",children:[(0,b.jsxs)("div",{className:"flex items-baseline justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Negotiated Price"}),(0,b.jsxs)("span",{className:"text-xl font-bold text-yellow-700",children:[B.totalPrice?.toFixed(4)||"N/A"," ETH"]})]}),B.requestedNegotiationPercent&&(0,b.jsxs)("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-yellow-200",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Negotiation"}),(0,b.jsxs)("span",{className:"text-sm font-semibold text-yellow-600",children:[B.requestedNegotiationPercent,"%"]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)(m.Button,{onClick:async()=>{z(!1),await F(B.id)},disabled:u[B.id],className:"bg-green-600 hover:bg-green-700 text-white",children:u[B.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.CheckCircle,{className:"w-4 h-4 mr-2"}),"Accept"]})}),(0,b.jsx)(m.Button,{onClick:async()=>{z(!1),await G(B.id)},disabled:u[B.id],variant:"destructive",children:u[B.id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A.XCircle,{className:"w-4 h-4 mr-2"}),"Reject"]})})]})]})]})})]})}var E=a.i(24569),F=a.i(81560),G=a.i(50778),H=a.i(16286),I=a.i(60246),J=a.i(85264),K=a.i(21374);let L=(0,B.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var M=a.i(41379),N=a.i(45616);function O({propertyId:a,onClose:d,onSuccess:e}){let[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)("");return(0,c.useEffect)(()=>{let b=async()=>{try{j(!0),l("");let b=await f.apiClient.properties.getById(a);h(b)}catch(a){l(a.message||"Failed to load property")}finally{j(!1)}};a&&b()},[a]),(0,b.jsx)(w.Dialog,{open:!0,onOpenChange:d,children:(0,b.jsxs)(w.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(w.DialogHeader,{children:(0,b.jsx)(w.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:"Edit Property"})}),i?(0,b.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,b.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin text-teal-600"}),(0,b.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading property data..."})]}):k?(0,b.jsxs)("div",{className:"p-6 border border-red-200 bg-red-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-red-700 mb-4",children:k}),(0,b.jsx)(m.Button,{onClick:d,variant:"outline",children:"Close"})]}):g?(0,b.jsx)(N.AddPropertyForm,{propertyId:a,propertyData:g,isEditMode:!0,onSuccess:()=>{e()}},a):null]})})}function P({userId:a,onUpdate:d,filter:g="all"}){let h,i,j;(0,e.useRouter)();let[k,p]=(0,c.useState)([]),[q,u]=(0,c.useState)([]),[x,y]=(0,c.useState)(!0),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)({}),[D,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)(!1),[U,V]=(0,c.useState)(null),[W,X]=(0,c.useState)(!1),[Y,Z]=(0,c.useState)(!1),[$,_]=(0,c.useState)(!1),[aa,ab]=(0,c.useState)(""),[ac,ad]=(0,c.useState)(""),[ae,af]=(0,c.useState)(!1),[ag,ah]=(0,c.useState)(""),[ai,aj]=(0,c.useState)(null);(0,c.useEffect)(()=>{ak()},[a]),(0,c.useEffect)(()=>{al()},[k,g]),(0,c.useEffect)(()=>{S||(ab(""),ad(""),aj(null),ah(""),af(!1))},[S]);let ak=async()=>{try{y(!0),A("");let a=await f.apiClient.properties.getMyProperties();if(!Array.isArray(a)){A("Invalid response format from server"),p([]);return}p(a)}catch(a){A(a.message||"Failed to load properties"),p([])}finally{y(!1)}},al=()=>{let a=[...k];"draft"===g?a=a.filter(a=>"DRAFT"===a.status):"pending-approval"===g?a=a.filter(a=>"PENDING_APPROVAL"===a.status):"approved"===g?a=a.filter(a=>"APPROVED"===a.status):"disapproved"===g?a=a.filter(a=>"DISAPPROVED"===a.status):"suspended"===g?a=a.filter(a=>"SUSPENDED"===a.status):"hidden"===g&&(a=a.filter(a=>"HIDDEN"===a.status)),u(a)},am=async a=>{alert("Delete functionality is currently disabled.")},an=async a=>{C(b=>({...b,[`submit-${a}`]:!0})),A("");try{await f.apiClient.properties.submitForApproval(a),await ak(),d&&d()}catch(a){A(a.message||"Failed to submit property for approval")}finally{C(b=>({...b,[`submit-${a}`]:!1}))}},ao=async a=>{if(window.confirm("Are you sure you want to cancel the approval request? The property will be moved back to draft.")){C(b=>({...b,[`cancel-${a}`]:!0})),A("");try{await f.apiClient.properties.cancelApprovalRequest(a),await ak(),d&&d()}catch(a){A(a.message||"Failed to cancel approval request")}finally{C(b=>({...b,[`cancel-${a}`]:!1}))}}},ap=async(a,b)=>{C(b=>({...b,[`hide-${a}`]:!0})),A("");try{await f.apiClient.properties.hide(a,b),await ak(),d&&d()}catch(a){A(a.message||`Failed to ${b?"hide":"show"} property`)}finally{C(b=>({...b,[`hide-${a}`]:!1}))}},aq=a=>a?a.startsWith("http://")||a.startsWith("https://")?a:a.startsWith("/uploads")?`http://localhost:8081${a}`:a:"/houses_placeholder.png",ar=a=>{let c={DRAFT:{label:"Draft",className:"bg-gray-100 text-gray-800 border-gray-200"},PENDING_APPROVAL:{label:"Pending Approval",className:"bg-yellow-100 text-yellow-800 border-yellow-200"},APPROVED:{label:"Approved",className:"bg-green-100 text-green-800 border-green-200"},SUSPENDED:{label:"Suspended",className:"bg-red-100 text-red-800 border-red-200"},HIDDEN:{label:"Hidden",className:"bg-gray-100 text-gray-800 border-gray-200"},VISIBLE_ONLY_FOR_TENANTS:{label:"Visible for Tenants",className:"bg-blue-100 text-blue-800 border-blue-200"},PENDING_DELETE:{label:"Pending Delete",className:"bg-orange-100 text-orange-800 border-orange-200"},DISAPPROVED:{label:"Disapproved",className:"bg-red-100 text-red-800 border-red-200"},WAITING_FOR_UPDATE:{label:"Waiting for Update",className:"bg-yellow-100 text-yellow-800 border-yellow-200"}}[a.toUpperCase()]||{label:a,className:"bg-gray-100 text-gray-800 border-gray-200"};return(0,b.jsx)(n.Badge,{className:c.className,children:c.label})},as=async()=>{if(U){if(ah(""),aj(null),!aa||!ac)return void ah("Please select both check-in and check-out dates.");if(aa>=ac)return void ah("Check-out date must be after check-in date.");try{af(!0);let a=await f.apiClient.properties.predictPrice(U.id,aa,ac);aj(a)}catch(a){ah(a?.message||"Failed to get AI price suggestion")}finally{af(!1)}}};return x?(0,b.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,b.jsx)(o.Loader2,{className:"h-12 w-12 animate-spin text-teal-600"}),(0,b.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading properties..."})]}):z?(0,b.jsxs)(l.Card,{className:"p-6 border-red-200 bg-red-50",children:[(0,b.jsx)("p",{className:"text-red-700",children:z}),(0,b.jsx)(m.Button,{onClick:ak,variant:"outline",className:"mt-4",children:"Try Again"})]}):(0,b.jsxs)("div",{children:[0===q.length?(0,b.jsxs)(l.Card,{className:"p-12 text-center",children:[(0,b.jsx)(r.MapPin,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:0===k.length?"No properties yet":"No properties found"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:0===k.length?"Start by adding your first property!":`No properties with status: ${g}`})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map(a=>{let c,d,e=(a=>{if(!a.propertyImages||0===a.propertyImages.length)return null;let b=a.propertyImages.find(a=>a.cover);return b?b.url:a.propertyImages[0].url})(a);return(0,b.jsxs)(l.Card,{className:"overflow-hidden hover:shadow-2xl transition-all duration-300",children:[(0,b.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-teal-100 to-teal-200 overflow-hidden",children:[e?(0,b.jsx)(v.default,{src:aq(e),alt:a.title,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(r.MapPin,{className:"w-16 h-16 text-teal-300"})}),(0,b.jsx)("div",{className:"absolute top-4 right-4",children:ar(a.status)}),(0,b.jsx)("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl px-4 py-2 shadow-lg",children:(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,b.jsx)("span",{className:"text-xl font-bold text-teal-600",children:a.dailyPrice?.toFixed(4)||a.price?.toFixed(4)||"N/A"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"MAD/day"})]}),a.depositAmount&&a.depositAmount>0&&(0,b.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,b.jsx)("span",{className:"text-sm font-semibold text-orange-600",children:a.depositAmount.toFixed(4)}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"MAD deposit"})]})]})})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-1",children:a.title}),a.address&&(0,b.jsxs)("div",{className:"flex items-center text-gray-600 text-sm mb-4",children:[(0,b.jsx)(r.MapPin,{className:"w-4 h-4 mr-1.5 text-teal-600 flex-shrink-0"}),(0,b.jsxs)("span",{className:"line-clamp-1",children:[a.address.city,", ",a.address.country]})]}),(0,b.jsxs)("div",{className:"space-y-2 mb-4 pb-4 border-b border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Price"}),(0,b.jsxs)("span",{className:"font-semibold text-teal-600",children:[a.dailyPrice?.toFixed(0)||a.price?.toFixed(0)||"N/A"," MAD/day"]})]}),a.depositAmount&&a.depositAmount>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Deposit"}),(0,b.jsxs)("span",{className:"font-semibold text-orange-600",children:[a.depositAmount.toFixed(0)," MAD"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Capacity"}),(0,b.jsxs)("span",{className:"font-semibold text-gray-900",children:[a.capacity," guests"]})]}),a.numberOfBedrooms&&(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Bedrooms"}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:a.numberOfBedrooms})]}),a.numberOfBathrooms&&(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Bathrooms"}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:a.numberOfBathrooms})]})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:(c=a.status.toUpperCase(),(d=[]).push((0,b.jsxs)(m.Button,{onClick:()=>{R(a.id),P(!0)},variant:"outline",size:"sm",className:"text-xs",children:[(0,b.jsx)(E.Edit,{className:"w-3 h-3 mr-1"}),"Edit"]},"edit")),d.push((0,b.jsxs)(m.Button,{onClick:()=>{V(a),T(!0)},variant:"outline",size:"sm",className:"text-xs",children:[(0,b.jsx)(s.Eye,{className:"w-3 h-3 mr-1"}),"View"]},"view")),"DRAFT"===c?d.push((0,b.jsxs)(m.Button,{onClick:()=>an(a.id),disabled:B[`submit-${a.id}`],className:"bg-teal-600 hover:bg-teal-700 text-white text-xs",size:"sm",children:[B[`submit-${a.id}`]?(0,b.jsx)(o.Loader2,{className:"w-3 h-3 mr-1 animate-spin"}):(0,b.jsx)(L,{className:"w-3 h-3 mr-1"}),"Submit for Approval"]},"submit")):"PENDING_APPROVAL"===c?d.push((0,b.jsxs)(m.Button,{onClick:()=>ao(a.id),disabled:B[`cancel-${a.id}`],variant:"outline",size:"sm",className:"text-xs",children:[B[`cancel-${a.id}`]?(0,b.jsx)(o.Loader2,{className:"w-3 h-3 mr-1 animate-spin"}):(0,b.jsx)(t.X,{className:"w-3 h-3 mr-1"}),"Cancel Request"]},"cancel")):"APPROVED"===c?d.push((0,b.jsxs)(m.Button,{onClick:()=>ap(a.id,!0),disabled:B[`hide-${a.id}`],variant:"outline",size:"sm",className:"text-xs",children:[B[`hide-${a.id}`]?(0,b.jsx)(o.Loader2,{className:"w-3 h-3 mr-1 animate-spin"}):(0,b.jsx)(M.EyeOff,{className:"w-3 h-3 mr-1"}),"Hide"]},"hide")):"DISAPPROVED"===c?d.push((0,b.jsxs)(m.Button,{onClick:()=>an(a.id),disabled:B[`submit-${a.id}`],className:"bg-teal-600 hover:bg-teal-700 text-white text-xs",size:"sm",children:[B[`submit-${a.id}`]?(0,b.jsx)(o.Loader2,{className:"w-3 h-3 mr-1 animate-spin"}):(0,b.jsx)(L,{className:"w-3 h-3 mr-1"}),"Resubmit for Approval"]},"resubmit")):"HIDDEN"===c&&d.push((0,b.jsxs)(m.Button,{onClick:()=>ap(a.id,!1),disabled:B[`hide-${a.id}`],className:"bg-teal-600 hover:bg-teal-700 text-white text-xs",size:"sm",children:[B[`hide-${a.id}`]?(0,b.jsx)(o.Loader2,{className:"w-3 h-3 mr-1 animate-spin"}):(0,b.jsx)(s.Eye,{className:"w-3 h-3 mr-1"}),"Show"]},"show")),d.push((0,b.jsxs)(m.Button,{onClick:()=>am(a.id),disabled:B[a.id],variant:"destructive",size:"sm",className:"text-xs",children:[B[a.id]?(0,b.jsx)(o.Loader2,{className:"w-3 h-3 mr-1 animate-spin"}):(0,b.jsx)(F.Trash2,{className:"w-3 h-3 mr-1"}),"Delete"]},"delete")),d)})]})]},a.id)})}),(0,b.jsx)(w.Dialog,{open:W,onOpenChange:X,children:(0,b.jsxs)(w.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(w.DialogHeader,{children:(0,b.jsx)(w.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:"Add New Property"})}),(0,b.jsx)(N.AddPropertyForm,{isEditMode:!1,onSuccess:()=>{X(!1),ak(),d&&d()}})]})}),D&&Q&&(0,b.jsx)(O,{propertyId:Q,onClose:()=>{P(!1),R(null)},onSuccess:()=>{P(!1),R(null),ak().then(()=>{}),d&&d()}}),(0,b.jsx)(w.Dialog,{open:S,onOpenChange:T,children:(0,b.jsxs)(w.DialogContent,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(w.DialogHeader,{children:(0,b.jsx)(w.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:"Property Details"})}),U&&(0,b.jsxs)("div",{className:"space-y-6 mt-4",children:[(i=(h=(a=>{if(!a.propertyImages||0===a.propertyImages.length)return[];let b=a.propertyImages.find(a=>a.cover),c=a.propertyImages.filter(a=>!a.cover);return b?[b,...c]:a.propertyImages})(U))[0],j=h.slice(1,5),h.length>0?(0,b.jsxs)("div",{className:"grid grid-cols-4 grid-rows-2 gap-3 h-[400px]",children:[(0,b.jsx)("div",{className:"col-span-2 row-span-2 relative rounded-l-2xl overflow-hidden bg-gray-200",children:(0,b.jsx)(v.default,{src:aq(i?.url),alt:U.title,fill:!0,className:"object-cover hover:scale-105 transition-transform duration-300",sizes:"(max-width: 768px) 100vw, 50vw"})}),j.length>0?j.map((a,c)=>(0,b.jsx)("div",{className:`relative overflow-hidden bg-gray-200 ${1===c||3===c?"rounded-r-2xl":""}`,children:(0,b.jsx)(v.default,{src:aq(a.url),alt:`${U.title} ${c+2}`,fill:!0,className:"object-cover hover:scale-105 transition-transform duration-300",sizes:"(max-width: 768px) 50vw, 25vw"})},a.id||c)):Array.from({length:Math.min(4,4-j.length)}).map((a,c)=>(0,b.jsx)("div",{className:"relative overflow-hidden bg-gray-200 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-gray-400 text-sm",children:"No image"})},`placeholder-${c}`))]}):(0,b.jsx)("div",{className:"relative w-full h-[400px] rounded-2xl overflow-hidden bg-gray-200 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(r.MapPin,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-500",children:"No images available"})]})})),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 pb-6 border-b flex-wrap",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(I.Users,{className:"w-4 h-4 text-teal-600"}),U.capacity," guest",U.capacity>1?"s":""]}),U.numberOfBedrooms&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"Â·"}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(G.Bed,{className:"w-4 h-4 text-teal-600"}),U.numberOfBedrooms," bedroom",U.numberOfBedrooms>1?"s":""]})]}),U.numberOfBeds&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"Â·"}),(0,b.jsxs)("span",{children:[U.numberOfBeds," bed",U.numberOfBeds>1?"s":""]})]}),U.numberOfBathrooms&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"Â·"}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(H.Bath,{className:"w-4 h-4 text-teal-600"}),U.numberOfBathrooms," bath",U.numberOfBathrooms>1?"s":""]})]}),(0,b.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,b.jsx)(K.Star,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),(0,b.jsx)("span",{className:"text-lg font-semibold",children:"4.8"}),(0,b.jsx)("span",{className:"text-gray-500",children:"Â· 4 reviews"})]})]}),(0,b.jsxs)("div",{className:"pb-6 border-b",children:[(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsx)("span",{className:"text-3xl font-bold text-gray-900",children:U.dailyPrice?`${U.dailyPrice}`:U.price?`${U.price}`:"N/A"}),(0,b.jsx)("span",{className:"text-lg font-semibold text-teal-600",children:"MAD"}),(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"/day"})]}),(0,b.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:"AI Price Suggestion (per night)"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-600",children:"Check-in date"}),(0,b.jsx)("input",{type:"date",value:aa,onChange:a=>ab(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-600"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-600",children:"Check-out date"}),(0,b.jsx)("input",{type:"date",value:ac,onChange:a=>ad(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-600"})]}),(0,b.jsx)("button",{type:"button",onClick:as,disabled:ae,className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-teal-600 text-white text-sm font-semibold hover:bg-teal-700 disabled:opacity-60 disabled:cursor-not-allowed",children:ae?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Loader2,{className:"w-4 h-4 animate-spin"}),"Getting suggestion..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(K.Star,{className:"w-4 h-4"}),"Get AI suggestion"]})})]}),ag&&(0,b.jsx)("p",{className:"text-xs text-red-600",children:ag}),ai&&(0,b.jsxs)("div",{className:"mt-2 rounded-lg border border-teal-200 bg-teal-50 p-3 text-xs text-gray-800 space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,b.jsxs)("span",{className:"font-semibold text-teal-700",children:[ai.predictedPriceMad.toFixed(0)," MAD"]}),(0,b.jsxs)("span",{className:"text-gray-500",children:["â‰ˆ ",ai.predictedPriceUsd.toFixed(2)," USD / night"]})]}),(0,b.jsxs)("p",{className:"text-gray-600",children:["Confidence interval: ",ai.confidenceIntervalLower.toFixed(0)," â€“"," ",ai.confidenceIntervalUpper.toFixed(0)," MAD"]}),"number"==typeof ai.currentPriceMad&&(0,b.jsxs)("p",{className:"text-gray-600",children:["Current price (platform): ",ai.currentPriceMad.toFixed(0)," MAD"," ","number"==typeof ai.priceDifferencePercent&&(0,b.jsxs)("span",{className:"ml-1",children:["(",ai.priceDifferencePercent.toFixed(2),"%)"]})]}),ai.recommendation&&(0,b.jsxs)("p",{className:"font-semibold text-teal-800",children:["Recommendation: ",ai.recommendation]}),(0,b.jsxs)("p",{className:"text-gray-500",children:["Model ",ai.modelVersion," â€¢ ",ai.city,", ",ai.season]})]})]})]}),U.address&&(0,b.jsx)("div",{className:"pb-6 border-b",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[(0,b.jsx)(r.MapPin,{className:"w-5 h-5 text-teal-600"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"font-semibold",children:[U.address.city,", ",U.address.country]}),U.address.address&&(0,b.jsx)("p",{className:"text-sm text-gray-600",children:U.address.address})]})]})}),(0,b.jsxs)("div",{className:"pb-6 border-b",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Description"}),(0,b.jsx)("div",{className:`text-gray-700 leading-relaxed ${!Y?"line-clamp-6":""}`,children:(0,b.jsx)("p",{className:"whitespace-pre-line",children:U.description})}),U.description&&U.description.length>200&&(0,b.jsx)("button",{onClick:()=>Z(!Y),className:"mt-4 text-teal-600 font-semibold underline hover:text-teal-700",children:Y?"Show less":"Show more"})]}),U.amenities&&U.amenities.length>0&&(0,b.jsxs)("div",{className:"pb-6 border-b",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"What this place offers"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-y-4",children:($?U.amenities:U.amenities.slice(0,8)).map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-3 text-gray-700",children:[(0,b.jsx)(J.Wifi,{className:"w-5 h-5 text-teal-600"}),(0,b.jsx)("span",{children:a.name})]},a.id))}),U.amenities.length>8&&(0,b.jsx)("button",{onClick:()=>_(!$),className:"mt-4 px-6 py-2 border border-gray-900 rounded-lg hover:bg-gray-50 transition-colors",children:$?"Show less amenities":`Show all ${U.amenities.length} amenities`})]}),U.type&&(0,b.jsxs)("div",{className:"pb-6 border-b",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Property Type"}),(0,b.jsx)("p",{className:"text-gray-700",children:U.type.type})]}),(0,b.jsxs)("div",{className:"pb-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Status"}),(0,b.jsx)("div",{children:ar(U.status)})]})]})]})})]})}function Q({ownerId:a}){let[d,e]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(""),[t,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)({}),[C,D]=(0,c.useState)({});(0,c.useEffect)(()=>{E()},[a]);let E=async()=>{try{i(!0),k("");let b=await f.apiClient.bookings.getConfirmedBookingsByOwner(parseInt(String(a))),c=await Promise.all(b.map(async a=>{try{let b=await f.apiClient.properties.getById(String(a.propertyId));return{...a,property:b}}catch{return{...a,property:void 0}}}));e(c);let d=c.filter(a=>"CONFIRMED"===a.status||"TENANT_CHECKED_OUT"===a.status||"COMPLETED"===a.status);d.length>0&&await F(d)}catch(a){k(a.message||"Failed to load paid bookings")}finally{i(!1)}},F=async a=>{try{let b={};await Promise.all(a.map(async a=>{try{D(b=>({...b,[a.id]:!0}));let c=a.userId;try{let d=await f.apiClient.users.getById(c);if(d&&d.phoneNumber){let c=String(d.phoneNumber);b[a.id]=c}else b[a.id]=null}catch(c){b[a.id]=null}}catch(c){b[a.id]=null}finally{D(b=>({...b,[a.id]:!1}))}})),B(a=>({...a,...b}))}catch(a){}},G=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return a}},H=(a,b)=>{if(!a||!b)return 0;try{let c=new Date(a),d=new Date(b),e=Math.abs(d.getTime()-c.getTime());return Math.ceil(e/864e5)}catch{return 0}},I=a=>{if(!a?.propertyImages||0===a.propertyImages.length)return null;let b=a.propertyImages.find(a=>a.cover);return b?b.url:a.propertyImages[0].url},J=a=>a?a.startsWith("http://")||a.startsWith("https://")?a:a.startsWith("/uploads")?`http://localhost:8081${a}`:a:"/houses_placeholder.png";return h?(0,b.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,b.jsx)(o.Loader2,{className:"h-12 w-12 animate-spin text-teal-600"}),(0,b.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading paid bookings..."})]}):j?(0,b.jsxs)(l.Card,{className:"p-6 border-red-200 bg-red-50",children:[(0,b.jsx)("p",{className:"text-red-700",children:j}),(0,b.jsx)(m.Button,{onClick:E,variant:"outline",className:"mt-4",children:"Try Again"})]}):0===d.length?(0,b.jsxs)(l.Card,{className:"p-12 text-center",children:[(0,b.jsx)(q.CheckCircle,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No paid bookings"}),(0,b.jsx)("p",{className:"text-gray-600",children:"You don't have any confirmed paid bookings."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(a=>{let c=I(a.property),d=H(a.checkInDate,a.checkOutDate);return(0,b.jsxs)(l.Card,{className:"overflow-hidden hover:shadow-2xl transition-all duration-300",children:[(0,b.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-green-100 to-green-200 overflow-hidden",children:[c?(0,b.jsx)(v.default,{src:J(c),alt:a.property?.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(r.MapPin,{className:"w-16 h-16 text-green-300"})}),(0,b.jsx)("div",{className:"absolute top-4 right-4",children:(0,b.jsx)(n.Badge,{className:"bg-green-100 text-green-800 border-green-200",children:"Paid"})}),(0,b.jsx)("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl px-4 py-2 shadow-lg",children:(0,b.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,b.jsx)("span",{className:"text-xl font-bold text-green-600",children:a.totalPrice?.toFixed(4)||"N/A"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"MAD"})]})})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-1",children:a.property?.title||`Property ${a.propertyId}`}),a.property?.address&&(0,b.jsxs)("div",{className:"flex items-center text-gray-600 text-sm mb-4",children:[(0,b.jsx)(r.MapPin,{className:"w-4 h-4 mr-1.5 text-teal-600 flex-shrink-0"}),(0,b.jsxs)("span",{className:"line-clamp-1",children:[a.property.address.city,", ",a.property.address.country]})]}),(0,b.jsxs)("div",{className:"space-y-2 mb-4 pb-4 border-b border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(g.Calendar,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsx)("span",{children:"Check-in"})]}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:G(a.checkInDate)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(g.Calendar,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsx)("span",{children:"Check-out"})]}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:G(a.checkOutDate)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(p.Clock,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsx)("span",{children:"Duration"})]}),(0,b.jsxs)("span",{className:"font-semibold text-gray-900",children:[d," ",1===d?"night":"nights"]})]}),("CONFIRMED"===a.status||"TENANT_CHECKED_OUT"===a.status||"COMPLETED"===a.status)&&(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm pt-2 border-t border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(u.Phone,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsx)("span",{children:"Tenant Phone"})]}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:C[a.id]?(0,b.jsx)(o.Loader2,{className:"w-4 h-4 animate-spin inline"}):A[a.id]?A[a.id]:"N/A"})]})]}),(0,b.jsx)("div",{className:"flex flex-col gap-2",children:(0,b.jsxs)(m.Button,{onClick:()=>{z(a),x(!0)},variant:"outline",className:"w-full",children:[(0,b.jsx)(s.Eye,{className:"w-4 h-4 mr-2"}),"View Details"]})})]})]},a.id)})}),(0,b.jsx)(w.Dialog,{open:t,onOpenChange:x,children:(0,b.jsxs)(w.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(w.DialogHeader,{children:(0,b.jsx)(w.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:"Booking Details"})}),y&&(0,b.jsxs)("div",{className:"space-y-6 mt-4",children:[y.property&&I(y.property)&&(0,b.jsx)("div",{className:"relative h-48 bg-gradient-to-br from-green-100 to-green-200 rounded-lg overflow-hidden",children:(0,b.jsx)(v.default,{src:J(I(y.property)),alt:y.property.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 80vw"})}),y.property&&(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:y.property.title}),y.property.address&&(0,b.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,b.jsx)(r.MapPin,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,b.jsxs)("span",{children:[y.property.address.city,", ",y.property.address.country]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-in"}),(0,b.jsx)("p",{className:"text-base font-semibold text-gray-900",children:G(y.checkInDate)})]}),(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-out"}),(0,b.jsx)("p",{className:"text-base font-semibold text-gray-900",children:G(y.checkOutDate)})]})]}),(0,b.jsx)("div",{className:"p-4 bg-teal-50 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Duration"}),(0,b.jsxs)("span",{className:"text-lg font-bold text-teal-700",children:[H(y.checkInDate,y.checkOutDate)," ",1===H(y.checkInDate,y.checkOutDate)?"night":"nights"]})]})}),(0,b.jsx)("div",{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-lg border-2 border-green-200",children:(0,b.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Total Price"}),(0,b.jsxs)("span",{className:"text-xl font-bold text-green-700",children:[y.totalPrice?.toFixed(0)||"N/A"," MAD"]})]})})]})]})]})})]})}function R({ownerId:a}){let d,e,h,[i,j]=(0,c.useState)([]),[k,m]=(0,c.useState)(!0),[n,p]=(0,c.useState)(""),[q,s]=(0,c.useState)(new Date);(0,c.useEffect)(()=>{t()},[a]);let t=async()=>{try{m(!0),p("");let b=await f.apiClient.bookings.getConfirmedBookingsByOwner(parseInt(String(a))),c=await Promise.all(b.map(async a=>{try{let b=await f.apiClient.properties.getById(String(a.propertyId));return{...a,property:b}}catch{return{...a,property:void 0}}}));j(c)}catch(a){p(a.message||"Failed to load calendar")}finally{m(!1)}},u=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return a}},v=a=>{s(b=>{let c=new Date(b);return"prev"===a?c.setMonth(b.getMonth()-1):c.setMonth(b.getMonth()+1),c})};if(k)return(0,b.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,b.jsx)(o.Loader2,{className:"h-12 w-12 animate-spin text-teal-600"}),(0,b.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading calendar..."})]});if(n)return(0,b.jsx)(l.Card,{className:"p-6 border-red-200 bg-red-50",children:(0,b.jsx)("p",{className:"text-red-700",children:n})});let{daysInMonth:w,startingDayOfWeek:x,year:y,month:z}=(d=q.getFullYear(),h=new Date(d,e=q.getMonth(),1),{daysInMonth:new Date(d,e+1,0).getDate(),startingDayOfWeek:h.getDay(),year:d,month:e}),A=q.toLocaleDateString("en-US",{month:"long",year:"numeric"}),B=Array.from({length:w},(a,b)=>b+1);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("button",{onClick:()=>v("prev"),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"â† Prev"}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:A}),(0,b.jsx)("button",{onClick:()=>v("next"),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Next â†’"})]}),(0,b.jsx)(l.Card,{className:"p-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(a=>(0,b.jsx)("div",{className:"text-center font-semibold text-gray-700 py-2",children:a},a)),Array.from({length:x}).map((a,c)=>(0,b.jsx)("div",{className:"aspect-square"},`empty-${c}`)),B.map(a=>{let c=new Date(y,z,a),d=i.filter(a=>{var b,d;let e,f;return b=a.checkInDate,d=a.checkOutDate,e=new Date(b),f=new Date(d),e.setHours(0,0,0,0),f.setHours(0,0,0,0),c.setHours(0,0,0,0),c>=e&&c<=f}),e=c.getDate()===new Date().getDate()&&c.getMonth()===new Date().getMonth()&&c.getFullYear()===new Date().getFullYear();return(0,b.jsxs)("div",{className:`aspect-square border rounded-lg p-2 ${e?"border-teal-500 bg-teal-50":"border-gray-200"} ${d.length>0?"bg-green-50 border-green-300":""}`,children:[(0,b.jsx)("div",{className:`text-sm font-semibold mb-1 ${e?"text-teal-700":"text-gray-900"}`,children:a}),d.length>0&&(0,b.jsxs)("div",{className:"space-y-1",children:[d.slice(0,2).map(a=>(0,b.jsx)("div",{className:"text-xs bg-green-600 text-white px-1.5 py-0.5 rounded truncate",title:a.property?.title||`Booking ${a.id}`,children:a.property?.title||`B${a.id}`},a.id)),d.length>2&&(0,b.jsxs)("div",{className:"text-xs text-green-700 font-semibold",children:["+",d.length-2," more"]})]})]},a)})]})}),i.length>0&&(0,b.jsxs)(l.Card,{className:"p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Upcoming Bookings"}),(0,b.jsx)("div",{className:"space-y-3",children:i.sort((a,b)=>new Date(a.checkInDate).getTime()-new Date(b.checkInDate).getTime()).slice(0,10).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"font-semibold text-gray-900",children:a.property?.title||`Property ${a.propertyId}`}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 flex items-center gap-4 mt-1",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(g.Calendar,{className:"w-3 h-3"}),u(a.checkInDate)," - ",u(a.checkOutDate)]}),a.property?.address&&(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(r.MapPin,{className:"w-3 h-3"}),a.property.address.city]})]})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)("div",{className:"font-bold text-teal-600",children:[a.totalPrice?.toFixed(0)," MAD"]})})]},a.id))})]}),0===i.length&&(0,b.jsxs)(l.Card,{className:"p-12 text-center",children:[(0,b.jsx)(g.Calendar,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No bookings"}),(0,b.jsx)("p",{className:"text-gray-600",children:"You don't have any confirmed bookings to display."})]})]})}var S=a.i(30619);function T(){let{user:a,isLoading:g,token:h}=(0,d.useAuth)(),i=(0,e.useRouter)(),[j,l]=(0,c.useState)("paid"),[m,n]=(0,c.useState)(0),[p,q]=(0,c.useState)(0),[r,s]=(0,c.useState)(0),[t,u]=(0,c.useState)(0),[v,w]=(0,c.useState)(!0);(0,c.useEffect)(()=>{if(!g&&!a)return void i.push("/login");if(!g&&a){let b=a.roles?.includes("ADMIN"),c=a.roles?.includes("POSTER"),d=a.roles?.includes("HOST");if(!b&&!c&&!d)return void i.push("/")}a&&h&&x()},[a,h,g,i]);let x=async()=>{if(a?.id)try{w(!0);let b=parseInt(String(a.id)),[c,d,e,g]=await Promise.all([f.apiClient.properties.getMyProperties().catch(()=>[]),f.apiClient.bookings.getCurrentBookingsByOwner(b).catch(()=>[]),f.apiClient.bookings.getPendingNegotiations(b).catch(()=>[]),f.apiClient.bookings.getByOwnerId(b).catch(()=>[])]);n(c.length),q(d.length),s(e.length);let h=g.filter(a=>"COMPLETED"===a.status).reduce((a,b)=>a+(b.totalPrice||0),0);u(h)}catch(a){console.error("Failed to fetch stats:",a)}finally{w(!1)}},A=()=>{x()};if(g||v)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(o.Loader2,{className:"h-12 w-12 animate-spin text-teal-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading dashboard..."})]})});if(!a)return null;let B=a.id;return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsx)("div",{className:"mb-6"}),(0,b.jsx)("div",{className:"relative z-10",children:(0,b.jsx)(k,{activeSection:j,onSectionChange:a=>{l(a)}})}),(0,b.jsxs)("div",{className:"mt-8",children:["paid"===j&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Paid Bookings"}),(0,b.jsx)(Q,{ownerId:B})]}),"negotiations"===j&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Pending Approvals"}),(0,b.jsx)(D,{ownerId:B,onUpdate:A})]}),"current"===j&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Current Bookings"}),(0,b.jsx)(y,{ownerId:B,onUpdate:A})]}),"checkout-requests"===j&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Checkout Requests"}),(0,b.jsx)(z,{ownerId:B,onUpdate:A})]}),"calendar"===j&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Calendar"}),(0,b.jsx)(R,{ownerId:B})]}),("my-properties"===j||"draft"===j||"pending-approval"===j||"approved"===j||"disapproved"===j||"suspended"===j||"hidden"===j)&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:["my-properties"===j&&"All Properties","draft"===j&&"Draft Properties","pending-approval"===j&&"Pending Approval","approved"===j&&"Approved Properties","disapproved"===j&&"Disapproved Properties","suspended"===j&&"Suspended Properties","hidden"===j&&"Hidden Properties"]}),(0,b.jsx)(P,{userId:B,onUpdate:A,filter:"draft"===j?"draft":"pending-approval"===j?"pending-approval":"approved"===j?"approved":"disapproved"===j?"disapproved":"suspended"===j?"suspended":"hidden"===j?"hidden":"all"})]}),("my-complaints"===j||"complaints-against-me"===j)&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:["my-complaints"===j&&"My Complaints","complaints-against-me"===j&&"Complaints Against Me"]}),(0,b.jsx)(S.HostReclamations,{ownerId:B,filter:"my-complaints"===j?"my-complaints":"complaints-against-me"})]})]})]})})}a.s(["default",()=>T],32886)}];

//# sourceMappingURL=app_host-dashboard_page_tsx_f3057045._.js.map