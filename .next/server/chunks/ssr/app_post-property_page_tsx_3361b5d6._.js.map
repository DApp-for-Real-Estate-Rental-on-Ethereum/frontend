{"version":3,"sources":["../../../../app/post-property/page.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useState, useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { useAuth } from \"@/lib/hooks/use-auth\"\nimport { apiClient } from \"@/lib/services/api\"\nimport Link from \"next/link\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card } from \"@/components/ui/card\"\nimport { ArrowLeft, Upload, MapPin, Loader2 } from \"lucide-react\"\nimport { Switch } from \"@/components/ui/switch\"\n\nexport default function PostPropertyPage() {\n  const router = useRouter()\n  const { user, isLoading: authLoading, token } = useAuth()\n  const [walletAddress, setWalletAddress] = useState<string | null>(null)\n  const [isCheckingWallet, setIsCheckingWallet] = useState(true)\n  \n  const [formData, setFormData] = useState({\n    title: \"\",\n    description: \"\",\n    typeId: \"1\",\n    dailyPrice: \"\", // Daily price in ETH\n    depositAmount: \"\", // Deposit amount in ETH\n    negotiationPercentage: \"\", // negotiation percentage\n    capacity: \"\",\n    numberOfBedrooms: \"\",\n    numberOfBathrooms: \"\",\n    numberOfBeds: \"\",\n    address: \"\",\n    city: \"\",\n    country: \"Morocco\",\n    zipCode: \"\",\n    latitude: \"\",\n    longitude: \"\",\n  })\n  const [isGettingLocation, setIsGettingLocation] = useState(false)\n  const [images, setImages] = useState<File[]>([])\n  const [imagePreview, setImagePreview] = useState<string[]>([])\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState(\"\")\n  const [discountPlans, setDiscountPlans] = useState({\n    fiveDays: false, // 10% discount for 5+ days\n    fifteenDays: false, // 15% discount for 15+ days\n    oneMonth: false, // 20% discount for 30+ days\n  })\n\n  // Fetch wallet address from API if not in localStorage\n  useEffect(() => {\n    const fetchWalletAddress = async () => {\n      if (!user || !token || authLoading) {\n        setIsCheckingWallet(false)\n        return\n      }\n\n      // First check if walletAddress is in user object\n      if (user.walletAddress && user.walletAddress.trim() !== \"\") {\n        setWalletAddress(user.walletAddress)\n        setIsCheckingWallet(false)\n        return\n      }\n\n      // If not, fetch from API\n      try {\n        const userData = await apiClient.users.getMe()\n        const walletAddr = userData.walletAddress && userData.walletAddress.trim() !== \"\" ? userData.walletAddress : null\n        setWalletAddress(walletAddr)\n        \n        // Update user in localStorage if walletAddress was found\n        if (walletAddr) {\n          const updatedUser = { ...user, walletAddress: walletAddr }\n          localStorage.setItem(\"user\", JSON.stringify(updatedUser))\n          localStorage.setItem(process.env.NEXT_PUBLIC_USER_STORAGE_KEY || \"derent5_user_data\", JSON.stringify(updatedUser))\n          window.dispatchEvent(new Event(\"auth-state-changed\"))\n        }\n      } catch (error) {\n        console.error(\"Failed to fetch wallet address:\", error)\n        setWalletAddress(null)\n      } finally {\n        setIsCheckingWallet(false)\n      }\n    }\n\n    fetchWalletAddress()\n  }, [user, token, authLoading])\n\n  if (authLoading || isCheckingWallet) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <p>Loading...</p>\n      </div>\n    )\n  }\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen flex flex-col items-center justify-center bg-gray-50 p-4\">\n        <p className=\"text-gray-600 mb-4\">Please sign in to post a property.</p>\n        <Link href=\"/login\">\n          <Button className=\"bg-teal-600 hover:bg-teal-700\">Sign In</Button>\n        </Link>\n      </div>\n    )\n  }\n\n  // Check if user has wallet address - show message immediately if not connected\n  // Use walletAddress from state (fetched from API) or from user object\n  const hasWallet = walletAddress || (user?.walletAddress && user.walletAddress.trim() !== \"\")\n  if (!hasWallet) {\n    return (\n      <div className=\"min-h-screen flex flex-col items-center justify-center bg-gray-50 p-4\">\n        <Card className=\"p-8 text-center max-w-md\">\n          <p className=\"text-gray-600 mb-4\">\n            You must connect your wallet before creating a property.\n            <br />\n            Please go to your profile and connect your wallet.\n          </p>\n          <Link href=\"/profile\">\n            <Button className=\"bg-teal-600 hover:bg-teal-700\">Go to Profile</Button>\n          </Link>\n        </Card>\n      </div>\n    )\n  }\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n    const { name, value } = e.target\n    setFormData((prev) => ({ ...prev, [name]: value }))\n  }\n\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || [])\n    \n    // Combine with existing images (if any)\n    const totalFiles = [...images, ...files]\n    \n    // Validate total image count: must be between 5 and 10\n    if (totalFiles.length > 10) {\n      setError(`You can upload at most 10 images total. Currently have ${images.length}, trying to add ${files.length}`)\n      e.target.value = \"\" // Reset input\n      return\n    }\n    \n    setImages(totalFiles)\n    setError(\"\") // Clear any previous errors\n\n    // Create previews for new files and combine with existing\n    const newPreviews = files.map((file) => {\n      return URL.createObjectURL(file)\n    })\n    setImagePreview([...imagePreview, ...newPreviews])\n    \n    // Reset input to allow selecting more files\n    e.target.value = \"\"\n  }\n\n  const removeImage = (index: number) => {\n    // Revoke object URL to prevent memory leak\n    URL.revokeObjectURL(imagePreview[index])\n    \n    const newImages = images.filter((_, i) => i !== index)\n    const newPreviews = imagePreview.filter((_, i) => i !== index)\n    \n    setImages(newImages)\n    setImagePreview(newPreviews)\n    setError(\"\") // Clear any errors when removing images\n  }\n\n  const getCurrentLocation = (retryCount = 0) => {\n    if (!navigator.geolocation) {\n      setError(\"Geolocation is not supported by your browser. Please enter address manually.\")\n      return\n    }\n\n    setIsGettingLocation(true)\n    setError(\"\")\n\n    // Try with high accuracy first, then fallback to lower accuracy\n    const options = retryCount === 0 \n      ? {\n          enableHighAccuracy: true,\n          timeout: 15000, // Increased timeout\n          maximumAge: 60000 // Accept cached position up to 1 minute old\n        }\n      : {\n          enableHighAccuracy: false, // Fallback: use less accurate but faster method\n          timeout: 10000,\n          maximumAge: 300000 // Accept cached position up to 5 minutes old\n        }\n\n    navigator.geolocation.getCurrentPosition(\n      async (position) => {\n        const { latitude, longitude, accuracy } = position.coords\n        \n        console.log(`üìç Location obtained: ${latitude}, ${longitude} (accuracy: ${accuracy}m)`)\n        \n        try {\n          // Use OpenStreetMap Nominatim API for reverse geocoding (free, no API key needed)\n          const response = await fetch(\n            `https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}&zoom=18&addressdetails=1`,\n            {\n              headers: {\n                'User-Agent': 'Derent Property App' // Required by Nominatim\n              }\n            }\n          )\n          \n          if (!response.ok) {\n            throw new Error(\"Failed to get address from coordinates\")\n          }\n\n          const data = await response.json()\n          const addressData = data.address || {}\n\n          console.log(\"üìç Reverse geocoding result:\", addressData)\n\n          // Update form data with location information\n          setFormData((prev) => ({\n            ...prev,\n            latitude: latitude.toString(),\n            longitude: longitude.toString(),\n            address: addressData.road || addressData.house_number \n              ? `${addressData.house_number || \"\"} ${addressData.road || \"\"}`.trim()\n              : prev.address,\n            city: addressData.city || addressData.town || addressData.village || addressData.municipality || addressData.county || prev.city,\n            country: addressData.country || prev.country,\n            zipCode: addressData.postcode || prev.zipCode,\n          }))\n\n          setError(\"\")\n        } catch (err) {\n          console.error(\"Reverse geocoding error:\", err)\n          // Even if reverse geocoding fails, save the coordinates\n          setFormData((prev) => ({\n            ...prev,\n            latitude: latitude.toString(),\n            longitude: longitude.toString(),\n          }))\n          setError(\"Location detected but could not get address details. Please fill address manually.\")\n        } finally {\n          setIsGettingLocation(false)\n        }\n      },\n      (error) => {\n        console.error(\"Geolocation error:\", {\n          code: error.code,\n          message: error.message,\n          PERMISSION_DENIED: error.PERMISSION_DENIED,\n          POSITION_UNAVAILABLE: error.POSITION_UNAVAILABLE,\n          TIMEOUT: error.TIMEOUT\n        })\n        setIsGettingLocation(false)\n        \n        // Retry with lower accuracy if first attempt failed\n        if (retryCount === 0 && (error.code === error.POSITION_UNAVAILABLE || error.code === 2)) {\n          console.log(\"Retrying with lower accuracy...\")\n          setTimeout(() => getCurrentLocation(1), 500)\n          return\n        }\n        \n        // Handle error codes (using constants or numeric values)\n        const errorCode = error.code\n        const errorMessage = error.message || \"\"\n        \n        if (errorCode === error.PERMISSION_DENIED || errorCode === 1) {\n          setError(\"Location access denied. Please enable location permissions in your browser settings and try again.\")\n        } else if (errorCode === error.POSITION_UNAVAILABLE || errorCode === 2) {\n          // Check if it's a desktop/laptop without GPS\n          const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)\n          const errorMsg = isMobile \n            ? \"Location unavailable. Please check if GPS is enabled on your device and try again, or enter address manually.\"\n            : \"Location unavailable. Desktop computers usually don't have GPS. Please enter address manually or use a mobile device.\"\n          setError(errorMsg)\n        } else if (errorCode === error.TIMEOUT || errorCode === 3) {\n          setError(\"Location request timed out. This may happen if GPS signal is weak. Please try again or enter address manually.\")\n        } else {\n          setError(`Unable to get location (Error code: ${errorCode}${errorMessage ? ` - ${errorMessage}` : \"\"}). Please enter address manually.`)\n        }\n      },\n      options\n    )\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setError(\"\")\n    setIsLoading(true)\n\n    try {\n      // Check if user has wallet address (use state or user object)\n      const currentWalletAddress = walletAddress || user?.walletAddress\n      if (!currentWalletAddress || currentWalletAddress.trim() === \"\") {\n        setError(\"You must connect your wallet before creating a property. Please go to your profile and connect your wallet.\")\n        setIsLoading(false)\n        return\n      }\n\n      // Validate image count: must be between 5 and 10 images\n      if (images.length === 0) {\n        setError(\"Please upload at least 5 images for your property.\")\n        setIsLoading(false)\n        return\n      }\n      if (images.length < 5) {\n        setError(`Please upload at least 5 images. Currently uploaded: ${images.length}`)\n        setIsLoading(false)\n        return\n      }\n      if (images.length > 10) {\n        setError(`You can upload at most 10 images. Currently uploaded: ${images.length}`)\n        setIsLoading(false)\n        return\n      }\n\n      // Validate numeric fields\n      const dailyPrice = parseFloat(formData.dailyPrice)\n      const depositAmount = parseFloat(formData.depositAmount) || 0\n      const negotiationPercentage = parseFloat(formData.negotiationPercentage)\n      const capacity = Number.parseInt(formData.capacity)\n      const numberOfBedrooms = Number.parseInt(formData.numberOfBedrooms)\n      const numberOfBathrooms = Number.parseInt(formData.numberOfBathrooms)\n      const numberOfBeds = Number.parseInt(formData.numberOfBeds)\n\n      if (isNaN(dailyPrice) || dailyPrice <= 0) {\n        setError(\"Daily price must be a valid positive number.\")\n        setIsLoading(false)\n        return\n      }\n\n      if (isNaN(depositAmount) || depositAmount < 0) {\n        setError(\"Deposit amount must be a valid non-negative number.\")\n        setIsLoading(false)\n        return\n      }\n\n      if (isNaN(negotiationPercentage) || negotiationPercentage < 0 || negotiationPercentage > 100) {\n        setError(\"negotiation percentage must be between 0 and 100.\")\n        setIsLoading(false)\n        return\n      }\n\n      if (isNaN(capacity) || capacity < 1) {\n        setError(\"Capacity must be at least 1.\")\n        setIsLoading(false)\n        return\n      }\n\n      if (isNaN(numberOfBedrooms) || numberOfBedrooms < 1) {\n        setError(\"Number of bedrooms must be at least 1.\")\n        setIsLoading(false)\n        return\n      }\n\n      if (isNaN(numberOfBathrooms) || numberOfBathrooms < 1) {\n        setError(\"Number of bathrooms must be at least 1.\")\n        setIsLoading(false)\n        return\n      }\n\n      if (isNaN(numberOfBeds) || numberOfBeds < 1) {\n        setError(\"Number of beds must be at least 1.\")\n        setIsLoading(false)\n        return\n      }\n\n      // Use first image as cover image (optional - if null, first image will be cover)\n      const coverImageName = images[0]?.name || null\n\n      const createRequest = {\n        title: formData.title.trim(),\n        description: formData.description.trim(),\n        typeId: Number.parseInt(formData.typeId),\n        dailyPrice: dailyPrice,\n        depositAmount: depositAmount,\n        negotiationPercentage: negotiationPercentage,\n        capacity: capacity,\n        numberOfBedrooms: numberOfBedrooms,\n        numberOfBathrooms: numberOfBathrooms,\n        numberOfBeds: numberOfBeds,\n        address: {\n          address: formData.address.trim(),\n          city: formData.city.trim(),\n          country: formData.country.trim(),\n          zipCode: formData.zipCode ? Number.parseInt(formData.zipCode) : undefined,\n          latitude: formData.latitude ? parseFloat(formData.latitude) : undefined,\n          longitude: formData.longitude ? parseFloat(formData.longitude) : undefined,\n        },\n        amenities: [],\n        coverImageName: coverImageName,\n        // Discount plan (only include enabled plans, or null if none)\n        discountPlan: (discountPlans.fiveDays || discountPlans.fifteenDays || discountPlans.oneMonth) ? {\n          ...(discountPlans.fiveDays && { fiveDays: 10 }), // 10% discount for 5+ days\n          ...(discountPlans.fifteenDays && { fifteenDays: 15 }), // 15% discount for 15+ days\n          ...(discountPlans.oneMonth && { oneMonth: 20 }), // 20% discount for 30+ days\n        } : null,\n      }\n\n      const result = await apiClient.properties.create(createRequest, images)\n      \n      // Refresh user data to get updated roles (HOST role was added)\n      try {\n        const userData = await apiClient.users.getMe()\n        \n        // Map backend roles to frontend roles\n        const frontendRoles = (userData.roles || []).map((r: string) => {\n          if (r === \"HOST\") return \"POSTER\"\n          if (r === \"TENANT\") return \"USER\"\n          if (r === \"ADMIN\") return \"ADMIN\"\n          return r\n        })\n        \n        // Update user in localStorage with new roles\n        const updatedUser = {\n          ...user,\n          roles: frontendRoles.length > 0 ? frontendRoles : user?.roles || [\"USER\"],\n          walletAddress: userData.walletAddress || user?.walletAddress,\n        }\n        \n        localStorage.setItem(\"user\", JSON.stringify(updatedUser))\n        localStorage.setItem(process.env.NEXT_PUBLIC_USER_STORAGE_KEY || \"derent5_user_data\", JSON.stringify(updatedUser))\n        \n        // Dispatch event to update all components (including header)\n        window.dispatchEvent(new Event(\"auth-state-changed\"))\n      } catch (error) {\n        console.error(\"Failed to refresh user data:\", error)\n        // Continue anyway - user can refresh manually\n      }\n      \n      router.refresh() // Refresh to update header\n      router.push(`/property/${result.propertyId || result.id}`)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Failed to create property\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">List Your Property</h1>\n        <p className=\"text-gray-600 mb-8\">Fill in the details to post your property</p>\n        <Card className=\"p-8\">\n          <form onSubmit={handleSubmit} className=\"space-y-8\">\n            {error && <div className=\"p-4 bg-red-50 text-red-700 rounded-lg\">{error}</div>}\n\n            {/* Images Section */}\n            <div>\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Upload Images</h2>\n              <div className=\"space-y-4\">\n                <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-teal-600 transition-colors\">\n                  <Upload className=\"w-8 h-8 text-gray-400 mx-auto mb-2\" />\n                  <label className=\"cursor-pointer\">\n                    <span className=\"text-teal-600 hover:text-teal-700 font-medium\">Click to upload</span> or drag and\n                    drop\n                    <input type=\"file\" multiple accept=\"image/*\" onChange={handleImageChange} className=\"hidden\" />\n                  </label>\n                  <p className=\"text-sm text-gray-500 mt-1\">\n                    PNG, JPG, GIF up to 10MB (5-10 images required)\n                    {images.length > 0 && images.length < 10 && \" - You can add more images\"}\n                  </p>\n                </div>\n\n                {imagePreview.length > 0 && (\n                  <div className=\"space-y-4\">\n                    <div className=\"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4\">\n                      {imagePreview.map((preview, i) => (\n                        <div key={i} className=\"relative group\">\n                          <div className=\"relative h-32 rounded-lg overflow-hidden border-2 border-gray-200\">\n                            <img\n                              src={preview || \"/placeholder.svg\"}\n                              alt={`Preview ${i + 1}`}\n                              className=\"w-full h-full object-cover\"\n                            />\n                            <button\n                              type=\"button\"\n                              onClick={() => removeImage(i)}\n                              className=\"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity\"\n                              title=\"Remove image\"\n                            >\n                              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                              </svg>\n                            </button>\n                          </div>\n                          <p className=\"text-xs text-center mt-1 text-gray-600\">Image {i + 1}</p>\n                        </div>\n                      ))}\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <span className={`font-medium ${images.length < 5 ? \"text-red-600\" : images.length <= 10 ? \"text-green-600\" : \"text-gray-600\"}`}>\n                        {images.length} / 10 images\n                      </span>\n                      {images.length < 5 && (\n                        <span className=\"text-red-600 text-xs\">\n                          (Need {5 - images.length} more to proceed)\n                        </span>\n                      )}\n                      {images.length >= 5 && images.length <= 10 && (\n                        <span className=\"text-green-600 text-xs\">‚úì Ready to submit</span>\n                      )}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Basic Information */}\n            <div>\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Basic Information</h2>\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Property Title *</label>\n                  <input\n                    type=\"text\"\n                    name=\"title\"\n                    value={formData.title}\n                    onChange={handleInputChange}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600\"\n                    placeholder=\"e.g. Modern Downtown Apartment\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Description *</label>\n                  <textarea\n                    name=\"description\"\n                    value={formData.description}\n                    onChange={handleInputChange}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600 h-32\"\n                    placeholder=\"Describe your property in detail...\"\n                    required\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Property Type *</label>\n                    <select\n                      name=\"typeId\"\n                      value={formData.typeId}\n                      onChange={handleInputChange}\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600\"\n                    >\n                      <option value=\"1\">Apartment</option>\n                      <option value=\"2\">House</option>\n                      <option value=\"3\">Studio</option>\n                      <option value=\"4\">Condo</option>\n                      <option value=\"5\">Villa</option>\n                    </select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Daily Price (ETH) *</label>\n                    <input\n                      type=\"number\"\n                      name=\"dailyPrice\"\n                      value={formData.dailyPrice}\n                      onChange={handleInputChange}\n                      step=\"0.001\"\n                      min=\"0\"\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600\"\n                      placeholder=\"0.05\"\n                      required\n                    />\n                    <p className=\"text-xs text-gray-500 mt-1\">Price per day in Ethereum (ETH)</p>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Deposit Amount (ETH) *</label>\n                    <input\n                      type=\"number\"\n                      name=\"depositAmount\"\n                      value={formData.depositAmount}\n                      onChange={handleInputChange}\n                      step=\"0.001\"\n                      min=\"0\"\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600\"\n                      placeholder=\"0.1\"\n                      required\n                    />\n                    <p className=\"text-xs text-gray-500 mt-1\">Security deposit amount in Ethereum (ETH)</p>\n                  </div>\n                </div>\n\n                {/* negotiation Percentage Field - MUST BE VISIBLE */}\n                <div className=\"w-full mt-4\">\n                  <label htmlFor=\"negotiationPercentage\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    negotiation Percentage (%) *\n                  </label>\n                  <input\n                    id=\"negotiationPercentage\"\n                    type=\"number\"\n                    name=\"negotiationPercentage\"\n                    value={formData.negotiationPercentage}\n                    onChange={handleInputChange}\n                    step=\"0.1\"\n                    min=\"0\"\n                    max=\"100\"\n                    className=\"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600 focus:border-teal-600\"\n                    placeholder=\"0.0\"\n                    required\n                    style={{ display: 'block', visibility: 'visible' }}\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">Enter the negotiation percentage (0-100%)</p>\n                </div>\n              </div>\n            </div>\n\n            {/* Details */}\n            <div>\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Property Details</h2>\n              <div className=\"grid grid-cols-4 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Guests *</label>\n                  <input\n                    type=\"number\"\n                    name=\"capacity\"\n                    value={formData.capacity}\n                    onChange={handleInputChange}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600\"\n                    placeholder=\"4\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Bedrooms *</label>\n                  <input\n                    type=\"number\"\n                    name=\"numberOfBedrooms\"\n                    value={formData.numberOfBedrooms}\n                    onChange={handleInputChange}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600\"\n                    placeholder=\"2\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Beds *</label>\n                  <input\n                    type=\"number\"\n                    name=\"numberOfBeds\"\n                    value={formData.numberOfBeds}\n                    onChange={handleInputChange}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600\"\n                    placeholder=\"3\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Bathrooms *</label>\n                  <input\n                    type=\"number\"\n                    name=\"numberOfBathrooms\"\n                    value={formData.numberOfBathrooms}\n                    onChange={handleInputChange}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600\"\n                    placeholder=\"1\"\n                    min=\"1\"\n                    required\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Discount Plan */}\n            <div>\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Discount Plan</h2>\n              <div className=\"bg-teal-50 border border-teal-200 rounded-lg p-6 space-y-4\">\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <span className=\"font-semibold text-gray-900\">5 Days</span>\n                      <span className=\"px-2 py-1 bg-teal-600 text-white text-xs rounded\">10% OFF</span>\n                    </div>\n                    <p className=\"text-sm text-gray-600\">Get 10% discount when booking for 5 days or more</p>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <Switch\n                      checked={discountPlans.fiveDays}\n                      onCheckedChange={(checked) =>\n                        setDiscountPlans((prev) => ({ ...prev, fiveDays: checked }))\n                      }\n                    />\n                    <span className=\"text-sm text-gray-700 min-w-[60px]\">\n                      {discountPlans.fiveDays ? \"Enabled\" : \"Disabled\"}\n                    </span>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <span className=\"font-semibold text-gray-900\">15 Days</span>\n                      <span className=\"px-2 py-1 bg-teal-600 text-white text-xs rounded\">15% OFF</span>\n                    </div>\n                    <p className=\"text-sm text-gray-600\">Get 15% discount when booking for 15 days or more</p>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <Switch\n                      checked={discountPlans.fifteenDays}\n                      onCheckedChange={(checked) =>\n                        setDiscountPlans((prev) => ({ ...prev, fifteenDays: checked }))\n                      }\n                    />\n                    <span className=\"text-sm text-gray-700 min-w-[60px]\">\n                      {discountPlans.fifteenDays ? \"Enabled\" : \"Disabled\"}\n                    </span>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <span className=\"font-semibold text-gray-900\">1 Month+</span>\n                      <span className=\"px-2 py-1 bg-teal-600 text-white text-xs rounded\">20% OFF</span>\n                    </div>\n                    <p className=\"text-sm text-gray-600\">Get 20% discount when booking for a month or more</p>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <Switch\n                      checked={discountPlans.oneMonth}\n                      onCheckedChange={(checked) =>\n                        setDiscountPlans((prev) => ({ ...prev, oneMonth: checked }))\n                      }\n                    />\n                    <span className=\"text-sm text-gray-700 min-w-[60px]\">\n                      {discountPlans.oneMonth ? \"Enabled\" : \"Disabled\"}\n                    </span>\n                  </div>\n                </div>\n                <p className=\"text-xs text-gray-500 mt-4 pt-4 border-t border-teal-200\">\n                  Enable the discount plans you want to offer. Discounts are automatically applied based on the booking duration.\n                </p>\n              </div>\n            </div>\n\n            {/* Location */}\n            <div>\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-xl font-semibold text-gray-900\">Location</h2>\n                <Button\n                  type=\"button\"\n                  onClick={getCurrentLocation}\n                  disabled={isGettingLocation}\n                  variant=\"outline\"\n                  className=\"flex items-center gap-2\"\n                >\n                  {isGettingLocation ? (\n                    <>\n                      <Loader2 className=\"w-4 h-4 animate-spin\" />\n                      Getting location...\n                    </>\n                  ) : (\n                    <>\n                      <MapPin className=\"w-4 h-4\" />\n                      Use Current Location\n                    </>\n                  )}\n                </Button>\n              </div>\n              <div className=\"space-y-4\">\n                {(formData.latitude || formData.longitude) && (\n                  <div className=\"bg-teal-50 border border-teal-200 rounded-lg p-3 text-sm text-teal-700\">\n                    <p className=\"font-medium\">üìç Location detected:</p>\n                    <p className=\"text-xs mt-1\">\n                      {formData.latitude && formData.longitude \n                        ? `Lat: ${parseFloat(formData.latitude).toFixed(6)}, Lng: ${parseFloat(formData.longitude).toFixed(6)}`\n                        : \"\"}\n                    </p>\n                  </div>\n                )}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Address *</label>\n                  <input\n                    type=\"text\"\n                    name=\"address\"\n                    value={formData.address}\n                    onChange={handleInputChange}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600\"\n                    placeholder=\"123 Main Street\"\n                    required\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-3 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">City *</label>\n                    <input\n                      type=\"text\"\n                      name=\"city\"\n                      value={formData.city}\n                      onChange={handleInputChange}\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600\"\n                      placeholder=\"Casablanca\"\n                      required\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Country *</label>\n                    <input\n                      type=\"text\"\n                      name=\"country\"\n                      value={formData.country}\n                      onChange={handleInputChange}\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600\"\n                      required\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">ZIP Code</label>\n                    <input\n                      type=\"text\"\n                      name=\"zipCode\"\n                      value={formData.zipCode}\n                      onChange={handleInputChange}\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600\"\n                      placeholder=\"20000\"\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Submit */}\n            <div className=\"flex gap-4\">\n              <Link href=\"/\" className=\"flex-1\">\n                <Button type=\"button\" variant=\"outline\" className=\"w-full bg-transparent\">\n                  Cancel\n                </Button>\n              </Link>\n              <Button type=\"submit\" className=\"flex-1 bg-teal-600 hover:bg-teal-700 h-12 text-lg\" disabled={isLoading}>\n                {isLoading ? \"Publishing...\" : \"Publish Property\"}\n              </Button>\n            </div>\n          </form>\n        </Card>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}