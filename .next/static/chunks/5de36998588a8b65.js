(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(47163);let s=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));s.displayName="Card";let n=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...a}));n.displayName="CardHeader";let l=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));l.displayName="CardTitle";let i=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",e),...a}));i.displayName="CardDescription";let o=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",e),...a}));o.displayName="CardContent",a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>o,"CardDescription",()=>i,"CardHeader",()=>n,"CardTitle",()=>l])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},48425,e=>{"use strict";var t=e.i(71645),a=e.i(74080),r=e.i(91918),s=e.i(43476),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,a)=>{let n=t.forwardRef((e,t)=>{let{asChild:n,...l}=e,i=n?r.Slot:a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(i,{...l,ref:t})});return n.displayName=`Primitive.${a}`,{...e,[a]:n}},{});function l(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}e.s(["Primitive",()=>n,"dispatchDiscreteCustomEvent",()=>l])},23750,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(47163);let s=a.forwardRef(({className:e,type:a,...s},n)=>(0,t.jsx)("input",{type:a,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...s}));s.displayName="Input",e.s(["Input",()=>s])},10708,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(48425),s=a.forwardRef((e,a)=>(0,t.jsx)(r.Primitive.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var n=e.i(25913),l=e.i(47163);let i=(0,n.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(s,{ref:r,className:(0,l.cn)(i(),e),...a}));o.displayName=s.displayName,e.s(["Label",()=>o],10708)},86536,e=>{"use strict";let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},81140,30030,e=>{"use strict";function t(e,a,{checkForDefaultPrevented:r=!0}={}){return function(t){if(e?.(t),!1===r||!t.defaultPrevented)return a?.(t)}}e.s(["composeEventHandlers",()=>t],81140);var a=e.i(71645),r=e.i(43476);function s(e,t){let s=a.createContext(t),n=e=>{let{children:t,...n}=e,l=a.useMemo(()=>n,Object.values(n));return(0,r.jsx)(s.Provider,{value:l,children:t})};return n.displayName=e+"Provider",[n,function(r){let n=a.useContext(s);if(n)return n;if(void 0!==t)return t;throw Error(`\`${r}\` must be used within \`${e}\``)}]}function n(e,t=[]){let s=[],l=()=>{let t=s.map(e=>a.createContext(e));return function(r){let s=r?.[e]||t;return a.useMemo(()=>({[`__scope${e}`]:{...r,[e]:s}}),[r,s])}};return l.scopeName=e,[function(t,n){let l=a.createContext(n),i=s.length;s=[...s,n];let o=t=>{let{scope:s,children:n,...o}=t,d=s?.[e]?.[i]||l,c=a.useMemo(()=>o,Object.values(o));return(0,r.jsx)(d.Provider,{value:c,children:n})};return o.displayName=t+"Provider",[o,function(r,s){let o=s?.[e]?.[i]||l,d=a.useContext(o);if(d)return d;if(void 0!==n)return n;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=r.reduce((t,{useScope:a,scopeName:r})=>{let s=a(e)[`__scope${r}`];return{...t,...s}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}(l,...t)]}e.s(["createContext",()=>s,"createContextScope",()=>n],30030)},34620,e=>{"use strict";var t=e.i(71645),a=globalThis?.document?t.useLayoutEffect:()=>{};e.s(["useLayoutEffect",()=>a])},30207,e=>{"use strict";var t=e.i(71645);function a(e){let a=t.useRef(e);return t.useEffect(()=>{a.current=e}),t.useMemo(()=>(...e)=>a.current?.(...e),[])}e.s(["useCallbackRef",()=>a])},69340,e=>{"use strict";var t=e.i(71645),a=e.i(30207);function r({prop:e,defaultProp:r,onChange:s=()=>{}}){let[n,l]=function({defaultProp:e,onChange:r}){let s=t.useState(e),[n]=s,l=t.useRef(n),i=(0,a.useCallbackRef)(r);return t.useEffect(()=>{l.current!==n&&(i(n),l.current=n)},[n,l,i]),s}({defaultProp:r,onChange:s}),i=void 0!==e,o=i?e:n,d=(0,a.useCallbackRef)(s);return[o,t.useCallback(t=>{if(i){let a="function"==typeof t?t(e):t;a!==e&&d(a)}else l(t)},[i,e,l,d])]}e.s(["useControllableState",()=>r])},96626,e=>{"use strict";var t=e.i(71645),a=e.i(20783),r=e.i(34620),s=e=>{var s;let l,i,{present:o,children:d}=e,c=function(e){var a,s;let[l,i]=t.useState(),o=t.useRef({}),d=t.useRef(e),c=t.useRef("none"),[u,m]=(a=e?"mounted":"unmounted",s={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,t)=>s[e][t]??e,a));return t.useEffect(()=>{let e=n(o.current);c.current="mounted"===u?e:"none"},[u]),(0,r.useLayoutEffect)(()=>{let t=o.current,a=d.current;if(a!==e){let r=c.current,s=n(t);e?m("MOUNT"):"none"===s||t?.display==="none"?m("UNMOUNT"):a&&r!==s?m("ANIMATION_OUT"):m("UNMOUNT"),d.current=e}},[e,m]),(0,r.useLayoutEffect)(()=>{if(l){let e,t=l.ownerDocument.defaultView??window,a=a=>{let r=n(o.current).includes(a.animationName);if(a.target===l&&r&&(m("ANIMATION_END"),!d.current)){let a=l.style.animationFillMode;l.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===l.style.animationFillMode&&(l.style.animationFillMode=a)})}},r=e=>{e.target===l&&(c.current=n(o.current))};return l.addEventListener("animationstart",r),l.addEventListener("animationcancel",a),l.addEventListener("animationend",a),()=>{t.clearTimeout(e),l.removeEventListener("animationstart",r),l.removeEventListener("animationcancel",a),l.removeEventListener("animationend",a)}}m("ANIMATION_END")},[l,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:t.useCallback(e=>{e&&(o.current=getComputedStyle(e)),i(e)},[])}}(o),u="function"==typeof d?d({present:c.isPresent}):t.Children.only(d),m=(0,a.useComposedRefs)(c.ref,(s=u,(i=(l=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in l&&l.isReactWarning)?s.ref:(i=(l=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in l&&l.isReactWarning)?s.props.ref:s.props.ref||s.ref));return"function"==typeof d||c.isPresent?t.cloneElement(u,{ref:m}):null};function n(e){return e?.animationName||"none"}s.displayName="Presence",e.s(["Presence",()=>s])},30374,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(81140),s=e.i(20783),n=e.i(30030),l=e.i(10772),i=e.i(69340),o=e.i(26330),d=e.i(65491),c=e.i(74606),u=e.i(96626),m=e.i(48425),f=e.i(3536),p=e.i(85369),g=e.i(86312),h=e.i(91918),x="Dialog",[y,N]=(0,n.createContextScope)(x),[b,w]=y(x),v=e=>{let{__scopeDialog:r,children:s,open:n,defaultOpen:o,onOpenChange:d,modal:c=!0}=e,u=a.useRef(null),m=a.useRef(null),[f=!1,p]=(0,i.useControllableState)({prop:n,defaultProp:o,onChange:d});return(0,t.jsx)(b,{scope:r,triggerRef:u,contentRef:m,contentId:(0,l.useId)(),titleId:(0,l.useId)(),descriptionId:(0,l.useId)(),open:f,onOpenChange:p,onOpenToggle:a.useCallback(()=>p(e=>!e),[p]),modal:c,children:s})};v.displayName=x;var j="DialogTrigger";a.forwardRef((e,a)=>{let{__scopeDialog:n,...l}=e,i=w(j,n),o=(0,s.useComposedRefs)(a,i.triggerRef);return(0,t.jsx)(m.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":U(i.open),...l,ref:o,onClick:(0,r.composeEventHandlers)(e.onClick,i.onOpenToggle)})}).displayName=j;var C="DialogPortal",[P,E]=y(C,{forceMount:void 0}),D=e=>{let{__scopeDialog:r,forceMount:s,children:n,container:l}=e,i=w(C,r);return(0,t.jsx)(P,{scope:r,forceMount:s,children:a.Children.map(n,e=>(0,t.jsx)(u.Presence,{present:s||i.open,children:(0,t.jsx)(c.Portal,{asChild:!0,container:l,children:e})}))})};D.displayName=C;var R="DialogOverlay",k=a.forwardRef((e,a)=>{let r=E(R,e.__scopeDialog),{forceMount:s=r.forceMount,...n}=e,l=w(R,e.__scopeDialog);return l.modal?(0,t.jsx)(u.Presence,{present:s||l.open,children:(0,t.jsx)(M,{...n,ref:a})}):null});k.displayName=R;var M=a.forwardRef((e,a)=>{let{__scopeDialog:r,...s}=e,n=w(R,r);return(0,t.jsx)(p.RemoveScroll,{as:h.Slot,allowPinchZoom:!0,shards:[n.contentRef],children:(0,t.jsx)(m.Primitive.div,{"data-state":U(n.open),...s,ref:a,style:{pointerEvents:"auto",...s.style}})})}),O="DialogContent",S=a.forwardRef((e,a)=>{let r=E(O,e.__scopeDialog),{forceMount:s=r.forceMount,...n}=e,l=w(O,e.__scopeDialog);return(0,t.jsx)(u.Presence,{present:s||l.open,children:l.modal?(0,t.jsx)(I,{...n,ref:a}):(0,t.jsx)(A,{...n,ref:a})})});S.displayName=O;var I=a.forwardRef((e,n)=>{let l=w(O,e.__scopeDialog),i=a.useRef(null),o=(0,s.useComposedRefs)(n,l.contentRef,i);return a.useEffect(()=>{let e=i.current;if(e)return(0,g.hideOthers)(e)},[]),(0,t.jsx)(F,{...e,ref:o,trapFocus:l.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,r.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),l.triggerRef.current?.focus()}),onPointerDownOutside:(0,r.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,r.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),A=a.forwardRef((e,r)=>{let s=w(O,e.__scopeDialog),n=a.useRef(!1),l=a.useRef(!1);return(0,t.jsx)(F,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||s.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,l.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(l.current=!0));let a=t.target;s.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&l.current&&t.preventDefault()}})}),F=a.forwardRef((e,r)=>{let{__scopeDialog:n,trapFocus:l,onOpenAutoFocus:i,onCloseAutoFocus:c,...u}=e,m=w(O,n),p=a.useRef(null),g=(0,s.useComposedRefs)(r,p);return(0,f.useFocusGuards)(),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.FocusScope,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:i,onUnmountAutoFocus:c,children:(0,t.jsx)(o.DismissableLayer,{role:"dialog",id:m.contentId,"aria-describedby":m.descriptionId,"aria-labelledby":m.titleId,"data-state":U(m.open),...u,ref:g,onDismiss:()=>m.onOpenChange(!1)})}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(J,{titleId:m.titleId}),(0,t.jsx)(K,{contentRef:p,descriptionId:m.descriptionId})]})]})}),T="DialogTitle",_=a.forwardRef((e,a)=>{let{__scopeDialog:r,...s}=e,n=w(T,r);return(0,t.jsx)(m.Primitive.h2,{id:n.titleId,...s,ref:a})});_.displayName=T;var L="DialogDescription",$=a.forwardRef((e,a)=>{let{__scopeDialog:r,...s}=e,n=w(L,r);return(0,t.jsx)(m.Primitive.p,{id:n.descriptionId,...s,ref:a})});$.displayName=L;var W="DialogClose",B=a.forwardRef((e,a)=>{let{__scopeDialog:s,...n}=e,l=w(W,s);return(0,t.jsx)(m.Primitive.button,{type:"button",...n,ref:a,onClick:(0,r.composeEventHandlers)(e.onClick,()=>l.onOpenChange(!1))})});function U(e){return e?"open":"closed"}B.displayName=W;var H="DialogTitleWarning",[z,q]=(0,n.createContext)(H,{contentName:O,titleName:T,docsSlug:"dialog"}),J=({titleId:e})=>{let t=q(H),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return a.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},K=({contentRef:e,descriptionId:t})=>{let r=q("DialogDescriptionWarning"),s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return a.useEffect(()=>{let a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},V=e.i(37727),Z=e.i(47163);let X=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(k,{ref:r,className:(0,Z.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));X.displayName=k.displayName;let Y=a.forwardRef(({className:e,children:a,...r},s)=>(0,t.jsxs)(D,{children:[(0,t.jsx)(X,{}),(0,t.jsxs)(S,{ref:s,className:(0,Z.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[a,(0,t.jsxs)(B,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(V.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));Y.displayName=S.displayName;let G=({className:e,...a})=>(0,t.jsx)("div",{className:(0,Z.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});G.displayName="DialogHeader";let Q=({className:e,...a})=>(0,t.jsx)("div",{className:(0,Z.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});Q.displayName="DialogFooter";let ee=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(_,{ref:r,className:(0,Z.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));ee.displayName=_.displayName;let et=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)($,{ref:r,className:(0,Z.cn)("text-sm text-muted-foreground",e),...a}));et.displayName=$.displayName,e.s(["Dialog",()=>v,"DialogContent",()=>Y,"DialogDescription",()=>et,"DialogFooter",()=>Q,"DialogHeader",()=>G,"DialogTitle",()=>ee],30374)},77705,e=>{"use strict";let t=(0,e.i(75254).default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);e.s(["EyeOff",()=>t],77705)},2153,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(25715),s=e.i(18566),n=e.i(22016),l=e.i(57688),i=e.i(67881),o=e.i(70065),d=e.i(23750),c=e.i(10708),u=e.i(30374);let m=(0,e.i(75254).default)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var f=e.i(37727),p=e.i(86536),g=e.i(77705),h=e.i(31278),x=e.i(71667);function y(){let e,y,{user:N,login:b}=(0,r.useAuth)();(0,s.useRouter)();let[w,v]=(0,a.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",birthday:"",walletAddress:"",profilePicture:""}),[j,C]=(0,a.useState)(!0),[P,E]=(0,a.useState)(!1),[D,R]=(0,a.useState)(""),[k,M]=(0,a.useState)(""),[O,S]=(0,a.useState)(!1),[I,A]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[F,T]=(0,a.useState)(!1),[_,L]=(0,a.useState)(!1),[$,W]=(0,a.useState)(!1),[B,U]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{if(!N)return C(!1);try{C(!0);let e=await x.apiClient.users.getMe(),t=e.walletAddress||null;null!=t&&(t=t.trim(),""===t&&(t=null)),v({firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",phoneNumber:e.phoneNumber?.toString()||"",birthday:e.birthday||"",walletAddress:t||"",profilePicture:e.profilePicture||""})}catch(e){v({firstName:N.firstName||"",lastName:N.lastName||"",email:N.email||"",phoneNumber:N.phoneNumber||"",birthday:N.birthday||"",walletAddress:"",profilePicture:N.profileImage||""})}finally{C(!1)}})()},[N]);let H=e=>{let{name:t,value:a}=e.target;v(e=>({...e,[t]:a}))},z=async()=>{if(N){E(!0),R(""),M("");try{let e={};if(w.firstName&&(e.firstName=w.firstName),w.lastName&&(e.lastName=w.lastName),w.birthday&&(e.birthday=w.birthday),w.phoneNumber){let t=w.phoneNumber.replace(/\D/g,"");if(t.length>=10&&t.length<=15)e.phoneNumber=t;else throw Error("Phone number must be 10 to 15 digits")}if(w.walletAddress)if(/^0x[a-fA-F0-9]{40}$/.test(w.walletAddress))e.walletAddress=w.walletAddress;else throw Error("Wallet address must be a valid Ethereum address (0x followed by 40 hex characters)");await x.apiClient.users.updateMe(e),M("Profile updated successfully!");let t=await x.apiClient.users.getMe();v(e=>({...e,firstName:t.firstName||e.firstName,lastName:t.lastName||e.lastName,phoneNumber:t.phoneNumber?.toString()||e.phoneNumber,birthday:t.birthday||e.birthday,profilePicture:t.profilePicture||e.profilePicture}))}catch(e){R(e instanceof Error?e.message:"Failed to update profile. Please try again.")}finally{E(!1)}}},q=async e=>{let t=e.target.files?.[0];if(t&&N){E(!0),R(""),M("");try{let e=(await x.apiClient.users.updateProfilePicture(t)).url;v(t=>({...t,profilePicture:e}));try{let t=await x.apiClient.users.getMe(),a={...N,profileImage:t.profilePicture||e};localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("derent5_user_data",JSON.stringify(a)),window.dispatchEvent(new Event("auth-state-changed"))}catch(a){let t={...N,profileImage:e};localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("derent5_user_data",JSON.stringify(t)),window.dispatchEvent(new Event("auth-state-changed"))}M("Profile picture updated successfully!")}catch(e){R(e instanceof Error?e.message:"Failed to update profile picture. Please try again.")}finally{E(!1)}}},J=async()=>{if(N&&confirm("Are you sure you want to delete your profile picture?")){E(!0),R(""),M("");try{await x.apiClient.users.deleteProfilePicture(),v(e=>({...e,profilePicture:""}));let e={...N,profileImage:void 0};localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("derent5_user_data",JSON.stringify(e)),window.dispatchEvent(new Event("auth-state-changed")),M("Profile picture deleted successfully!")}catch(e){R(e instanceof Error?e.message:"Failed to delete profile picture. Please try again.")}finally{E(!1)}}},K=async()=>{if(N){if(!window.ethereum)return void R("MetaMask is not installed. Please install MetaMask extension to connect your wallet.");E(!0),R(""),M("");try{let e=await window.ethereum.request({method:"eth_requestAccounts"});if(!e||0===e.length)throw Error("No accounts found. Please unlock your MetaMask wallet.");let t=e[0];if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw Error("Invalid wallet address format");await x.apiClient.users.updateMe({walletAddress:t}),v(e=>({...e,walletAddress:t})),M("Wallet connected successfully!");let a=await x.apiClient.users.getMe();v(e=>({...e,walletAddress:a.walletAddress||t}))}catch(e){4001===e.code?R("Connection rejected. Please approve the connection request in MetaMask."):R(e instanceof Error?e.message:"Failed to connect wallet. Please try again.")}finally{E(!1)}}},V=async()=>{if(N&&confirm("Are you sure you want to disconnect your wallet?")){E(!0),R(""),M("");try{await x.apiClient.users.updateMe({walletAddress:""}),v(e=>({...e,walletAddress:""})),M("Wallet disconnected successfully!");let e=await x.apiClient.users.getMe();v(t=>({...t,walletAddress:e.walletAddress||""}))}catch(e){R(e instanceof Error?e.message:"Failed to disconnect wallet. Please try again.")}finally{E(!1)}}};return N?j?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsx)(o.Card,{className:"p-8 text-center",children:(0,t.jsx)("p",{className:"text-gray-600",children:"Loading profile..."})})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile"})}),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)(o.Card,{className:"p-8",children:(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("div",{className:"relative",children:[w.profilePicture?(0,t.jsx)("div",{className:"relative w-24 h-24 rounded-full overflow-hidden border-4 border-teal-600",children:(0,t.jsx)(l.default,{src:(e=w.profilePicture)?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/profile-pictures")||e.startsWith("/user-images")||e.startsWith("/")?`http://localhost:8082${e}`:e:"/placeholder.jpg",alt:`${N.firstName} ${N.lastName}`,fill:!0,className:"object-cover",sizes:"96px"})}):(0,t.jsx)("div",{className:"w-24 h-24 bg-gray-900 rounded-full flex items-center justify-center text-white text-4xl font-bold",children:N.firstName?.charAt(0)||N.lastName?.charAt(0)||"A"}),(0,t.jsxs)("label",{className:"absolute bottom-0 right-0 bg-teal-600 text-white p-2 rounded-full hover:bg-teal-700 cursor-pointer",children:[(0,t.jsx)(m,{className:"w-4 h-4"}),(0,t.jsx)("input",{type:"file",accept:"image/jpeg,image/jpg,image/png",onChange:q,className:"hidden"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:[N.firstName," ",N.lastName]}),(0,t.jsx)("p",{className:"text-gray-600",children:N.email}),(0,t.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,t.jsxs)("label",{className:"cursor-pointer",children:[(0,t.jsx)(i.Button,{type:"button",className:"bg-teal-600 hover:bg-teal-700",asChild:!0,children:(0,t.jsx)("span",{children:"Change profile picture"})}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:q,className:"hidden"})]}),w.profilePicture&&(0,t.jsxs)(i.Button,{type:"button",variant:"outline",onClick:J,className:"border-red-600 text-red-600 hover:bg-red-50",disabled:P,children:[(0,t.jsx)(f.X,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})}),k&&(0,t.jsx)("div",{className:"p-4 bg-green-50 text-green-700 rounded-lg",children:k}),D&&(0,t.jsx)("div",{className:"p-4 bg-red-50 text-red-700 rounded-lg",children:D}),(0,t.jsxs)(o.Card,{className:"p-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Personal Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First name"}),(0,t.jsx)("input",{type:"text",name:"firstName",value:w.firstName,onChange:H,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last name"}),(0,t.jsx)("input",{type:"text",name:"lastName",value:w.lastName,onChange:H,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600"})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone number"}),(0,t.jsx)("input",{type:"tel",name:"phoneNumber",value:w.phoneNumber,onChange:H,placeholder:"212612345678",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"10-15 digits only"})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Birthday"}),(0,t.jsx)("input",{type:"date",name:"birthday",value:w.birthday,onChange:H,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600"})]})]}),(0,t.jsx)(i.Button,{onClick:z,className:"mt-6 bg-teal-600 hover:bg-teal-700",disabled:P,children:P?"Saving...":"Save changes"})]}),(0,t.jsxs)(o.Card,{className:"p-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Security"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,t.jsx)("input",{type:"email",name:"email",value:w.email,onChange:H,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,t.jsx)(i.Button,{type:"button",onClick:()=>S(!0),className:"w-full bg-teal-600 hover:bg-teal-700",children:"Change password"})]})]})]}),(0,t.jsxs)(o.Card,{className:"p-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Payment"}),null==(y=w.walletAddress)||void 0===y||""===y.trim()?(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wallet Address"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Connect your MetaMask wallet to enable cryptocurrency payments"}),(0,t.jsx)(i.Button,{onClick:K,className:"bg-teal-600 hover:bg-teal-700",disabled:P,children:P?"Connecting...":"Connect Wallet"})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wallet Address"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)("input",{type:"text",value:w.walletAddress,readOnly:!0,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-700"}),(0,t.jsx)(i.Button,{onClick:V,variant:"outline",className:"border-red-600 text-red-600 hover:bg-red-50",disabled:P,children:P?"Disconnecting...":"Disconnect Wallet"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Your wallet is connected. You can use it for cryptocurrency payments."})]})]}),(0,t.jsxs)(o.Card,{className:"p-8 border-red-200",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-red-600 mb-4",children:"Danger Zone"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Once you delete your account, there is no going back. Please be certain."}),w.profilePicture&&(0,t.jsx)(i.Button,{variant:"outline",onClick:J,className:"border-red-600 text-red-600 hover:bg-red-50",disabled:P,children:P?"Deleting...":"Delete profile picture"})]})]})]}),(0,t.jsx)(u.Dialog,{open:O,onOpenChange:S,children:(0,t.jsxs)(u.DialogContent,{className:"max-w-md",children:[(0,t.jsxs)(u.DialogHeader,{children:[(0,t.jsx)(u.DialogTitle,{children:"Change Password"}),(0,t.jsx)(u.DialogDescription,{children:"Enter your current password and choose a new password"})]}),(0,t.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),R(""),!I.currentPassword||!I.newPassword||!I.confirmPassword)return void R("Please fill in all fields");if(I.newPassword!==I.confirmPassword)return void R("New passwords do not match");if(!/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=!]).{8,20}$/.test(I.newPassword))return void R("Password must be 8-20 characters long and include at least one uppercase letter, one lowercase letter, one number, and one special character (@#$%^&+=!)");U(!0),R("");try{await x.apiClient.users.changePassword(I.currentPassword,I.newPassword),M("Password changed successfully!"),S(!1),A({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>M(""),3e3)}catch(e){R(e.message||"Failed to change password. Please check your current password and try again.")}finally{U(!1)}},className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"currentPassword",children:"Current Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d.Input,{id:"currentPassword",type:F?"text":"password",value:I.currentPassword,onChange:e=>A(t=>({...t,currentPassword:e.target.value})),className:"pr-10",required:!0}),(0,t.jsx)("button",{type:"button",onClick:()=>T(!F),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:F?(0,t.jsx)(g.EyeOff,{className:"w-4 h-4"}):(0,t.jsx)(p.Eye,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"newPassword",children:"New Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d.Input,{id:"newPassword",type:_?"text":"password",value:I.newPassword,onChange:e=>A(t=>({...t,newPassword:e.target.value})),className:"pr-10",required:!0}),(0,t.jsx)("button",{type:"button",onClick:()=>L(!_),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:_?(0,t.jsx)(g.EyeOff,{className:"w-4 h-4"}):(0,t.jsx)(p.Eye,{className:"w-4 h-4"})})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"8-20 characters, include uppercase, lowercase, number, and special character"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"confirmPassword",children:"Confirm New Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d.Input,{id:"confirmPassword",type:$?"text":"password",value:I.confirmPassword,onChange:e=>A(t=>({...t,confirmPassword:e.target.value})),className:"pr-10",required:!0}),(0,t.jsx)("button",{type:"button",onClick:()=>W(!$),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:$?(0,t.jsx)(g.EyeOff,{className:"w-4 h-4"}):(0,t.jsx)(p.Eye,{className:"w-4 h-4"})})]})]}),D&&(0,t.jsx)("div",{className:"p-3 bg-red-50 text-red-700 rounded-lg text-sm",children:D}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)(i.Button,{type:"button",variant:"outline",onClick:()=>{S(!1),A({currentPassword:"",newPassword:"",confirmPassword:""}),R("")},className:"flex-1",children:"Cancel"}),(0,t.jsx)(i.Button,{type:"submit",className:"flex-1 bg-teal-600 hover:bg-teal-700",disabled:B,children:B?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Changing..."]}):"Change Password"})]})]})]})})]}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)(o.Card,{className:"p-8 text-center",children:[(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Please sign in to view your profile"}),(0,t.jsx)(n.default,{href:"/login",children:(0,t.jsx)(i.Button,{className:"bg-teal-600 hover:bg-teal-700",children:"Sign In"})})]})})}e.s(["default",()=>y],2153)}]);