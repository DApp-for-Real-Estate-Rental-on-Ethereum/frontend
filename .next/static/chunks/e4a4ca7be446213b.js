(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,42181,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(25715),r=e.i(18566),l=e.i(71667),i=e.i(87316),n=e.i(7486),c=e.i(78894),d=e.i(64659);function o({activeSection:e,onSectionChange:a}){let l=(0,r.useRouter)(),[o,m]=(0,s.useState)(null),x=[{id:"bookings",label:"Bookings",icon:i.Calendar,subSections:[{id:"paid",label:"Paid Bookings"},{id:"negotiations",label:"Pending Approvals"},{id:"current",label:"Current Bookings"},{id:"checkout-requests",label:"Checkout Requests"},{id:"calendar",label:"Calendar"}]},{id:"properties",label:"Properties",icon:n.Building2,subSections:[{id:"my-properties",label:"All Properties"},{id:"draft",label:"Draft"},{id:"pending-approval",label:"Pending Approval"},{id:"approved",label:"Approved"},{id:"disapproved",label:"Disapproved"},{id:"suspended",label:"Suspended"},{id:"hidden",label:"Hidden"},{id:"add-property",label:"Add New Property"}]},{id:"reclamations",label:"Reclamations",icon:c.AlertTriangle,subSections:[{id:"my-complaints",label:"My Complaints"},{id:"complaints-against-me",label:"Complaints Against Me"}]}];return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 mb-6 overflow-visible",children:(0,t.jsx)("div",{className:"flex items-stretch divide-x divide-gray-200",children:x.map(s=>{let r=s.icon,i=s.subSections.some(t=>t.id===e),n=o===s.id;return(0,t.jsxs)("div",{className:"flex-1 relative overflow-visible",children:[(0,t.jsx)("button",{onClick:()=>{var e;o===(e=s.id)?m(null):m(e)},className:`w-full px-4 py-3 text-center transition-colors ${i?"bg-teal-600 text-white":"hover:bg-gray-50"}`,children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-1.5",children:[(0,t.jsx)(r,{className:`w-4 h-4 ${i?"text-white":"text-gray-600"}`}),(0,t.jsx)("span",{className:`text-xs font-semibold ${i?"text-white":"text-gray-900"}`,children:s.label}),(0,t.jsx)(d.ChevronDown,{className:`w-3 h-3 transition-transform ${n?"rotate-180":""} ${i?"text-white":"text-gray-600"}`})]})}),n&&(0,t.jsx)("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 shadow-xl z-[100] rounded-b-lg mt-1",children:(0,t.jsx)("div",{className:"py-1",children:s.subSections.map(s=>(0,t.jsx)("button",{onClick:()=>(e=>{if("add-property"===e){l.push("/post-property"),m(null);return}a(e),m(null)})(s.id),className:`w-full px-4 py-2.5 text-left text-xs transition-colors ${e===s.id?"bg-teal-50 text-teal-700 font-semibold":"text-gray-700 hover:bg-gray-50"}`,children:s.label},s.id))})})]},s.id)})})})}e.i(47167);var m=e.i(70065),x=e.i(67881),h=e.i(94179),p=e.i(31278),g=e.i(3116),u=e.i(69638),y=e.i(46897),j=e.i(86536),N=e.i(37727),b=e.i(43432),f=e.i(57688),v=e.i(30374),w=e.i(46696);function C({ownerId:e,onUpdate:n}){let d=(0,r.useRouter)(),{user:o}=(0,a.useAuth)(),[C,k]=(0,s.useState)([]),[D,P]=(0,s.useState)(!0),[S,A]=(0,s.useState)(""),[I,B]=(0,s.useState)({}),[E,T]=(0,s.useState)(!1),[F,O]=(0,s.useState)(null),[M,L]=(0,s.useState)({}),[R,$]=(0,s.useState)({}),[U,H]=(0,s.useState)({}),[_,z]=(0,s.useState)({}),[W,q]=(0,s.useState)({});(0,s.useEffect)(()=>{K()},[e]),(0,s.useEffect)(()=>{let e=C.filter(e=>"CONFIRMED"===e.status||"TENANT_CHECKED_OUT"===e.status||"COMPLETED"===e.status);C.length>0&&Y(),e.length>0&&(J(e),V(e))},[C]);let V=async e=>{try{Array.from(new Set(e.map(e=>e.userId))).forEach(async e=>{if(e)try{if(H(t=>({...t,[e]:!0})),l.apiClient.risk&&l.apiClient.risk.getTenantRiskScore){let t=await l.apiClient.risk.getTenantRiskScore(Number(e));$(s=>({...s,[e]:t}))}}catch(t){console.error(`Failed to fetch risk score for tenant ${e}`,t)}finally{H(t=>({...t,[e]:!1}))}})}catch(e){console.error("Error fetching risk scores",e)}},K=async()=>{try{P(!0),A("");let t=await l.apiClient.bookings.getCurrentBookingsByOwner(parseInt(String(e))),s=await Promise.all(t.map(async e=>{try{let t=await l.apiClient.properties.getById(String(e.propertyId));return{...e,property:t}}catch{return{...e,property:void 0}}}));k(s)}catch(e){A(e.message||"Failed to load current bookings")}finally{P(!1)}},X=async t=>{if(window.confirm("Are you sure the tenant has checked out?")){B(e=>({...e,[t]:!0})),A("");try{let s=C.find(e=>e.id===t);if(!s)return void A("Booking not found");if("TENANT_CHECKED_OUT"!==s.status)return void A(`Cannot confirm checkout. Booking status must be TENANT_CHECKED_OUT, but it is ${s.status}`);let a=parseInt(String(e));if(isNaN(a))throw Error("Invalid owner ID. Please refresh the page and try again.");await l.apiClient.bookings.ownerConfirmCheckout(t,a),w.toast.success("Checkout confirmed successfully");try{console.log("ðŸ”— Attempting to complete booking on blockchain..."),await l.apiClient.payments.completeBooking(t),console.log("âœ… Booking completed successfully on blockchain"),w.toast.success("Funds distributed successfully on blockchain")}catch(t){let e=t?.message||t?.toString()||"Unknown error";e.includes("Contract not found")||e.includes("Please deploy")?e="Blockchain contract not found. Please contact support to deploy the contract.":e.includes("Cannot verify contract")?e="Cannot connect to blockchain. Please ensure Hardhat node is running.":e.includes("Authorization failed")||e.includes("Not admin")?e="Authorization failed. Please check blockchain configuration.":e.length>100&&(e=e.substring(0,100)+"..."),console.error("âŒ Blockchain completion failed:",e),w.toast.error(`Blockchain transaction failed: ${e}`),A(`Checkout confirmed, but blockchain transaction failed: ${e}`)}await K(),n&&n()}catch(e){A(e.message||"Failed to confirm checkout")}finally{B(e=>({...e,[t]:!1}))}}},Y=async()=>{if(o?.id)try{let e={},t=parseInt(String(o.id));await Promise.all(C.map(async s=>{try{let a=await l.apiClient.reclamations.getByBookingIdAndComplainant(s.id,t);a&&(e[s.id]=a)}catch(e){}})),L(e)}catch(e){}},G=e=>{d.push(`/reclamation/${e}?isHost=true`)},J=async e=>{try{let t={};await Promise.all(e.map(async e=>{try{q(t=>({...t,[e.id]:!0}));let s=e.userId;try{let a=await l.apiClient.users.getById(s);if(a&&a.phoneNumber){let s=String(a.phoneNumber);t[e.id]=s}else t[e.id]=null}catch(s){t[e.id]=null}}catch(s){t[e.id]=null}finally{q(t=>({...t,[e.id]:!1}))}})),z(e=>({...e,...t}))}catch(e){}},Q=async(e,t)=>{if(window.confirm("Are you sure you want to remove this reclamation?")){if(!o?.id)return void A("User not found");B(t=>({...t,[e]:!0})),A("");try{let s=parseInt(String(o.id));await l.apiClient.reclamations.delete(t,s),L(t=>{let s={...t};return delete s[e],s}),n&&n()}catch(e){A(e.message||"Failed to remove reclamation")}finally{B(t=>({...t,[e]:!1}))}}},Z=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return e}},ee=(e,t)=>{if(!e||!t)return 0;try{let s=new Date(e),a=new Date(t),r=Math.abs(a.getTime()-s.getTime());return Math.ceil(r/864e5)}catch{return 0}},et=e=>{if(!e?.propertyImages||0===e.propertyImages.length)return null;let t=e.propertyImages.find(e=>e.cover);return t?t.url:e.propertyImages[0].url},es=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/uploads")?`http://localhost:8081${e}`:e:"/houses_placeholder.png";return D?(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)(p.Loader2,{className:"h-12 w-12 animate-spin text-teal-600"}),(0,t.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading current bookings..."})]}):S?(0,t.jsxs)(m.Card,{className:"p-6 border-red-200 bg-red-50",children:[(0,t.jsx)("p",{className:"text-red-700",children:S}),(0,t.jsx)(x.Button,{onClick:K,variant:"outline",className:"mt-4",children:"Try Again"})]}):0===C.length?(0,t.jsxs)(m.Card,{className:"p-12 text-center",children:[(0,t.jsx)(i.Calendar,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No current bookings"}),(0,t.jsx)("p",{className:"text-gray-600",children:"You don't have any active bookings at the moment."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(e=>{let s=et(e.property),a=ee(e.checkInDate,e.checkOutDate),r=R[e.userId];return(0,t.jsxs)(m.Card,{className:"overflow-hidden hover:shadow-2xl transition-all duration-300",children:[(0,t.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-teal-100 to-teal-200 overflow-hidden",children:[s?(0,t.jsx)(f.default,{src:es(s),alt:e.property?.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(y.MapPin,{className:"w-16 h-16 text-teal-300"})}),(0,t.jsx)("div",{className:"absolute top-4 right-4 flex gap-2",children:(e=>{switch(e.toUpperCase()){case"CONFIRMED":return(0,t.jsx)(h.Badge,{className:"bg-green-100 text-green-800 border-green-200",children:"Confirmed"});case"TENANT_CHECKED_OUT":return(0,t.jsx)(h.Badge,{className:"bg-purple-100 text-purple-800 border-purple-200",children:"Checked Out"});case"COMPLETED":return(0,t.jsx)(h.Badge,{className:"bg-gray-100 text-gray-800 border-gray-200",children:"Completed"});default:return(0,t.jsx)(h.Badge,{className:"bg-gray-100 text-gray-800 border-gray-200",children:e})}})(e.status)}),(0,t.jsx)("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl px-4 py-2 shadow-lg",children:(0,t.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,t.jsx)("span",{className:"text-xl font-bold text-teal-600",children:e.totalPrice?.toFixed(4)||"N/A"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"MAD"})]})})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-1",children:e.property?.title||`Property ${e.propertyId}`}),e.property?.address&&(0,t.jsxs)("div",{className:"flex items-center text-gray-600 text-sm mb-4",children:[(0,t.jsx)(y.MapPin,{className:"w-4 h-4 mr-1.5 text-teal-600 flex-shrink-0"}),(0,t.jsxs)("span",{className:"line-clamp-1",children:[e.property.address.city,", ",e.property.address.country]})]}),r&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider block mb-1",children:"Tenant Risk"}),(e=>{if(!e)return null;let{risk_band:s,trust_score:a}=e,r="bg-gray-100 text-gray-800 border-gray-200",l=(0,t.jsx)(u.CheckCircle,{className:"w-3 h-3 mr-1"});switch(s){case"LOW":r="bg-green-100 text-green-800 border-green-200";break;case"MEDIUM":r="bg-yellow-100 text-yellow-800 border-yellow-200",l=(0,t.jsx)(c.AlertTriangle,{className:"w-3 h-3 mr-1"});break;case"HIGH":r="bg-orange-100 text-orange-800 border-orange-200",l=(0,t.jsx)(c.AlertTriangle,{className:"w-3 h-3 mr-1"});break;case"CRITICAL":r="bg-red-100 text-red-800 border-red-200",l=(0,t.jsx)(N.X,{className:"w-3 h-3 mr-1"})}return(0,t.jsxs)(h.Badge,{className:`${r} ml-2 flex items-center`,children:[l,"Trust: ",a,"/100 (",s,")"]})})(r)]}),(0,t.jsxs)("div",{className:"space-y-2 mb-4 pb-4 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(i.Calendar,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsx)("span",{children:"Check-in"})]}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:Z(e.checkInDate)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(i.Calendar,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsx)("span",{children:"Check-out"})]}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:Z(e.checkOutDate)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(g.Clock,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsx)("span",{children:"Duration"})]}),(0,t.jsxs)("span",{className:"font-semibold text-gray-900",children:[a," ",1===a?"night":"nights"]})]}),("CONFIRMED"===e.status||"TENANT_CHECKED_OUT"===e.status||"COMPLETED"===e.status)&&(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm pt-2 border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(b.Phone,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsx)("span",{children:"Tenant Phone"})]}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:W[e.id]?(0,t.jsx)(p.Loader2,{className:"w-4 h-4 animate-spin inline"}):_[e.id]?_[e.id]:"N/A"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:["TENANT_CHECKED_OUT"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Button,{onClick:()=>X(e.id),disabled:I[e.id],className:"w-full bg-green-600 hover:bg-green-700 text-white",children:I[e.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.CheckCircle,{className:"w-4 h-4 mr-2"}),"Confirm Checkout"]})}),M[e.id]?(0,t.jsx)(x.Button,{onClick:()=>Q(e.id,M[e.id].id),disabled:I[e.id],variant:"outline",className:"w-full border-red-300 text-red-700 hover:bg-red-50",children:I[e.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.X,{className:"w-4 h-4 mr-2"}),"Remove Reclamation"]})}):(0,t.jsxs)(x.Button,{onClick:()=>G(e.id),variant:"outline",className:"w-full border-orange-300 text-orange-700 hover:bg-orange-50",children:[(0,t.jsx)(c.AlertTriangle,{className:"w-4 h-4 mr-2"}),"Reclamation"]})]}),"CONFIRMED"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-full p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-center mb-2",children:(0,t.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"â³ Waiting for tenant to check out"})}),M[e.id]?(0,t.jsx)(x.Button,{onClick:()=>Q(e.id,M[e.id].id),disabled:I[e.id],variant:"outline",className:"w-full border-red-300 text-red-700 hover:bg-red-50",children:I[e.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.X,{className:"w-4 h-4 mr-2"}),"Remove Reclamation"]})}):(0,t.jsxs)(x.Button,{onClick:()=>G(e.id),variant:"outline",className:"w-full border-orange-300 text-orange-700 hover:bg-orange-50",children:[(0,t.jsx)(c.AlertTriangle,{className:"w-4 h-4 mr-2"}),"Reclamation"]})]}),(0,t.jsxs)(x.Button,{onClick:()=>{O(e),T(!0)},variant:"outline",className:"w-full",children:[(0,t.jsx)(j.Eye,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]})]},e.id)})}),(0,t.jsx)(v.Dialog,{open:E,onOpenChange:T,children:(0,t.jsxs)(v.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(v.DialogHeader,{children:(0,t.jsx)(v.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:"Booking Details"})}),F&&(0,t.jsxs)("div",{className:"space-y-6 mt-4",children:[F.property&&et(F.property)&&(0,t.jsx)("div",{className:"relative h-48 bg-gradient-to-br from-teal-100 to-teal-200 rounded-lg overflow-hidden",children:(0,t.jsx)(f.default,{src:es(et(F.property)),alt:F.property.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 80vw"})}),F.property&&(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:F.property.title}),F.property.address&&(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(y.MapPin,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsxs)("span",{children:[F.property.address.city,", ",F.property.address.country]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-in"}),(0,t.jsx)("p",{className:"text-base font-semibold text-gray-900",children:Z(F.checkInDate)})]}),(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-out"}),(0,t.jsx)("p",{className:"text-base font-semibold text-gray-900",children:Z(F.checkOutDate)})]})]}),(0,t.jsx)("div",{className:"p-4 bg-teal-50 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Duration"}),(0,t.jsxs)("span",{className:"text-lg font-bold text-teal-700",children:[ee(F.checkInDate,F.checkOutDate)," ",1===ee(F.checkInDate,F.checkOutDate)?"night":"nights"]})]})}),(0,t.jsx)("div",{className:"p-6 bg-gradient-to-br from-teal-50 to-teal-100 rounded-lg border-2 border-teal-200",children:(0,t.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Total Price"}),(0,t.jsxs)("span",{className:"text-xl font-bold text-teal-700",children:[F.totalPrice?.toFixed(0)||"N/A"," MAD"]})]})})]}),"TENANT_CHECKED_OUT"===F.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Button,{onClick:async()=>{T(!1),await X(F.id)},disabled:I[F.id],className:"w-full bg-green-600 hover:bg-green-700 text-white",children:I[F.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.CheckCircle,{className:"w-4 h-4 mr-2"}),"Confirm Checkout"]})}),M[F.id]?(0,t.jsx)(x.Button,{onClick:async()=>{T(!1),await Q(F.id,M[F.id].id)},disabled:I[F.id],variant:"outline",className:"w-full border-red-300 text-red-700 hover:bg-red-50",children:I[F.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.X,{className:"w-4 h-4 mr-2"}),"Remove Reclamation"]})}):(0,t.jsxs)(x.Button,{onClick:()=>{T(!1),G(F.id)},variant:"outline",className:"w-full border-orange-300 text-orange-700 hover:bg-orange-50",children:[(0,t.jsx)(c.AlertTriangle,{className:"w-4 h-4 mr-2"}),"Reclamation"]})]})]})]})})]})}function k({ownerId:e,onUpdate:n}){let d=(0,r.useRouter)(),{user:o}=(0,a.useAuth)(),[b,C]=(0,s.useState)([]),[k,D]=(0,s.useState)(!0),[P,S]=(0,s.useState)(""),[A,I]=(0,s.useState)({}),[B,E]=(0,s.useState)(!1),[T,F]=(0,s.useState)(null),[O,M]=(0,s.useState)({});(0,s.useEffect)(()=>{L()},[e]),(0,s.useEffect)(()=>{b.length>0&&$()},[b]);let L=async()=>{try{D(!0),S("");let t=(await l.apiClient.bookings.getCurrentBookingsByOwner(parseInt(String(e)))).filter(e=>"TENANT_CHECKED_OUT"===e.status),s=await Promise.all(t.map(async e=>{try{let t=await l.apiClient.properties.getById(String(e.propertyId));return{...e,property:t}}catch{return{...e,property:void 0}}}));C(s)}catch(e){S(e.message||"Failed to load checkout requests")}finally{D(!1)}},R=async t=>{if(window.confirm("Are you sure the tenant has checked out?")){I(e=>({...e,[t]:!0})),S("");try{let s=b.find(e=>e.id===t);if(!s)return void S("Booking not found");if("TENANT_CHECKED_OUT"!==s.status){let e=`Cannot confirm checkout. Booking status must be TENANT_CHECKED_OUT, but it is ${s.status}`;S(e),w.toast.error(e);return}let a=parseInt(String(e));if(isNaN(a))throw Error("Invalid owner ID. Please refresh the page and try again.");await l.apiClient.bookings.ownerConfirmCheckout(t,a);try{await l.apiClient.payments.completeBooking(t),w.toast.success("Booking completed successfully on blockchain")}catch(e){w.toast.warning("Booking marked as completed, but blockchain transaction failed. Please contact support.")}w.toast.success("Checkout confirmed successfully"),await L(),n&&n()}catch(t){let e=t.message||"Failed to confirm checkout";S(e),w.toast.error(e)}finally{I(e=>({...e,[t]:!1}))}}},$=async()=>{if(o?.id)try{let e={},t=parseInt(String(o.id));await Promise.all(b.map(async s=>{try{let a=await l.apiClient.reclamations.getByBookingIdAndComplainant(s.id,t);a&&(e[s.id]=a)}catch(e){}})),M(e)}catch(e){}},U=e=>{d.push(`/reclamation/${e}?isHost=true`)},H=async(e,t)=>{if(window.confirm("Are you sure you want to remove this reclamation?")){if(!o?.id)return void S("User not found");I(t=>({...t,[e]:!0})),S("");try{let s=parseInt(String(o.id));await l.apiClient.reclamations.delete(t,s),M(t=>{let s={...t};return delete s[e],s}),w.toast.success("Reclamation removed successfully"),n&&n()}catch(e){S(e.message||"Failed to remove reclamation"),w.toast.error(e.message||"Failed to remove reclamation")}finally{I(t=>({...t,[e]:!1}))}}},_=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return e}},z=(e,t)=>{if(!e||!t)return 0;try{let s=new Date(e),a=new Date(t),r=Math.abs(a.getTime()-s.getTime());return Math.ceil(r/864e5)}catch{return 0}},W=e=>{if(!e?.propertyImages||0===e.propertyImages.length)return null;let t=e.propertyImages.find(e=>e.cover);return t?t.url:e.propertyImages[0].url},q=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/uploads")?`http://localhost:8081${e}`:e:"/houses_placeholder.png";return k?(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)(p.Loader2,{className:"h-12 w-12 animate-spin text-teal-600"}),(0,t.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading checkout requests..."})]}):P&&!b.length?(0,t.jsxs)(m.Card,{className:"p-6 border-red-200 bg-red-50",children:[(0,t.jsx)("p",{className:"text-red-700",children:P}),(0,t.jsx)(x.Button,{onClick:L,variant:"outline",className:"mt-4",children:"Try Again"})]}):0===b.length?(0,t.jsxs)(m.Card,{className:"p-12 text-center",children:[(0,t.jsx)(u.CheckCircle,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No checkout requests"}),(0,t.jsx)("p",{className:"text-gray-600",children:"You don't have any bookings waiting for checkout confirmation."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(e=>{let s=W(e.property),a=z(e.checkInDate,e.checkOutDate);return(0,t.jsxs)(m.Card,{className:"overflow-hidden hover:shadow-2xl transition-all duration-300 border-2 border-purple-200",children:[(0,t.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-purple-100 to-purple-200 overflow-hidden",children:[s?(0,t.jsx)(f.default,{src:q(s),alt:e.property?.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(y.MapPin,{className:"w-16 h-16 text-purple-300"})}),(0,t.jsx)("div",{className:"absolute top-4 right-4",children:(0,t.jsx)(h.Badge,{className:"bg-purple-100 text-purple-800 border-purple-200",children:"Awaiting Confirmation"})}),(0,t.jsx)("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl px-4 py-2 shadow-lg",children:(0,t.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,t.jsx)("span",{className:"text-xl font-bold text-purple-600",children:e.totalPrice?.toFixed(4)||"N/A"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"MAD"})]})})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-1",children:e.property?.title||`Property ${e.propertyId}`}),e.property?.address&&(0,t.jsxs)("div",{className:"flex items-center text-gray-600 text-sm mb-4",children:[(0,t.jsx)(y.MapPin,{className:"w-4 h-4 mr-1.5 text-purple-600 flex-shrink-0"}),(0,t.jsxs)("span",{className:"line-clamp-1",children:[e.property.address.city,", ",e.property.address.country]})]}),(0,t.jsxs)("div",{className:"space-y-2 mb-4 pb-4 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(i.Calendar,{className:"w-4 h-4 mr-2 text-purple-600"}),(0,t.jsx)("span",{children:"Check-in"})]}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:_(e.checkInDate)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(i.Calendar,{className:"w-4 h-4 mr-2 text-purple-600"}),(0,t.jsx)("span",{children:"Check-out"})]}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:_(e.checkOutDate)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(g.Clock,{className:"w-4 h-4 mr-2 text-purple-600"}),(0,t.jsx)("span",{children:"Duration"})]}),(0,t.jsxs)("span",{className:"font-semibold text-gray-900",children:[a," ",1===a?"night":"nights"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(x.Button,{onClick:()=>R(e.id),disabled:A[e.id],className:"w-full bg-green-600 hover:bg-green-700 text-white",children:A[e.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.CheckCircle,{className:"w-4 h-4 mr-2"}),"Confirm Checkout"]})}),O[e.id]?(0,t.jsx)(x.Button,{onClick:()=>H(e.id,O[e.id].id),disabled:A[e.id],variant:"outline",className:"w-full border-red-300 text-red-700 hover:bg-red-50",children:A[e.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.X,{className:"w-4 h-4 mr-2"}),"Remove Reclamation"]})}):(0,t.jsxs)(x.Button,{onClick:()=>U(e.id),variant:"outline",className:"w-full border-orange-300 text-orange-700 hover:bg-orange-50",children:[(0,t.jsx)(c.AlertTriangle,{className:"w-4 h-4 mr-2"}),"Reclamation"]}),(0,t.jsxs)(x.Button,{onClick:()=>{F(e),E(!0)},variant:"outline",className:"w-full",children:[(0,t.jsx)(j.Eye,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]})]},e.id)})}),(0,t.jsx)(v.Dialog,{open:B,onOpenChange:E,children:(0,t.jsxs)(v.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(v.DialogHeader,{children:(0,t.jsx)(v.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:"Checkout Request Details"})}),T&&(0,t.jsxs)("div",{className:"space-y-6 mt-4",children:[T.property&&W(T.property)&&(0,t.jsx)("div",{className:"relative h-48 bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg overflow-hidden",children:(0,t.jsx)(f.default,{src:q(W(T.property)),alt:T.property.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 80vw"})}),T.property&&(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:T.property.title}),T.property.address&&(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(y.MapPin,{className:"w-4 h-4 mr-2 text-purple-600"}),(0,t.jsxs)("span",{children:[T.property.address.city,", ",T.property.address.country]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-in"}),(0,t.jsx)("p",{className:"text-base font-semibold text-gray-900",children:_(T.checkInDate)})]}),(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-out"}),(0,t.jsx)("p",{className:"text-base font-semibold text-gray-900",children:_(T.checkOutDate)})]})]}),(0,t.jsx)("div",{className:"p-4 bg-purple-50 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Duration"}),(0,t.jsxs)("span",{className:"text-lg font-bold text-purple-700",children:[z(T.checkInDate,T.checkOutDate)," ",1===z(T.checkInDate,T.checkOutDate)?"night":"nights"]})]})}),(0,t.jsx)("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg border-2 border-purple-200",children:(0,t.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Total Price"}),(0,t.jsxs)("span",{className:"text-xl font-bold text-purple-700",children:[T.totalPrice?.toFixed(0)||"N/A"," MAD"]})]})})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(x.Button,{onClick:async()=>{E(!1),await R(T.id)},disabled:A[T.id],className:"w-full bg-green-600 hover:bg-green-700 text-white",children:A[T.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.CheckCircle,{className:"w-4 h-4 mr-2"}),"Confirm Checkout"]})}),O[T.id]?(0,t.jsx)(x.Button,{onClick:async()=>{E(!1),await H(T.id,O[T.id].id)},disabled:A[T.id],variant:"outline",className:"w-full border-red-300 text-red-700 hover:bg-red-50",children:A[T.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.X,{className:"w-4 h-4 mr-2"}),"Remove Reclamation"]})}):(0,t.jsxs)(x.Button,{onClick:()=>{E(!1),U(T.id)},variant:"outline",className:"w-full border-orange-300 text-orange-700 hover:bg-orange-50",children:[(0,t.jsx)(c.AlertTriangle,{className:"w-4 h-4 mr-2"}),"Reclamation"]})]})]})]})})]})}var D=e.i(73884),P=e.i(75254);let S=(0,P.default)("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);function A({ownerId:e,onUpdate:a}){let[r,n]=(0,s.useState)([]),[c,d]=(0,s.useState)(!0),[o,N]=(0,s.useState)(""),[b,w]=(0,s.useState)({}),[C,k]=(0,s.useState)(!1),[P,A]=(0,s.useState)(null);(0,s.useEffect)(()=>{I()},[e]);let I=async()=>{try{d(!0),N("");let t=await l.apiClient.bookings.getPendingNegotiations(parseInt(String(e))),s=await Promise.all(t.map(async e=>{try{let t=await l.apiClient.properties.getById(String(e.propertyId));return{...e,property:t}}catch{return{...e,property:void 0}}}));n(s)}catch(e){N(e.message||"Failed to load pending negotiations")}finally{d(!1)}},B=async t=>{if(window.confirm("Are you sure you want to accept this negotiation?")){w(e=>({...e,[t]:!0})),N("");try{await l.apiClient.bookings.acceptNegotiation(t,parseInt(String(e))),await I(),a&&a()}catch(e){N(e.message||"Failed to accept negotiation")}finally{w(e=>({...e,[t]:!1}))}}},E=async t=>{if(window.confirm("Are you sure you want to reject this negotiation? The tenant can change the price.")){w(e=>({...e,[t]:!0})),N("");try{await l.apiClient.bookings.rejectNegotiation(t,parseInt(String(e))),await I(),a&&a()}catch(e){N(e.message||"Failed to reject negotiation")}finally{w(e=>({...e,[t]:!1}))}}},T=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return e}},F=(e,t)=>{if(!e||!t)return 0;try{let s=new Date(e),a=new Date(t),r=Math.abs(a.getTime()-s.getTime());return Math.ceil(r/864e5)}catch{return 0}},O=e=>{if(!e?.propertyImages||0===e.propertyImages.length)return null;let t=e.propertyImages.find(e=>e.cover);return t?t.url:e.propertyImages[0].url},M=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/uploads")?`http://localhost:8081${e}`:e:"/houses_placeholder.png";return c?(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)(p.Loader2,{className:"h-12 w-12 animate-spin text-teal-600"}),(0,t.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading pending negotiations..."})]}):o?(0,t.jsxs)(m.Card,{className:"p-6 border-red-200 bg-red-50",children:[(0,t.jsx)("p",{className:"text-red-700",children:o}),(0,t.jsx)(x.Button,{onClick:I,variant:"outline",className:"mt-4",children:"Try Again"})]}):0===r.length?(0,t.jsxs)(m.Card,{className:"p-12 text-center",children:[(0,t.jsx)(S,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No pending negotiations"}),(0,t.jsx)("p",{className:"text-gray-600",children:"You don't have any pending negotiation requests."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(e=>{let s=O(e.property),a=F(e.checkInDate,e.checkOutDate);return(0,t.jsxs)(m.Card,{className:"overflow-hidden hover:shadow-2xl transition-all duration-300",children:[(0,t.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-yellow-100 to-yellow-200 overflow-hidden",children:[s?(0,t.jsx)(f.default,{src:M(s),alt:e.property?.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(y.MapPin,{className:"w-16 h-16 text-yellow-300"})}),(0,t.jsx)("div",{className:"absolute top-4 right-4",children:(0,t.jsx)(h.Badge,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"Negotiation"})}),(0,t.jsxs)("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl px-4 py-2 shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,t.jsx)("span",{className:"text-xl font-bold text-yellow-600",children:e.totalPrice?.toFixed(4)||"N/A"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"ETH"})]}),e.requestedNegotiationPercent&&(0,t.jsxs)("p",{className:"text-xs text-yellow-600 font-medium mt-1",children:[e.requestedNegotiationPercent,"% discount"]})]})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-1",children:e.property?.title||`Property ${e.propertyId}`}),e.property?.address&&(0,t.jsxs)("div",{className:"flex items-center text-gray-600 text-sm mb-4",children:[(0,t.jsx)(y.MapPin,{className:"w-4 h-4 mr-1.5 text-teal-600 flex-shrink-0"}),(0,t.jsxs)("span",{className:"line-clamp-1",children:[e.property.address.city,", ",e.property.address.country]})]}),(0,t.jsxs)("div",{className:"space-y-2 mb-4 pb-4 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(i.Calendar,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsx)("span",{children:"Check-in"})]}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:T(e.checkInDate)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(i.Calendar,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsx)("span",{children:"Check-out"})]}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:T(e.checkOutDate)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(g.Clock,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsx)("span",{children:"Duration"})]}),(0,t.jsxs)("span",{className:"font-semibold text-gray-900",children:[a," ",1===a?"night":"nights"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(x.Button,{onClick:()=>B(e.id),disabled:b[e.id],className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:b[e.id]?(0,t.jsx)(p.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.CheckCircle,{className:"w-4 h-4 mr-2"}),"Accept"]})}),(0,t.jsx)(x.Button,{onClick:()=>E(e.id),disabled:b[e.id],variant:"destructive",className:"flex-1",children:b[e.id]?(0,t.jsx)(p.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.XCircle,{className:"w-4 h-4 mr-2"}),"Reject"]})})]}),(0,t.jsxs)(x.Button,{onClick:()=>{A(e),k(!0)},variant:"outline",className:"w-full",children:[(0,t.jsx)(j.Eye,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]})]},e.id)})}),(0,t.jsx)(v.Dialog,{open:C,onOpenChange:k,children:(0,t.jsxs)(v.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(v.DialogHeader,{children:(0,t.jsx)(v.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:"Negotiation Details"})}),P&&(0,t.jsxs)("div",{className:"space-y-6 mt-4",children:[P.property&&O(P.property)&&(0,t.jsx)("div",{className:"relative h-48 bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg overflow-hidden",children:(0,t.jsx)(f.default,{src:M(O(P.property)),alt:P.property.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 80vw"})}),P.property&&(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:P.property.title}),P.property.address&&(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(y.MapPin,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsxs)("span",{children:[P.property.address.city,", ",P.property.address.country]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-in"}),(0,t.jsx)("p",{className:"text-base font-semibold text-gray-900",children:T(P.checkInDate)})]}),(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-out"}),(0,t.jsx)("p",{className:"text-base font-semibold text-gray-900",children:T(P.checkOutDate)})]})]}),(0,t.jsx)("div",{className:"p-4 bg-teal-50 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Duration"}),(0,t.jsxs)("span",{className:"text-lg font-bold text-teal-700",children:[F(P.checkInDate,P.checkOutDate)," ",1===F(P.checkInDate,P.checkOutDate)?"night":"nights"]})]})}),(0,t.jsxs)("div",{className:"p-6 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg border-2 border-yellow-200",children:[(0,t.jsxs)("div",{className:"flex items-baseline justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Negotiated Price"}),(0,t.jsxs)("span",{className:"text-xl font-bold text-yellow-700",children:[P.totalPrice?.toFixed(4)||"N/A"," ETH"]})]}),P.requestedNegotiationPercent&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-yellow-200",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Negotiation"}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-yellow-600",children:[P.requestedNegotiationPercent,"%"]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)(x.Button,{onClick:async()=>{k(!1),await B(P.id)},disabled:b[P.id],className:"bg-green-600 hover:bg-green-700 text-white",children:b[P.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.CheckCircle,{className:"w-4 h-4 mr-2"}),"Accept"]})}),(0,t.jsx)(x.Button,{onClick:async()=>{k(!1),await E(P.id)},disabled:b[P.id],variant:"destructive",children:b[P.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.XCircle,{className:"w-4 h-4 mr-2"}),"Reject"]})})]})]})]})})]})}var I=e.i(88511),B=e.i(27612),E=e.i(48433),T=e.i(34972),F=e.i(61911),O=e.i(53475),M=e.i(70273);let L=(0,P.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var R=e.i(77705),$=e.i(87596);function U({propertyId:e,onClose:a,onSuccess:r}){let[i,n]=(0,s.useState)(null),[c,d]=(0,s.useState)(!0),[o,m]=(0,s.useState)("");return(0,s.useEffect)(()=>{let t=async()=>{try{d(!0),m("");let t=await l.apiClient.properties.getById(e);n(t)}catch(e){m(e.message||"Failed to load property")}finally{d(!1)}};e&&t()},[e]),(0,t.jsx)(v.Dialog,{open:!0,onOpenChange:a,children:(0,t.jsxs)(v.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(v.DialogHeader,{children:(0,t.jsx)(v.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:"Edit Property"})}),c?(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)(p.Loader2,{className:"h-8 w-8 animate-spin text-teal-600"}),(0,t.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading property data..."})]}):o?(0,t.jsxs)("div",{className:"p-6 border border-red-200 bg-red-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-red-700 mb-4",children:o}),(0,t.jsx)(x.Button,{onClick:a,variant:"outline",children:"Close"})]}):i?(0,t.jsx)($.AddPropertyForm,{propertyId:e,propertyData:i,isEditMode:!0,onSuccess:()=>{r()}},e):null]})})}function H({userId:e,onUpdate:a,filter:i="all"}){let n,c,d;(0,r.useRouter)();let[o,g]=(0,s.useState)([]),[u,b]=(0,s.useState)([]),[w,C]=(0,s.useState)(!0),[k,D]=(0,s.useState)(""),[P,S]=(0,s.useState)({}),[A,H]=(0,s.useState)(!1),[_,z]=(0,s.useState)(null),[W,q]=(0,s.useState)(!1),[V,K]=(0,s.useState)(null),[X,Y]=(0,s.useState)(!1),[G,J]=(0,s.useState)(!1),[Q,Z]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(""),[es,ea]=(0,s.useState)(""),[er,el]=(0,s.useState)(!1),[ei,en]=(0,s.useState)(""),[ec,ed]=(0,s.useState)(null);(0,s.useEffect)(()=>{eo()},[e]),(0,s.useEffect)(()=>{em()},[o,i]),(0,s.useEffect)(()=>{W||(et(""),ea(""),ed(null),en(""),el(!1))},[W]);let eo=async()=>{try{C(!0),D("");let e=await l.apiClient.properties.getMyProperties();if(!Array.isArray(e)){D("Invalid response format from server"),g([]);return}g(e)}catch(e){D(e.message||"Failed to load properties"),g([])}finally{C(!1)}},em=()=>{let e=[...o];"draft"===i?e=e.filter(e=>"DRAFT"===e.status):"pending-approval"===i?e=e.filter(e=>"PENDING_APPROVAL"===e.status):"approved"===i?e=e.filter(e=>"APPROVED"===e.status):"disapproved"===i?e=e.filter(e=>"DISAPPROVED"===e.status):"suspended"===i?e=e.filter(e=>"SUSPENDED"===e.status):"hidden"===i&&(e=e.filter(e=>"HIDDEN"===e.status)),b(e)},ex=async e=>{alert("Delete functionality is currently disabled.")},eh=async e=>{S(t=>({...t,[`submit-${e}`]:!0})),D("");try{await l.apiClient.properties.submitForApproval(e),await eo(),a&&a()}catch(e){D(e.message||"Failed to submit property for approval")}finally{S(t=>({...t,[`submit-${e}`]:!1}))}},ep=async e=>{if(window.confirm("Are you sure you want to cancel the approval request? The property will be moved back to draft.")){S(t=>({...t,[`cancel-${e}`]:!0})),D("");try{await l.apiClient.properties.cancelApprovalRequest(e),await eo(),a&&a()}catch(e){D(e.message||"Failed to cancel approval request")}finally{S(t=>({...t,[`cancel-${e}`]:!1}))}}},eg=async(e,t)=>{S(t=>({...t,[`hide-${e}`]:!0})),D("");try{await l.apiClient.properties.hide(e,t),await eo(),a&&a()}catch(e){D(e.message||`Failed to ${t?"hide":"show"} property`)}finally{S(t=>({...t,[`hide-${e}`]:!1}))}},eu=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/uploads")?`http://localhost:8081${e}`:e:"/houses_placeholder.png",ey=e=>{let s={DRAFT:{label:"Draft",className:"bg-gray-100 text-gray-800 border-gray-200"},PENDING_APPROVAL:{label:"Pending Approval",className:"bg-yellow-100 text-yellow-800 border-yellow-200"},APPROVED:{label:"Approved",className:"bg-green-100 text-green-800 border-green-200"},SUSPENDED:{label:"Suspended",className:"bg-red-100 text-red-800 border-red-200"},HIDDEN:{label:"Hidden",className:"bg-gray-100 text-gray-800 border-gray-200"},VISIBLE_ONLY_FOR_TENANTS:{label:"Visible for Tenants",className:"bg-blue-100 text-blue-800 border-blue-200"},PENDING_DELETE:{label:"Pending Delete",className:"bg-orange-100 text-orange-800 border-orange-200"},DISAPPROVED:{label:"Disapproved",className:"bg-red-100 text-red-800 border-red-200"},WAITING_FOR_UPDATE:{label:"Waiting for Update",className:"bg-yellow-100 text-yellow-800 border-yellow-200"}}[e.toUpperCase()]||{label:e,className:"bg-gray-100 text-gray-800 border-gray-200"};return(0,t.jsx)(h.Badge,{className:s.className,children:s.label})},ej=async()=>{if(V){if(en(""),ed(null),!ee||!es)return void en("Please select both check-in and check-out dates.");if(ee>=es)return void en("Check-out date must be after check-in date.");try{el(!0);let e=await l.apiClient.properties.predictPrice(V.id,ee,es);ed(e)}catch(e){en(e?.message||"Failed to get AI price suggestion")}finally{el(!1)}}};return w?(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)(p.Loader2,{className:"h-12 w-12 animate-spin text-teal-600"}),(0,t.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading properties..."})]}):k?(0,t.jsxs)(m.Card,{className:"p-6 border-red-200 bg-red-50",children:[(0,t.jsx)("p",{className:"text-red-700",children:k}),(0,t.jsx)(x.Button,{onClick:eo,variant:"outline",className:"mt-4",children:"Try Again"})]}):(0,t.jsxs)("div",{children:[0===u.length?(0,t.jsxs)(m.Card,{className:"p-12 text-center",children:[(0,t.jsx)(y.MapPin,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:0===o.length?"No properties yet":"No properties found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:0===o.length?"Start by adding your first property!":`No properties with status: ${i}`})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(e=>{let s,a,r=(e=>{if(!e.propertyImages||0===e.propertyImages.length)return null;let t=e.propertyImages.find(e=>e.cover);return t?t.url:e.propertyImages[0].url})(e);return(0,t.jsxs)(m.Card,{className:"overflow-hidden hover:shadow-2xl transition-all duration-300",children:[(0,t.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-teal-100 to-teal-200 overflow-hidden",children:[r?(0,t.jsx)(f.default,{src:eu(r),alt:e.title,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(y.MapPin,{className:"w-16 h-16 text-teal-300"})}),(0,t.jsx)("div",{className:"absolute top-4 right-4",children:ey(e.status)}),(0,t.jsx)("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl px-4 py-2 shadow-lg",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,t.jsx)("span",{className:"text-xl font-bold text-teal-600",children:e.dailyPrice?.toFixed(4)||e.price?.toFixed(4)||"N/A"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"MAD/day"})]}),e.depositAmount&&e.depositAmount>0&&(0,t.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-orange-600",children:e.depositAmount.toFixed(4)}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"MAD deposit"})]})]})})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-1",children:e.title}),e.address&&(0,t.jsxs)("div",{className:"flex items-center text-gray-600 text-sm mb-4",children:[(0,t.jsx)(y.MapPin,{className:"w-4 h-4 mr-1.5 text-teal-600 flex-shrink-0"}),(0,t.jsxs)("span",{className:"line-clamp-1",children:[e.address.city,", ",e.address.country]})]}),(0,t.jsxs)("div",{className:"space-y-2 mb-4 pb-4 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Price"}),(0,t.jsxs)("span",{className:"font-semibold text-teal-600",children:[e.dailyPrice?.toFixed(0)||e.price?.toFixed(0)||"N/A"," MAD/day"]})]}),e.depositAmount&&e.depositAmount>0&&(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Deposit"}),(0,t.jsxs)("span",{className:"font-semibold text-orange-600",children:[e.depositAmount.toFixed(0)," MAD"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Capacity"}),(0,t.jsxs)("span",{className:"font-semibold text-gray-900",children:[e.capacity," guests"]})]}),e.numberOfBedrooms&&(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Bedrooms"}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:e.numberOfBedrooms})]}),e.numberOfBathrooms&&(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Bathrooms"}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:e.numberOfBathrooms})]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:(s=e.status.toUpperCase(),(a=[]).push((0,t.jsxs)(x.Button,{onClick:()=>{z(e.id),H(!0)},variant:"outline",size:"sm",className:"text-xs",children:[(0,t.jsx)(I.Edit,{className:"w-3 h-3 mr-1"}),"Edit"]},"edit")),a.push((0,t.jsxs)(x.Button,{onClick:()=>{K(e),q(!0)},variant:"outline",size:"sm",className:"text-xs",children:[(0,t.jsx)(j.Eye,{className:"w-3 h-3 mr-1"}),"View"]},"view")),"DRAFT"===s?a.push((0,t.jsxs)(x.Button,{onClick:()=>eh(e.id),disabled:P[`submit-${e.id}`],className:"bg-teal-600 hover:bg-teal-700 text-white text-xs",size:"sm",children:[P[`submit-${e.id}`]?(0,t.jsx)(p.Loader2,{className:"w-3 h-3 mr-1 animate-spin"}):(0,t.jsx)(L,{className:"w-3 h-3 mr-1"}),"Submit for Approval"]},"submit")):"PENDING_APPROVAL"===s?a.push((0,t.jsxs)(x.Button,{onClick:()=>ep(e.id),disabled:P[`cancel-${e.id}`],variant:"outline",size:"sm",className:"text-xs",children:[P[`cancel-${e.id}`]?(0,t.jsx)(p.Loader2,{className:"w-3 h-3 mr-1 animate-spin"}):(0,t.jsx)(N.X,{className:"w-3 h-3 mr-1"}),"Cancel Request"]},"cancel")):"APPROVED"===s?a.push((0,t.jsxs)(x.Button,{onClick:()=>eg(e.id,!0),disabled:P[`hide-${e.id}`],variant:"outline",size:"sm",className:"text-xs",children:[P[`hide-${e.id}`]?(0,t.jsx)(p.Loader2,{className:"w-3 h-3 mr-1 animate-spin"}):(0,t.jsx)(R.EyeOff,{className:"w-3 h-3 mr-1"}),"Hide"]},"hide")):"DISAPPROVED"===s?a.push((0,t.jsxs)(x.Button,{onClick:()=>eh(e.id),disabled:P[`submit-${e.id}`],className:"bg-teal-600 hover:bg-teal-700 text-white text-xs",size:"sm",children:[P[`submit-${e.id}`]?(0,t.jsx)(p.Loader2,{className:"w-3 h-3 mr-1 animate-spin"}):(0,t.jsx)(L,{className:"w-3 h-3 mr-1"}),"Resubmit for Approval"]},"resubmit")):"HIDDEN"===s&&a.push((0,t.jsxs)(x.Button,{onClick:()=>eg(e.id,!1),disabled:P[`hide-${e.id}`],className:"bg-teal-600 hover:bg-teal-700 text-white text-xs",size:"sm",children:[P[`hide-${e.id}`]?(0,t.jsx)(p.Loader2,{className:"w-3 h-3 mr-1 animate-spin"}):(0,t.jsx)(j.Eye,{className:"w-3 h-3 mr-1"}),"Show"]},"show")),a.push((0,t.jsxs)(x.Button,{onClick:()=>ex(e.id),disabled:P[e.id],variant:"destructive",size:"sm",className:"text-xs",children:[P[e.id]?(0,t.jsx)(p.Loader2,{className:"w-3 h-3 mr-1 animate-spin"}):(0,t.jsx)(B.Trash2,{className:"w-3 h-3 mr-1"}),"Delete"]},"delete")),a)})]})]},e.id)})}),(0,t.jsx)(v.Dialog,{open:X,onOpenChange:Y,children:(0,t.jsxs)(v.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(v.DialogHeader,{children:(0,t.jsx)(v.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:"Add New Property"})}),(0,t.jsx)($.AddPropertyForm,{isEditMode:!1,onSuccess:()=>{Y(!1),eo(),a&&a()}})]})}),A&&_&&(0,t.jsx)(U,{propertyId:_,onClose:()=>{H(!1),z(null)},onSuccess:()=>{H(!1),z(null),eo().then(()=>{}),a&&a()}}),(0,t.jsx)(v.Dialog,{open:W,onOpenChange:q,children:(0,t.jsxs)(v.DialogContent,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(v.DialogHeader,{children:(0,t.jsx)(v.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:"Property Details"})}),V&&(0,t.jsxs)("div",{className:"space-y-6 mt-4",children:[(c=(n=(e=>{if(!e.propertyImages||0===e.propertyImages.length)return[];let t=e.propertyImages.find(e=>e.cover),s=e.propertyImages.filter(e=>!e.cover);return t?[t,...s]:e.propertyImages})(V))[0],d=n.slice(1,5),n.length>0?(0,t.jsxs)("div",{className:"grid grid-cols-4 grid-rows-2 gap-3 h-[400px]",children:[(0,t.jsx)("div",{className:"col-span-2 row-span-2 relative rounded-l-2xl overflow-hidden bg-gray-200",children:(0,t.jsx)(f.default,{src:eu(c?.url),alt:V.title,fill:!0,className:"object-cover hover:scale-105 transition-transform duration-300",sizes:"(max-width: 768px) 100vw, 50vw"})}),d.length>0?d.map((e,s)=>(0,t.jsx)("div",{className:`relative overflow-hidden bg-gray-200 ${1===s||3===s?"rounded-r-2xl":""}`,children:(0,t.jsx)(f.default,{src:eu(e.url),alt:`${V.title} ${s+2}`,fill:!0,className:"object-cover hover:scale-105 transition-transform duration-300",sizes:"(max-width: 768px) 50vw, 25vw"})},e.id||s)):Array.from({length:Math.min(4,4-d.length)}).map((e,s)=>(0,t.jsx)("div",{className:"relative overflow-hidden bg-gray-200 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:"No image"})},`placeholder-${s}`))]}):(0,t.jsx)("div",{className:"relative w-full h-[400px] rounded-2xl overflow-hidden bg-gray-200 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(y.MapPin,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No images available"})]})})),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 pb-6 border-b flex-wrap",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(F.Users,{className:"w-4 h-4 text-teal-600"}),V.capacity," guest",V.capacity>1?"s":""]}),V.numberOfBedrooms&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"Â·"}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(E.Bed,{className:"w-4 h-4 text-teal-600"}),V.numberOfBedrooms," bedroom",V.numberOfBedrooms>1?"s":""]})]}),V.numberOfBeds&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"Â·"}),(0,t.jsxs)("span",{children:[V.numberOfBeds," bed",V.numberOfBeds>1?"s":""]})]}),V.numberOfBathrooms&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"Â·"}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(T.Bath,{className:"w-4 h-4 text-teal-600"}),V.numberOfBathrooms," bath",V.numberOfBathrooms>1?"s":""]})]}),(0,t.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,t.jsx)(M.Star,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),(0,t.jsx)("span",{className:"text-lg font-semibold",children:"4.8"}),(0,t.jsx)("span",{className:"text-gray-500",children:"Â· 4 reviews"})]})]}),(0,t.jsxs)("div",{className:"pb-6 border-b",children:[(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsx)("span",{className:"text-3xl font-bold text-gray-900",children:V.dailyPrice?`${V.dailyPrice}`:V.price?`${V.price}`:"N/A"}),(0,t.jsx)("span",{className:"text-lg font-semibold text-teal-600",children:"MAD"}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"/day"})]}),(0,t.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:"AI Price Suggestion (per night)"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600",children:"Check-in date"}),(0,t.jsx)("input",{type:"date",value:ee,onChange:e=>et(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-600"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600",children:"Check-out date"}),(0,t.jsx)("input",{type:"date",value:es,onChange:e=>ea(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-600"})]}),(0,t.jsx)("button",{type:"button",onClick:ej,disabled:er,className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-teal-600 text-white text-sm font-semibold hover:bg-teal-700 disabled:opacity-60 disabled:cursor-not-allowed",children:er?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"w-4 h-4 animate-spin"}),"Getting suggestion..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.Star,{className:"w-4 h-4"}),"Get AI suggestion"]})})]}),ei&&(0,t.jsx)("p",{className:"text-xs text-red-600",children:ei}),ec&&(0,t.jsxs)("div",{className:"mt-2 rounded-lg border border-teal-200 bg-teal-50 p-3 text-xs text-gray-800 space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,t.jsxs)("span",{className:"font-semibold text-teal-700",children:[ec.predictedPriceMad.toFixed(0)," MAD"]}),(0,t.jsxs)("span",{className:"text-gray-500",children:["â‰ˆ ",ec.predictedPriceUsd.toFixed(2)," USD / night"]})]}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Confidence interval: ",ec.confidenceIntervalLower.toFixed(0)," â€“"," ",ec.confidenceIntervalUpper.toFixed(0)," MAD"]}),"number"==typeof ec.currentPriceMad&&(0,t.jsxs)("p",{className:"text-gray-600",children:["Current price (platform): ",ec.currentPriceMad.toFixed(0)," MAD"," ","number"==typeof ec.priceDifferencePercent&&(0,t.jsxs)("span",{className:"ml-1",children:["(",ec.priceDifferencePercent.toFixed(2),"%)"]})]}),ec.recommendation&&(0,t.jsxs)("p",{className:"font-semibold text-teal-800",children:["Recommendation: ",ec.recommendation]}),(0,t.jsxs)("p",{className:"text-gray-500",children:["Model ",ec.modelVersion," â€¢ ",ec.city,", ",ec.season]})]})]})]}),V.address&&(0,t.jsx)("div",{className:"pb-6 border-b",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[(0,t.jsx)(y.MapPin,{className:"w-5 h-5 text-teal-600"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-semibold",children:[V.address.city,", ",V.address.country]}),V.address.address&&(0,t.jsx)("p",{className:"text-sm text-gray-600",children:V.address.address})]})]})}),(0,t.jsxs)("div",{className:"pb-6 border-b",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Description"}),(0,t.jsx)("div",{className:`text-gray-700 leading-relaxed ${!G?"line-clamp-6":""}`,children:(0,t.jsx)("p",{className:"whitespace-pre-line",children:V.description})}),V.description&&V.description.length>200&&(0,t.jsx)("button",{onClick:()=>J(!G),className:"mt-4 text-teal-600 font-semibold underline hover:text-teal-700",children:G?"Show less":"Show more"})]}),V.amenities&&V.amenities.length>0&&(0,t.jsxs)("div",{className:"pb-6 border-b",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"What this place offers"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-y-4",children:(Q?V.amenities:V.amenities.slice(0,8)).map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 text-gray-700",children:[(0,t.jsx)(O.Wifi,{className:"w-5 h-5 text-teal-600"}),(0,t.jsx)("span",{children:e.name})]},e.id))}),V.amenities.length>8&&(0,t.jsx)("button",{onClick:()=>Z(!Q),className:"mt-4 px-6 py-2 border border-gray-900 rounded-lg hover:bg-gray-50 transition-colors",children:Q?"Show less amenities":`Show all ${V.amenities.length} amenities`})]}),V.type&&(0,t.jsxs)("div",{className:"pb-6 border-b",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Property Type"}),(0,t.jsx)("p",{className:"text-gray-700",children:V.type.type})]}),(0,t.jsxs)("div",{className:"pb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Status"}),(0,t.jsx)("div",{children:ey(V.status)})]})]})]})})]})}function _({ownerId:e}){let[a,r]=(0,s.useState)([]),[n,c]=(0,s.useState)(!0),[d,o]=(0,s.useState)(""),[N,w]=(0,s.useState)(!1),[C,k]=(0,s.useState)(null),[D,P]=(0,s.useState)({}),[S,A]=(0,s.useState)({});(0,s.useEffect)(()=>{I()},[e]);let I=async()=>{try{c(!0),o("");let t=await l.apiClient.bookings.getConfirmedBookingsByOwner(parseInt(String(e))),s=await Promise.all(t.map(async e=>{try{let t=await l.apiClient.properties.getById(String(e.propertyId));return{...e,property:t}}catch{return{...e,property:void 0}}}));r(s);let a=s.filter(e=>"CONFIRMED"===e.status||"TENANT_CHECKED_OUT"===e.status||"COMPLETED"===e.status);a.length>0&&await B(a)}catch(e){o(e.message||"Failed to load paid bookings")}finally{c(!1)}},B=async e=>{try{let t={};await Promise.all(e.map(async e=>{try{A(t=>({...t,[e.id]:!0}));let s=e.userId;try{let a=await l.apiClient.users.getById(s);if(a&&a.phoneNumber){let s=String(a.phoneNumber);t[e.id]=s}else t[e.id]=null}catch(s){t[e.id]=null}}catch(s){t[e.id]=null}finally{A(t=>({...t,[e.id]:!1}))}})),P(e=>({...e,...t}))}catch(e){}},E=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return e}},T=(e,t)=>{if(!e||!t)return 0;try{let s=new Date(e),a=new Date(t),r=Math.abs(a.getTime()-s.getTime());return Math.ceil(r/864e5)}catch{return 0}},F=e=>{if(!e?.propertyImages||0===e.propertyImages.length)return null;let t=e.propertyImages.find(e=>e.cover);return t?t.url:e.propertyImages[0].url},O=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/uploads")?`http://localhost:8081${e}`:e:"/houses_placeholder.png";return n?(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)(p.Loader2,{className:"h-12 w-12 animate-spin text-teal-600"}),(0,t.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading paid bookings..."})]}):d?(0,t.jsxs)(m.Card,{className:"p-6 border-red-200 bg-red-50",children:[(0,t.jsx)("p",{className:"text-red-700",children:d}),(0,t.jsx)(x.Button,{onClick:I,variant:"outline",className:"mt-4",children:"Try Again"})]}):0===a.length?(0,t.jsxs)(m.Card,{className:"p-12 text-center",children:[(0,t.jsx)(u.CheckCircle,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No paid bookings"}),(0,t.jsx)("p",{className:"text-gray-600",children:"You don't have any confirmed paid bookings."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>{let s=F(e.property),a=T(e.checkInDate,e.checkOutDate);return(0,t.jsxs)(m.Card,{className:"overflow-hidden hover:shadow-2xl transition-all duration-300",children:[(0,t.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-green-100 to-green-200 overflow-hidden",children:[s?(0,t.jsx)(f.default,{src:O(s),alt:e.property?.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(y.MapPin,{className:"w-16 h-16 text-green-300"})}),(0,t.jsx)("div",{className:"absolute top-4 right-4",children:(0,t.jsx)(h.Badge,{className:"bg-green-100 text-green-800 border-green-200",children:"Paid"})}),(0,t.jsx)("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl px-4 py-2 shadow-lg",children:(0,t.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,t.jsx)("span",{className:"text-xl font-bold text-green-600",children:e.totalPrice?.toFixed(4)||"N/A"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"MAD"})]})})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-1",children:e.property?.title||`Property ${e.propertyId}`}),e.property?.address&&(0,t.jsxs)("div",{className:"flex items-center text-gray-600 text-sm mb-4",children:[(0,t.jsx)(y.MapPin,{className:"w-4 h-4 mr-1.5 text-teal-600 flex-shrink-0"}),(0,t.jsxs)("span",{className:"line-clamp-1",children:[e.property.address.city,", ",e.property.address.country]})]}),(0,t.jsxs)("div",{className:"space-y-2 mb-4 pb-4 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(i.Calendar,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsx)("span",{children:"Check-in"})]}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:E(e.checkInDate)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(i.Calendar,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsx)("span",{children:"Check-out"})]}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:E(e.checkOutDate)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(g.Clock,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsx)("span",{children:"Duration"})]}),(0,t.jsxs)("span",{className:"font-semibold text-gray-900",children:[a," ",1===a?"night":"nights"]})]}),("CONFIRMED"===e.status||"TENANT_CHECKED_OUT"===e.status||"COMPLETED"===e.status)&&(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm pt-2 border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(b.Phone,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsx)("span",{children:"Tenant Phone"})]}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:S[e.id]?(0,t.jsx)(p.Loader2,{className:"w-4 h-4 animate-spin inline"}):D[e.id]?D[e.id]:"N/A"})]})]}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:(0,t.jsxs)(x.Button,{onClick:()=>{k(e),w(!0)},variant:"outline",className:"w-full",children:[(0,t.jsx)(j.Eye,{className:"w-4 h-4 mr-2"}),"View Details"]})})]})]},e.id)})}),(0,t.jsx)(v.Dialog,{open:N,onOpenChange:w,children:(0,t.jsxs)(v.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(v.DialogHeader,{children:(0,t.jsx)(v.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:"Booking Details"})}),C&&(0,t.jsxs)("div",{className:"space-y-6 mt-4",children:[C.property&&F(C.property)&&(0,t.jsx)("div",{className:"relative h-48 bg-gradient-to-br from-green-100 to-green-200 rounded-lg overflow-hidden",children:(0,t.jsx)(f.default,{src:O(F(C.property)),alt:C.property.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 80vw"})}),C.property&&(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:C.property.title}),C.property.address&&(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(y.MapPin,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsxs)("span",{children:[C.property.address.city,", ",C.property.address.country]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-in"}),(0,t.jsx)("p",{className:"text-base font-semibold text-gray-900",children:E(C.checkInDate)})]}),(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-out"}),(0,t.jsx)("p",{className:"text-base font-semibold text-gray-900",children:E(C.checkOutDate)})]})]}),(0,t.jsx)("div",{className:"p-4 bg-teal-50 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Duration"}),(0,t.jsxs)("span",{className:"text-lg font-bold text-teal-700",children:[T(C.checkInDate,C.checkOutDate)," ",1===T(C.checkInDate,C.checkOutDate)?"night":"nights"]})]})}),(0,t.jsx)("div",{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-lg border-2 border-green-200",children:(0,t.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Total Price"}),(0,t.jsxs)("span",{className:"text-xl font-bold text-green-700",children:[C.totalPrice?.toFixed(0)||"N/A"," MAD"]})]})})]})]})]})})]})}function z({ownerId:e}){let a,r,n,[c,d]=(0,s.useState)([]),[o,x]=(0,s.useState)(!0),[h,g]=(0,s.useState)(""),[u,j]=(0,s.useState)(new Date);(0,s.useEffect)(()=>{N()},[e]);let N=async()=>{try{x(!0),g("");let t=await l.apiClient.bookings.getConfirmedBookingsByOwner(parseInt(String(e))),s=await Promise.all(t.map(async e=>{try{let t=await l.apiClient.properties.getById(String(e.propertyId));return{...e,property:t}}catch{return{...e,property:void 0}}}));d(s)}catch(e){g(e.message||"Failed to load calendar")}finally{x(!1)}},b=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return e}},f=e=>{j(t=>{let s=new Date(t);return"prev"===e?s.setMonth(t.getMonth()-1):s.setMonth(t.getMonth()+1),s})};if(o)return(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)(p.Loader2,{className:"h-12 w-12 animate-spin text-teal-600"}),(0,t.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading calendar..."})]});if(h)return(0,t.jsx)(m.Card,{className:"p-6 border-red-200 bg-red-50",children:(0,t.jsx)("p",{className:"text-red-700",children:h})});let{daysInMonth:v,startingDayOfWeek:w,year:C,month:k}=(a=u.getFullYear(),n=new Date(a,r=u.getMonth(),1),{daysInMonth:new Date(a,r+1,0).getDate(),startingDayOfWeek:n.getDay(),year:a,month:r}),D=u.toLocaleDateString("en-US",{month:"long",year:"numeric"}),P=Array.from({length:v},(e,t)=>t+1);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("button",{onClick:()=>f("prev"),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"â† Prev"}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:D}),(0,t.jsx)("button",{onClick:()=>f("next"),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Next â†’"})]}),(0,t.jsx)(m.Card,{className:"p-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,t.jsx)("div",{className:"text-center font-semibold text-gray-700 py-2",children:e},e)),Array.from({length:w}).map((e,s)=>(0,t.jsx)("div",{className:"aspect-square"},`empty-${s}`)),P.map(e=>{let s=new Date(C,k,e),a=c.filter(e=>{var t,a;let r,l;return t=e.checkInDate,a=e.checkOutDate,r=new Date(t),l=new Date(a),r.setHours(0,0,0,0),l.setHours(0,0,0,0),s.setHours(0,0,0,0),s>=r&&s<=l}),r=s.getDate()===new Date().getDate()&&s.getMonth()===new Date().getMonth()&&s.getFullYear()===new Date().getFullYear();return(0,t.jsxs)("div",{className:`aspect-square border rounded-lg p-2 ${r?"border-teal-500 bg-teal-50":"border-gray-200"} ${a.length>0?"bg-green-50 border-green-300":""}`,children:[(0,t.jsx)("div",{className:`text-sm font-semibold mb-1 ${r?"text-teal-700":"text-gray-900"}`,children:e}),a.length>0&&(0,t.jsxs)("div",{className:"space-y-1",children:[a.slice(0,2).map(e=>(0,t.jsx)("div",{className:"text-xs bg-green-600 text-white px-1.5 py-0.5 rounded truncate",title:e.property?.title||`Booking ${e.id}`,children:e.property?.title||`B${e.id}`},e.id)),a.length>2&&(0,t.jsxs)("div",{className:"text-xs text-green-700 font-semibold",children:["+",a.length-2," more"]})]})]},e)})]})}),c.length>0&&(0,t.jsxs)(m.Card,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Upcoming Bookings"}),(0,t.jsx)("div",{className:"space-y-3",children:c.sort((e,t)=>new Date(e.checkInDate).getTime()-new Date(t.checkInDate).getTime()).slice(0,10).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:e.property?.title||`Property ${e.propertyId}`}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 flex items-center gap-4 mt-1",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(i.Calendar,{className:"w-3 h-3"}),b(e.checkInDate)," - ",b(e.checkOutDate)]}),e.property?.address&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(y.MapPin,{className:"w-3 h-3"}),e.property.address.city]})]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("div",{className:"font-bold text-teal-600",children:[e.totalPrice?.toFixed(0)," MAD"]})})]},e.id))})]}),0===c.length&&(0,t.jsxs)(m.Card,{className:"p-12 text-center",children:[(0,t.jsx)(i.Calendar,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No bookings"}),(0,t.jsx)("p",{className:"text-gray-600",children:"You don't have any confirmed bookings to display."})]})]})}var W=e.i(89359);function q(){let{user:e,isLoading:i,token:n}=(0,a.useAuth)(),c=(0,r.useRouter)(),[d,m]=(0,s.useState)("paid"),[x,h]=(0,s.useState)(0),[g,u]=(0,s.useState)(0),[y,j]=(0,s.useState)(0),[N,b]=(0,s.useState)(0),[f,v]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if(!i&&!e)return void c.push("/login");if(!i&&e){let t=e.roles?.includes("ADMIN"),s=e.roles?.includes("POSTER"),a=e.roles?.includes("HOST");if(!t&&!s&&!a)return void c.push("/")}e&&n&&w()},[e,n,i,c]);let w=async()=>{if(e?.id)try{v(!0);let t=parseInt(String(e.id)),[s,a,r,i]=await Promise.all([l.apiClient.properties.getMyProperties().catch(()=>[]),l.apiClient.bookings.getCurrentBookingsByOwner(t).catch(()=>[]),l.apiClient.bookings.getPendingNegotiations(t).catch(()=>[]),l.apiClient.bookings.getByOwnerId(t).catch(()=>[])]);h(s.length),u(a.length),j(r.length);let n=i.filter(e=>"COMPLETED"===e.status).reduce((e,t)=>e+(t.totalPrice||0),0);b(n)}catch(e){console.error("Failed to fetch stats:",e)}finally{v(!1)}},D=()=>{w()};if(i||f)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(p.Loader2,{className:"h-12 w-12 animate-spin text-teal-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading dashboard..."})]})});if(!e)return null;let P=e.id;return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsx)("div",{className:"mb-6"}),(0,t.jsx)("div",{className:"relative z-10",children:(0,t.jsx)(o,{activeSection:d,onSectionChange:e=>{m(e)}})}),(0,t.jsxs)("div",{className:"mt-8",children:["paid"===d&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Paid Bookings"}),(0,t.jsx)(_,{ownerId:P})]}),"negotiations"===d&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Pending Approvals"}),(0,t.jsx)(A,{ownerId:P,onUpdate:D})]}),"current"===d&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Current Bookings"}),(0,t.jsx)(C,{ownerId:P,onUpdate:D})]}),"checkout-requests"===d&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Checkout Requests"}),(0,t.jsx)(k,{ownerId:P,onUpdate:D})]}),"calendar"===d&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Calendar"}),(0,t.jsx)(z,{ownerId:P})]}),("my-properties"===d||"draft"===d||"pending-approval"===d||"approved"===d||"disapproved"===d||"suspended"===d||"hidden"===d)&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:["my-properties"===d&&"All Properties","draft"===d&&"Draft Properties","pending-approval"===d&&"Pending Approval","approved"===d&&"Approved Properties","disapproved"===d&&"Disapproved Properties","suspended"===d&&"Suspended Properties","hidden"===d&&"Hidden Properties"]}),(0,t.jsx)(H,{userId:P,onUpdate:D,filter:"draft"===d?"draft":"pending-approval"===d?"pending-approval":"approved"===d?"approved":"disapproved"===d?"disapproved":"suspended"===d?"suspended":"hidden"===d?"hidden":"all"})]}),("my-complaints"===d||"complaints-against-me"===d)&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:["my-complaints"===d&&"My Complaints","complaints-against-me"===d&&"Complaints Against Me"]}),(0,t.jsx)(W.HostReclamations,{ownerId:P,filter:"my-complaints"===d?"my-complaints":"complaints-against-me"})]})]})]})})}e.s(["default",()=>q],42181)}]);