(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(47163);let r=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));r.displayName="Card";let l=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let i=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));i.displayName="CardTitle";let n=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",e),...s}));n.displayName="CardDescription";let o=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent",s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>o,"CardDescription",()=>n,"CardHeader",()=>l,"CardTitle",()=>i])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},61911,e=>{"use strict";let t=(0,e.i(75254).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>t],61911)},70273,e=>{"use strict";let t=(0,e.i(75254).default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>t],70273)},48433,34972,e=>{"use strict";var t=e.i(75254);let s=(0,t.default)("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);e.s(["Bed",()=>s],48433);let a=(0,t.default)("Bath",[["path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"1r8yf5"}],["line",{x1:"10",x2:"8",y1:"5",y2:"7",key:"h5g8z4"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"7",x2:"7",y1:"19",y2:"21",key:"16jp00"}],["line",{x1:"17",x2:"17",y1:"19",y2:"21",key:"1pxrnk"}]]);e.s(["Bath",()=>a],34972)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],55436)},90597,e=>{"use strict";let t=(0,e.i(75254).default)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);e.s(["Heart",()=>t],90597)},7844,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(71667),r=e.i(22016),l=e.i(57688),i=e.i(70065),n=e.i(67881),o=e.i(90597),c=e.i(46897),d=e.i(70273),x=e.i(61911),m=e.i(31278),p=e.i(48433),h=e.i(34972),u=e.i(55436);function g(){let[e,g]=(0,s.useState)([]),[y,f]=(0,s.useState)([]),[b,N]=(0,s.useState)(!0),[j,v]=(0,s.useState)(!1),[w,C]=(0,s.useState)(""),[k,L]=(0,s.useState)(""),[P,S]=(0,s.useState)(""),[M,D]=(0,s.useState)(""),[A,B]=(0,s.useState)(""),E=new Date().toISOString().split("T")[0],O=(0,s.useCallback)(async()=>{v(!0);try{let t=e.filter(e=>"APPROVED"===e.status);if(k&&(t=t.filter(e=>e.title?.toLowerCase().includes(k.toLowerCase())||e.description?.toLowerCase().includes(k.toLowerCase())||e.address?.city?.toLowerCase().includes(k.toLowerCase())||e.address?.country?.toLowerCase().includes(k.toLowerCase()))),A){let e=parseInt(A);!isNaN(e)&&e>0&&(t=t.filter(t=>t.capacity>=e))}if(P&&M){let e=new Date(P),s=new Date(M);if(e.setHours(0,0,0,0),s.setHours(0,0,0,0),s<=e){f(t),v(!1);return}let r=await Promise.all(t.map(async t=>{try{return!(await a.apiClient.bookings.getConfirmedBookingsByProperty(String(t.id))).some(t=>{let a=new Date(t.checkInDate),r=new Date(t.checkOutDate);return a.setHours(0,0,0,0),r.setHours(0,0,0,0),e<r&&s>a})}catch(e){return!0}}));t=t.filter((e,t)=>r[t])}f(t)}catch(t){f(e.filter(e=>"APPROVED"===e.status))}finally{v(!1)}},[e,k,A,P,M]);return((0,s.useEffect)(()=>{(async()=>{try{N(!0),C("");let e=(await a.apiClient.properties.getAll()).filter(e=>"APPROVED"===e.status);g(e),f(e)}catch(e){e?.isConnectionError?C("Cannot connect to the backend server. Please make sure the property-service is running on port 8081."):C(e instanceof Error?e.message:"Failed to load properties")}finally{N(!1)}})()},[]),(0,s.useEffect)(()=>{if(!P&&!M){let t=e.filter(e=>"APPROVED"===e.status);if(k&&(t=t.filter(e=>e.title?.toLowerCase().includes(k.toLowerCase())||e.description?.toLowerCase().includes(k.toLowerCase())||e.address?.city?.toLowerCase().includes(k.toLowerCase())||e.address?.country?.toLowerCase().includes(k.toLowerCase()))),A){let e=parseInt(A);!isNaN(e)&&e>0&&(t=t.filter(t=>t.capacity>=e))}f(t)}},[e,k,A,P,M]),b)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(m.Loader2,{className:"h-12 w-12 animate-spin text-teal-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600 text-base",children:"Loading properties..."})]})}):w?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)(i.Card,{className:"p-8 text-center max-w-md",children:[(0,t.jsx)("p",{className:"text-red-600 mb-4 text-base",children:w}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"text-teal-600 hover:text-teal-700 font-medium text-base",children:"Try again"})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50",children:[(0,t.jsx)("section",{className:"bg-white border-b shadow-sm",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,t.jsx)(i.Card,{className:"shadow-lg border-0",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-0 divide-x divide-gray-200",children:[(0,t.jsxs)("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Where"}),(0,t.jsx)("input",{type:"text",placeholder:"Search destinations",value:k,onChange:e=>L(e.target.value),onKeyPress:e=>"Enter"===e.key&&O(),className:"w-full px-0 py-1 border-0 focus:outline-none text-base text-gray-600 placeholder-gray-400"})]}),(0,t.jsxs)("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Check-in"}),(0,t.jsx)("input",{type:"date",value:P,onChange:e=>S(e.target.value),min:E,className:"w-full px-0 py-1 border-0 focus:outline-none text-base text-gray-600 placeholder-gray-400 cursor-pointer"})]}),(0,t.jsxs)("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Check-out"}),(0,t.jsx)("input",{type:"date",value:M,onChange:e=>D(e.target.value),min:P||E,className:"w-full px-0 py-1 border-0 focus:outline-none text-base text-gray-600 placeholder-gray-400 cursor-pointer"})]}),(0,t.jsxs)("div",{className:"p-4 hover:bg-gray-50 transition-colors flex items-end gap-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Who"}),(0,t.jsx)("input",{type:"number",min:"1",value:A,onChange:e=>B(e.target.value),onKeyPress:e=>"Enter"===e.key&&O(),placeholder:"Add guests",className:"w-full px-0 py-1 border-0 focus:outline-none text-base text-gray-600 placeholder-gray-400"})]}),(0,t.jsx)(n.Button,{onClick:O,disabled:j,className:"bg-teal-600 hover:bg-teal-700 h-12 w-12 rounded-full p-0 flex-shrink-0 disabled:opacity-50",children:j?(0,t.jsx)(m.Loader2,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(u.Search,{className:"w-5 h-5"})})]})]})})})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,t.jsxs)("div",{className:"mb-12 text-center",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Discover Properties"}),(0,t.jsxs)("p",{className:"text-lg text-gray-600",children:["Explore ",y.length," ",1===y.length?"beautiful property":"beautiful properties"," available for rent"]})]}),0===y.length?(0,t.jsxs)("div",{className:"text-center py-20",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gray-100 rounded-full mb-4",children:(0,t.jsx)(c.MapPin,{className:"w-10 h-10 text-gray-400"})}),(0,t.jsx)("p",{className:"text-gray-500 text-xl font-medium",children:"No approved properties found"}),(0,t.jsx)("p",{className:"text-gray-400 text-base mt-2",children:"Check back later for new listings"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8",children:y.map(e=>{let s=(e=>{if(!e.propertyImages||0===e.propertyImages.length)return null;let t=e.propertyImages.find(e=>e.cover);return t?t.url:e.propertyImages[0].url})(e),a=s?s.startsWith("http://")||s.startsWith("https://")?s:s.startsWith("/uploads")?`http://localhost:8081${s}`:s:"/houses_placeholder.png";return(0,t.jsx)(r.default,{href:`/property/${e.id}`,children:(0,t.jsxs)(i.Card,{className:"overflow-hidden hover:shadow-2xl transition-all duration-300 cursor-pointer group border border-gray-200 bg-white rounded-xl",children:[(0,t.jsxs)("div",{className:"relative h-64 bg-gradient-to-br from-gray-200 to-gray-300 overflow-hidden",children:[s?(0,t.jsx)(l.default,{src:a,alt:e.title,fill:!0,className:"object-cover group-hover:scale-110 transition-transform duration-700",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",onError:e=>{let t=e.target;t.srcset="",t.src="/houses_placeholder.png"}}):(0,t.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(c.MapPin,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"No image available"})]})}),(0,t.jsx)("button",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur-sm rounded-full p-2.5 hover:bg-white shadow-lg transition-all duration-200 z-10 hover:scale-110",onClick:e=>{e.preventDefault()},children:(0,t.jsx)(o.Heart,{className:"w-5 h-5 text-gray-600 hover:text-red-500 transition-colors"})}),(0,t.jsxs)("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur-sm rounded-full px-3 py-1.5 shadow-lg flex items-center gap-1.5",children:[(0,t.jsx)(d.Star,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:"4.8"})]})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h3",{className:"font-bold text-xl text-gray-900 mb-2 line-clamp-1 group-hover:text-teal-600 transition-colors",children:e.title}),(0,t.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,t.jsx)(c.MapPin,{className:"w-4 h-4 mr-1.5 text-teal-600 flex-shrink-0"}),(0,t.jsxs)("span",{className:"line-clamp-1",children:[e.address?.city,", ",e.address?.country]})]})]}),(0,t.jsx)("div",{className:"mb-4 pb-4 border-b border-gray-100",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsx)("span",{className:"text-3xl font-bold text-teal-600",children:e.dailyPrice?.toFixed(4)||e.price?.toFixed(4)||"N/A"}),(0,t.jsx)("span",{className:"text-lg font-semibold text-teal-600",children:"MAD"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"/day"})]}),e.depositAmount&&e.depositAmount>0&&(0,t.jsx)("div",{className:"flex items-baseline gap-2",children:(0,t.jsxs)("span",{className:"text-base font-semibold text-orange-600",children:["Deposit: ",e.depositAmount.toFixed(0)," MAD"]})})]})}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600 gap-6 mb-4",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.Users,{className:"w-4 h-4 text-teal-600"}),(0,t.jsxs)("span",{className:"font-medium",children:[e.capacity," guests"]})]}),e.numberOfBedrooms&&(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.Bed,{className:"w-4 h-4 text-teal-600"}),(0,t.jsx)("span",{className:"font-medium",children:e.numberOfBedrooms})]}),e.numberOfBathrooms&&(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Bath,{className:"w-4 h-4 text-teal-600"}),(0,t.jsx)("span",{className:"font-medium",children:e.numberOfBathrooms})]})]}),e.amenities&&e.amenities.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-100",children:[e.amenities.slice(0,3).map(e=>(0,t.jsx)("span",{className:"text-xs bg-teal-50 text-teal-700 px-3 py-1.5 rounded-full font-medium border border-teal-100",children:e.name},e.id)),e.amenities.length>3&&(0,t.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-600 px-3 py-1.5 rounded-full font-medium",children:["+",e.amenities.length-3," more"]})]})]})]})},e.id)})})]})]})}e.s(["default",()=>g])}]);