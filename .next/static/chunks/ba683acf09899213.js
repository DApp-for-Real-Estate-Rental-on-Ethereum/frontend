(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,80312,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),r=e.i(71667),i=e.i(25715),l=e.i(67881),n=e.i(70065),c=e.i(94179),d=e.i(31278),o=e.i(87316),m=e.i(46897),x=e.i(69638),h=e.i(3116),g=e.i(73884),u=e.i(88511),N=e.i(27612),p=e.i(61659),b=e.i(86536),j=e.i(37727),y=e.i(78894),f=e.i(43432),w=e.i(7486),v=e.i(22016),C=e.i(57688),I=e.i(30374),k=e.i(23750),E=e.i(10708),P=e.i(46696);function D(){let e,D,T,O,B,S,A,G,_=(0,a.useRouter)(),F=(0,a.useSearchParams)(),{user:R,isAuthenticated:M,isLoading:$}=(0,i.useAuth)(),[L,q]=(0,s.useState)([]),[Y,H]=(0,s.useState)(null),[J,U]=(0,s.useState)(!0),[W,K]=(0,s.useState)(""),[V,z]=(0,s.useState)({}),[X,Q]=(0,s.useState)({}),[Z,ee]=(0,s.useState)(!1),[et,es]=(0,s.useState)(null),[ea,er]=(0,s.useState)({checkInDate:"",checkOutDate:"",numberOfGuests:1,requestedPrice:void 0}),[ei,el]=(0,s.useState)(!1),[en,ec]=(0,s.useState)(null),[ed,eo]=(0,s.useState)({}),[em,ex]=(0,s.useState)([]),[eh,eg]=(0,s.useState)(!1),[eu,eN]=(0,s.useState)({}),[ep,eb]=(0,s.useState)({}),[ej,ey]=(0,s.useState)({}),[ef,ew]=(0,s.useState)({}),[ev,eC]=(0,s.useState)({}),eI=F.get("tab")||"current";(0,s.useEffect)(()=>{if(!$){if(!M||!R)return void _.push("/login?redirect=/my-bookings");eE(),"complaints"===eI&&eP()}},[R,M,$,_,eI]);let ek=async e=>{try{Q(t=>({...t,[String(e.propertyId)]:!0}));let t=await r.apiClient.properties.getById(String(e.propertyId));return{...e,property:t}}catch(t){return{...e,property:void 0}}finally{Q(t=>({...t,[String(e.propertyId)]:!1}))}},eE=async()=>{if(R?.id)try{U(!0),K("");let e=[],t=null;switch(eI){case"current":let s=await r.apiClient.bookings.getCurrentBooking(parseInt(R.id));if(s){let e=await ek(s);t=e,H(e)}else H(null);q([]);break;case"pending":let a=await r.apiClient.bookings.getPendingBookings(parseInt(R.id));e=a&&0!==a.length?a||[]:(await r.apiClient.bookings.getByTenantId(parseInt(R.id))||[]).filter(e=>"PENDING_NEGOTIATION"===e.status||"PENDING"===e.status&&null!=e.requestedNegotiationPercent&&e.requestedNegotiationPercent>0);break;case"payment":let i=await r.apiClient.bookings.getAwaitingPaymentBookings(parseInt(R.id));e=i&&0!==i.length?i||[]:(await r.apiClient.bookings.getByTenantId(parseInt(R.id))||[]).filter(e=>"PENDING_PAYMENT"===e.status||"PENDING"===e.status&&(null==e.requestedNegotiationPercent||0===e.requestedNegotiationPercent));break;case"rejected":e=(await r.apiClient.bookings.getByTenantId(parseInt(R.id))||[]).filter(e=>"NEGOTIATION_REJECTED"===e.status);break;case"complaints":e=[];break;default:e=await r.apiClient.bookings.getByTenantId(parseInt(R.id))||[]}if(e.length>0){let t=await Promise.all(e.map(e=>ek(e)));q(t)}else q([]);"current"!==eI&&(H(null),t=null),(e.length>0||t)&&await eT(e,t);let l=[...t?[t]:[],...e].filter(e=>"CONFIRMED"===e.status);l.length>0&&await eO(l)}catch(e){K(e.message||"Failed to load bookings")}finally{U(!1)}},eP=async()=>{if(R?.id){eg(!0);try{let e=await r.apiClient.reclamations.getMyComplaints(R.id);ex(e||[]),e&&e.length>0&&await eD(e)}catch(e){ex([])}finally{eg(!1)}}},eD=async e=>{try{let t={},s={};await Promise.all(e.map(async e=>{try{eC(t=>({...t,[e.id]:!0}));try{let a=await r.apiClient.bookings.getById(e.bookingId);if(a&&a.propertyId){let i=null;try{i=await r.apiClient.properties.getById(String(a.propertyId)),t[e.id]=i}catch(e){}try{if(i?.userId){let t=await r.apiClient.users.getById(i.userId);t.phoneNumber&&(s[e.id]=String(t.phoneNumber))}else{let t=await r.apiClient.bookings.getPropertyInfo(String(a.propertyId));if(t.ownerId){let a=await r.apiClient.users.getById(t.ownerId);a.phoneNumber&&(s[e.id]=String(a.phoneNumber))}}}catch(e){}}}catch(e){}}catch(e){}finally{eC(t=>({...t,[e.id]:!1}))}})),ey(e=>({...e,...t})),ew(e=>({...e,...s}))}catch(e){}},eT=async(e,t)=>{if(R?.id)try{let s={},a=t?[t,...e]:e;await Promise.all(a.map(async e=>{try{let t=await r.apiClient.reclamations.getByBookingIdAndComplainant(e.id,parseInt(R.id));t&&(s[e.id]=t)}catch(e){}})),eo(s)}catch(e){}},eO=async e=>{try{let t={};await Promise.all(e.map(async e=>{try{if(eb(t=>({...t,[e.id]:!0})),e.property?.userId){let s=e.property.userId;try{let a=await r.apiClient.users.getById(s);if(a&&null!==a.phoneNumber&&void 0!==a.phoneNumber){let s=String(a.phoneNumber);t[e.id]=s}else t[e.id]=null}catch(s){t[e.id]=null}}else try{let s=await r.apiClient.bookings.getPropertyInfo(String(e.propertyId));if(s.ownerId){let a=await r.apiClient.users.getById(s.ownerId);if(a&&null!==a.phoneNumber&&void 0!==a.phoneNumber){let s=String(a.phoneNumber);t[e.id]=s}else t[e.id]=null}else t[e.id]=null}catch(s){t[e.id]=null}}catch(s){t[e.id]=null}finally{eb(t=>({...t,[e.id]:!1}))}})),eN(e=>({...e,...t}))}catch(e){}},eB=e=>{_.push(`/reclamation/${e}?isHost=false`)},eS=async(e,t)=>{if(window.confirm("Are you sure you want to remove this reclamation?")){if(!R?.id)return void K("User not found");z(t=>({...t,[e]:!0})),K("");try{await r.apiClient.reclamations.delete(t,parseInt(R.id)),eo(t=>{let s={...t};return delete s[e],s}),await eE()}catch(e){K(e.message||"Failed to remove reclamation")}finally{z(t=>({...t,[e]:!1}))}}},eA=e=>{_.push(`/my-bookings?tab=${e}`)},eG=async e=>{if(window.confirm("Are you sure you have checked out?")){z(t=>({...t,[e]:!0})),K("");try{await r.apiClient.bookings.tenantCheckout(e,parseInt(R.id)),P.toast.success("Checkout confirmed! Waiting for host confirmation."),await eE()}catch(t){let e=t.message||"Failed to confirm checkout";K(e),P.toast.error(e)}finally{z(t=>({...t,[e]:!1}))}}},e_=e=>{_.push(`/payment?bookingId=${e}`)},eF=async e=>{if(window.confirm("Are you sure you want to cancel this booking? This action cannot be undone.")){if(!R?.id)return void K("User not found");z(t=>({...t,[e]:!0})),K("");try{await r.apiClient.bookings.delete(e,parseInt(R.id)),await eE()}catch(e){K(e.message||"Failed to cancel booking")}finally{z(t=>({...t,[e]:!1}))}}},eR=e=>{es(e);let t=e=>{if(!e)return"";try{let t=new Date(e),s=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${s}-${a}-${r}`}catch{return e}};er({checkInDate:t(e.checkInDate),checkOutDate:t(e.checkOutDate),numberOfGuests:1,requestedPrice:e.requestedNegotiationPercent||"NEGOTIATION_REJECTED"===e.status?e.totalPrice?.toString():void 0}),ee(!0)},eM=async()=>{if(!et)return;if(!ea.checkInDate||!ea.checkOutDate)return void K("Please fill in all required fields");let e=new Date(ea.checkInDate),t=new Date(ea.checkOutDate),s=new Date;if(s.setHours(0,0,0,0),e<s)return void K("Check-in date must be today or later");if(t<=e)return void K("Check-out date must be after check-in date");z(e=>({...e,[et.id]:!0})),K("");try{if(ea.requestedPrice){let e=parseFloat(ea.requestedPrice);if(isNaN(e)||e<=0){K("Requested price must be greater than 0"),z(e=>({...e,[et.id]:!1}));return}}else if("NEGOTIATION_REJECTED"===et.status){K("Please enter a requested price"),z(e=>({...e,[et.id]:!1}));return}let e=await r.apiClient.bookings.update(et.id,{checkInDate:ea.checkInDate,checkOutDate:ea.checkOutDate,numberOfGuests:ea.numberOfGuests,requestedPrice:ea.requestedPrice?parseFloat(ea.requestedPrice):void 0});if("rejected"===e.status||"PRICE_TOO_LOW"===e.error)return void K(e.message||"Price is not acceptable. Please increase it.");ee(!1),es(null),K(""),await eE()}catch(t){let e="Failed to update booking";t.message&&(e=t.message.includes("Price is not acceptable")?t.message:t.message.includes("PRICE_TOO_LOW")?"Price is not acceptable. Please increase it.":t.message),K(e)}finally{z(e=>({...e,[et.id]:!1}))}},e$=e=>{switch(e.toUpperCase()){case"PENDING_PAYMENT":return(0,t.jsx)(c.Badge,{className:"bg-blue-100 text-blue-800 border-blue-200",children:"Awaiting Payment"});case"PENDING_NEGOTIATION":return(0,t.jsx)(c.Badge,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"Pending Negotiation"});case"NEGOTIATION_REJECTED":return(0,t.jsx)(c.Badge,{className:"bg-orange-100 text-orange-800 border-orange-200",children:"Negotiation Rejected"});case"CONFIRMED":return(0,t.jsx)(c.Badge,{className:"bg-green-100 text-green-800 border-green-200",children:"Confirmed"});case"COMPLETED":return(0,t.jsx)(c.Badge,{className:"bg-gray-100 text-gray-800 border-gray-200",children:"Completed"});case"TENANT_CHECKED_OUT":return(0,t.jsx)(c.Badge,{className:"bg-purple-100 text-purple-800 border-purple-200",children:"Checked Out"});case"IN_DISPUTE":return(0,t.jsx)(c.Badge,{className:"bg-red-100 text-red-800 border-red-200",children:"In Dispute"});case"CANCELLED_BY_HOST":return(0,t.jsx)(c.Badge,{className:"bg-red-100 text-red-800 border-red-200",children:"Cancelled by Host"});case"CANCELLED_BY_TENANT":return(0,t.jsx)(c.Badge,{className:"bg-red-100 text-red-800 border-red-200",children:"Cancelled"});case"PENDING":return(0,t.jsx)(c.Badge,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"Pending"});default:return(0,t.jsx)(c.Badge,{className:"bg-gray-100 text-gray-800 border-gray-200",children:e})}},eL=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return e}},eq=(e,t)=>{if(!e||!t)return 0;try{let s=new Date(e),a=new Date(t),r=Math.abs(a.getTime()-s.getTime());return Math.ceil(r/864e5)}catch{return 0}},eY=e=>{if(!e?.propertyImages||0===e.propertyImages.length)return null;let t=e.propertyImages.find(e=>e.cover);return t?t.url:e.propertyImages[0].url},eH=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/uploads")?`http://localhost:8081${e}`:e:"/placeholder.jpg",eJ=(e,s=!1,a=eI)=>{let r=e.property,i=eY(r),c=eq(e.checkInDate,e.checkOutDate),g=X[String(e.propertyId)];return(0,t.jsxs)(n.Card,{className:`overflow-hidden hover:shadow-2xl transition-all duration-300 ${s?"max-w-2xl mx-auto":""}`,children:[(0,t.jsxs)("div",{className:"relative h-64 bg-gradient-to-br from-teal-100 to-teal-200 overflow-hidden",children:[g?(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(d.Loader2,{className:"h-8 w-8 animate-spin text-teal-600"})}):i?(0,t.jsx)(C.default,{src:eH(i),alt:r?.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(m.MapPin,{className:"w-16 h-16 text-teal-300"})}),(0,t.jsx)("div",{className:"absolute top-4 right-4",children:e$(e.status)}),(0,t.jsxs)("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl px-4 py-2 shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,t.jsx)("span",{className:"text-2xl font-bold text-teal-600",children:e.totalPrice?.toFixed(4)||"N/A"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"MAD"})]}),e.requestedNegotiationPercent&&e.requestedNegotiationPercent>0&&(0,t.jsxs)("p",{className:"text-xs text-yellow-600 font-medium mt-1",children:["Negotiated: ",e.requestedNegotiationPercent,"%"]}),e.longStayDiscountPercent&&e.longStayDiscountPercent>0&&(0,t.jsxs)("p",{className:"text-xs text-blue-600 font-medium mt-1",children:["Discount: ",e.longStayDiscountPercent,"%"]})]})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2 line-clamp-1",children:r?.title||`Property ${e.propertyId}`}),r?.address&&(0,t.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,t.jsx)(m.MapPin,{className:"w-4 h-4 mr-1.5 text-teal-600 flex-shrink-0"}),(0,t.jsxs)("span",{className:"line-clamp-1",children:[r.address.city,", ",r.address.country]})]})]}),(0,t.jsxs)("div",{className:"space-y-3 mb-6 pb-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,t.jsx)(o.Calendar,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsx)("span",{className:"font-medium",children:"Check-in"})]}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:eL(e.checkInDate)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,t.jsx)(o.Calendar,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsx)("span",{className:"font-medium",children:"Check-out"})]}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:eL(e.checkOutDate)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,t.jsx)(h.Clock,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsx)("span",{className:"font-medium",children:"Duration"})]}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[c," ",1===c?"night":"nights"]})]}),"CONFIRMED"===e.status&&(0,t.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,t.jsx)(f.Phone,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsx)("span",{className:"font-medium",children:"Host Phone"})]}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:ep[e.id]?(0,t.jsx)(d.Loader2,{className:"w-4 h-4 animate-spin inline"}):eu[e.id]?eu[e.id]:"N/A"})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:["PENDING_PAYMENT"===e.status&&(0,t.jsxs)(l.Button,{onClick:()=>e_(e.id),className:"flex-1 bg-teal-600 hover:bg-teal-700 text-white",children:[(0,t.jsx)(p.CreditCard,{className:"w-4 h-4 mr-2"}),"Pay Now"]}),"NEGOTIATION_REJECTED"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"w-full p-3 bg-orange-50 border-2 border-orange-200 rounded-lg mb-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-orange-800 text-center mb-2",children:"⚠️ Your negotiation was rejected by the host"}),(0,t.jsx)("p",{className:"text-xs text-orange-700 text-center",children:"You can change the price and resubmit, or cancel the booking"})]}),(0,t.jsxs)(l.Button,{onClick:()=>eR(e),className:"w-full bg-orange-600 hover:bg-orange-700 text-white mb-2",children:[(0,t.jsx)(u.Edit,{className:"w-4 h-4 mr-2"}),"Change Price"]})]}),"CONFIRMED"===e.status&&"current"===a&&(0,t.jsx)(l.Button,{onClick:()=>eG(e.id),disabled:V[e.id],className:"w-full bg-green-600 hover:bg-green-700 text-white mb-2",children:V[e.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.CheckCircle,{className:"w-4 h-4 mr-2"}),"I've Checked Out"]})}),"CONFIRMED"===e.status&&"current"===a&&(0,t.jsx)(t.Fragment,{children:ed[e.id]?(0,t.jsx)(l.Button,{onClick:()=>eS(e.id,ed[e.id].id),disabled:V[e.id],variant:"outline",className:"w-full border-red-300 text-red-700 hover:bg-red-50 mb-2",children:V[e.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.X,{className:"w-4 h-4 mr-2"}),"Remove Reclamation"]})}):(0,t.jsxs)(l.Button,{onClick:()=>eB(e.id),variant:"outline",className:"w-full border-orange-300 text-orange-700 hover:bg-orange-50 mb-2",children:[(0,t.jsx)(y.AlertTriangle,{className:"w-4 h-4 mr-2"}),"Reclamation"]})}),"TENANT_CHECKED_OUT"===e.status&&(0,t.jsx)("div",{className:"w-full p-3 bg-yellow-50 border-2 border-yellow-200 rounded-lg text-center",children:(0,t.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"⏳ Waiting for host to confirm checkout"})}),(0,t.jsxs)(l.Button,{onClick:()=>{ec(e),el(!0)},variant:"outline",className:"flex-1",children:[(0,t.jsx)(b.Eye,{className:"w-4 h-4 mr-2"}),"View"]}),("PENDING_PAYMENT"===e.status||"PENDING_NEGOTIATION"===e.status)&&(0,t.jsxs)(l.Button,{onClick:()=>eR(e),variant:"outline",className:"flex-1",children:[(0,t.jsx)(u.Edit,{className:"w-4 h-4 mr-2"}),"Edit"]}),("PENDING_PAYMENT"===e.status||"PENDING_NEGOTIATION"===e.status||"NEGOTIATION_REJECTED"===e.status)&&(0,t.jsx)(l.Button,{onClick:()=>eF(e.id),disabled:V[e.id],variant:"destructive",className:"NEGOTIATION_REJECTED"===e.status?"w-full":"flex-1",children:V[e.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Trash2,{className:"w-4 h-4 mr-2"}),"Cancel"]})})]})]})]},e.id)};return $?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(d.Loader2,{className:"h-12 w-12 animate-spin text-teal-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Checking authentication..."})]})}):M&&R?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:(0,t.jsxs)("div",{className:"flex items-stretch divide-x divide-gray-200",children:[(0,t.jsx)(v.default,{href:"/properties",className:"flex-1 px-6 py-4 text-center transition-colors hover:bg-gray-50",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:"text-xs font-semibold mb-1 text-gray-900",children:"Create"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"New Booking"})]})}),(0,t.jsx)("button",{onClick:()=>eA("current"),className:`flex-1 px-6 py-4 text-center transition-colors ${"current"===eI?"bg-teal-600 text-white":"hover:bg-gray-50"}`,children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:`text-xs font-semibold mb-1 ${"current"===eI?"text-white":"text-gray-900"}`,children:"Current"}),(0,t.jsx)("span",{className:`text-sm ${"current"===eI?"text-white":"text-gray-600"}`,children:"Booking"})]})}),(0,t.jsx)("button",{onClick:()=>eA("pending"),className:`flex-1 px-6 py-4 text-center transition-colors ${"pending"===eI?"bg-teal-600 text-white":"hover:bg-gray-50"}`,children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:`text-xs font-semibold mb-1 ${"pending"===eI?"text-white":"text-gray-900"}`,children:"Pending"}),(0,t.jsx)("span",{className:`text-sm ${"pending"===eI?"text-white":"text-gray-600"}`,children:"Negotiations"})]})}),(0,t.jsx)("button",{onClick:()=>eA("payment"),className:`flex-1 px-6 py-4 text-center transition-colors ${"payment"===eI?"bg-teal-600 text-white":"hover:bg-gray-50"}`,children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:`text-xs font-semibold mb-1 ${"payment"===eI?"text-white":"text-gray-900"}`,children:"Awaiting"}),(0,t.jsx)("span",{className:`text-sm ${"payment"===eI?"text-white":"text-gray-600"}`,children:"Payment"})]})}),(0,t.jsx)("button",{onClick:()=>eA("rejected"),className:`flex-1 px-6 py-4 text-center transition-colors ${"rejected"===eI?"bg-teal-600 text-white":"hover:bg-gray-50"}`,children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:`text-xs font-semibold mb-1 ${"rejected"===eI?"text-white":"text-gray-900"}`,children:"Rejected"}),(0,t.jsx)("span",{className:`text-sm ${"rejected"===eI?"text-white":"text-gray-600"}`,children:"Negotiations"})]})}),(0,t.jsx)("button",{onClick:()=>eA("complaints"),className:`flex-1 px-6 py-4 text-center transition-colors rounded-r-2xl ${"complaints"===eI?"bg-teal-600 text-white":"hover:bg-gray-50"}`,children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:`text-xs font-semibold mb-1 ${"complaints"===eI?"text-white":"text-gray-900"}`,children:"My"}),(0,t.jsx)("span",{className:`text-sm ${"complaints"===eI?"text-white":"text-gray-600"}`,children:"Complaints"})]})})]})})}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["current"===eI&&"Current Booking","pending"===eI&&"Pending Negotiations","payment"===eI&&"Awaiting Payment","rejected"===eI&&"Rejected Negotiations","complaints"===eI&&"My Complaints"]}),(0,t.jsxs)("p",{className:"text-gray-600",children:["current"===eI&&"Your active confirmed booking - You can check out when ready","pending"===eI&&"Bookings waiting for host approval - Your negotiation requests","payment"===eI&&"Bookings waiting for payment - Complete payment to confirm","rejected"===eI&&"Rejected negotiations - Edit the price or cancel","complaints"===eI&&"View and manage your complaints"]})]}),W&&(0,t.jsxs)(n.Card,{className:"p-6 mb-6 border-red-200 bg-red-50",children:[(0,t.jsx)("p",{className:"text-red-700",children:W}),(0,t.jsx)(l.Button,{onClick:eE,variant:"outline",className:"mt-4",children:"Try Again"})]}),J?(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)(d.Loader2,{className:"h-12 w-12 animate-spin text-teal-600"}),(0,t.jsx)("p",{className:"ml-4 text-gray-600",children:"Loading bookings..."})]}):(0,t.jsxs)(t.Fragment,{children:["current"===eI&&(0,t.jsx)(t.Fragment,{children:Y?eJ(Y,!0):(0,t.jsxs)(n.Card,{className:"p-12 text-center",children:[(0,t.jsx)(o.Calendar,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No current booking"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have an active booking at the moment."}),(0,t.jsx)(v.default,{href:"/properties",children:(0,t.jsx)(l.Button,{className:"bg-teal-600 hover:bg-teal-700",children:"Browse Properties"})})]})}),"pending"===eI&&(0,t.jsx)(t.Fragment,{children:0===L.length?(0,t.jsxs)(n.Card,{className:"p-12 text-center",children:[(0,t.jsx)(o.Calendar,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No pending negotiations"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have any negotiations waiting for host approval."}),(0,t.jsx)(v.default,{href:"/properties",children:(0,t.jsx)(l.Button,{className:"bg-teal-600 hover:bg-teal-700",children:"Browse Properties"})})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map(e=>eJ(e))})}),"payment"===eI&&(0,t.jsx)(t.Fragment,{children:0===L.length?(0,t.jsxs)(n.Card,{className:"p-12 text-center",children:[(0,t.jsx)(p.CreditCard,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No bookings awaiting payment"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have any bookings waiting for payment."}),(0,t.jsx)(v.default,{href:"/properties",children:(0,t.jsx)(l.Button,{className:"bg-teal-600 hover:bg-teal-700",children:"Browse Properties"})})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map(e=>eJ(e))})}),"rejected"===eI&&(0,t.jsx)(t.Fragment,{children:0===L.length?(0,t.jsxs)(n.Card,{className:"p-12 text-center",children:[(0,t.jsx)(g.XCircle,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No rejected negotiations"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have any rejected negotiations."}),(0,t.jsx)(v.default,{href:"/properties",children:(0,t.jsx)(l.Button,{className:"bg-teal-600 hover:bg-teal-700",children:"Browse Properties"})})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map(e=>eJ(e))})}),"complaints"===eI&&(0,t.jsx)(t.Fragment,{children:eh?(0,t.jsxs)(n.Card,{className:"p-12 text-center",children:[(0,t.jsx)(d.Loader2,{className:"w-8 h-8 animate-spin text-teal-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading complaints..."})]}):0===em.length?(0,t.jsxs)(n.Card,{className:"p-12 text-center",children:[(0,t.jsx)(y.AlertTriangle,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No complaints"}),(0,t.jsx)("p",{className:"text-gray-600",children:"You haven't filed any complaints yet."})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:em.map(e=>{let s=ej[e.id],a=ef[e.id];return ev[e.id],(0,t.jsx)(n.Card,{className:"p-6 hover:shadow-lg transition-shadow",children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2 flex-1",children:e.title})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)(c.Badge,{className:"OPEN"===e.status?"bg-blue-100 text-blue-800":"IN_REVIEW"===e.status?"bg-yellow-100 text-yellow-800":"RESOLVED"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:e.status.replace("_"," ")}),(0,t.jsx)(c.Badge,{className:"LOW"===e.severity?"bg-green-100 text-green-800":"MEDIUM"===e.severity?"bg-yellow-100 text-yellow-800":"HIGH"===e.severity?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800",children:e.severity})]})]}),(0,t.jsx)("p",{className:"text-gray-600 mb-4 text-sm line-clamp-3 flex-1",children:e.description}),s&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(w.Building2,{className:"w-4 h-4 text-teal-600"}),(0,t.jsx)("span",{className:"font-semibold text-sm text-gray-900",children:s.title})]}),s.address&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[(0,t.jsx)(m.MapPin,{className:"w-3 h-3 text-teal-600"}),(0,t.jsxs)("span",{children:[s.address.city,", ",s.address.country]})]})]}),a&&(0,t.jsxs)("div",{className:"mb-4 flex items-center gap-2 text-sm",children:[(0,t.jsx)(f.Phone,{className:"w-4 h-4 text-teal-600"}),(0,t.jsx)("span",{className:"text-gray-600",children:"Host Phone:"}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:a})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Type: "}),(0,t.jsx)("span",{className:"text-xs font-medium text-gray-700",children:e.type.replace("_"," ")})]}),(0,t.jsxs)("div",{className:"mb-4 space-y-1",children:[e.refundAmount&&(0,t.jsxs)("div",{className:"text-sm font-semibold text-green-600",children:["Refund: $",e.refundAmount.toFixed(2)]}),e.penaltyPoints&&(0,t.jsxs)("div",{className:"text-sm font-semibold text-red-600",children:["Penalty: ",e.penaltyPoints," pts"]})]}),e.resolutionNotes&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-blue-900 mb-1",children:"Resolution:"}),(0,t.jsx)("p",{className:"text-xs text-blue-700",children:e.resolutionNotes})]}),(0,t.jsxs)("div",{className:"flex gap-2 mt-auto pt-4 border-t border-gray-200",children:[(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>_.push(`/reclamation/${e.bookingId}?isHost=${"HOST"===e.complainantRole}&reclamationId=${e.id}`),children:[(0,t.jsx)(b.Eye,{className:"w-4 h-4 mr-1"}),"View"]}),"OPEN"===e.status&&(0,t.jsx)(l.Button,{variant:"destructive",size:"sm",onClick:()=>eS(e.bookingId,e.id),disabled:V[e.bookingId],children:V[e.bookingId]?(0,t.jsx)(d.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(N.Trash2,{className:"w-4 h-4"})})]})]})},e.id)})})})]}),(0,t.jsx)(I.Dialog,{open:Z,onOpenChange:ee,children:(0,t.jsxs)(I.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(I.DialogHeader,{children:(0,t.jsxs)(I.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:["Edit Booking #",et?.id]})}),et&&(0,t.jsxs)("div",{className:"space-y-6 mt-4",children:[et.property&&(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:et.property.title}),et.property.address&&(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[et.property.address.city,", ",et.property.address.country]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Label,{htmlFor:"checkInDate",className:"text-sm font-semibold text-gray-700",children:"Check-in Date *"}),(0,t.jsx)(k.Input,{id:"checkInDate",type:"date",value:ea.checkInDate,onChange:e=>er({...ea,checkInDate:e.target.value}),min:(D=(e=new Date).getFullYear(),T=String(e.getMonth()+1).padStart(2,"0"),O=String(e.getDate()).padStart(2,"0"),`${D}-${T}-${O}`),className:"mt-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Label,{htmlFor:"checkOutDate",className:"text-sm font-semibold text-gray-700",children:"Check-out Date *"}),(0,t.jsx)(k.Input,{id:"checkOutDate",type:"date",value:ea.checkOutDate,onChange:e=>er({...ea,checkOutDate:e.target.value}),min:ea.checkInDate||(S=(B=new Date).getFullYear(),A=String(B.getMonth()+1).padStart(2,"0"),G=String(B.getDate()).padStart(2,"0"),`${S}-${A}-${G}`),className:"mt-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Label,{htmlFor:"numberOfGuests",className:"text-sm font-semibold text-gray-700",children:"Number of Guests"}),(0,t.jsx)(k.Input,{id:"numberOfGuests",type:"number",min:"1",value:ea.numberOfGuests,onChange:e=>er({...ea,numberOfGuests:parseInt(e.target.value)||1}),className:"mt-2"})]}),(et.property?.negotiationPercentage&&et.property.negotiationPercentage>0||"NEGOTIATION_REJECTED"===et.status||"PENDING_NEGOTIATION"===et.status)&&(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Label,{htmlFor:"requestedPrice",className:"text-sm font-semibold text-gray-700",children:"Requested Price (MAD) *"}),(0,t.jsx)(k.Input,{id:"requestedPrice",type:"number",step:"0.001",min:"0",value:ea.requestedPrice||"",onChange:e=>er({...ea,requestedPrice:e.target.value||void 0}),placeholder:"Enter your requested price",className:"mt-2",required:!0}),et.property?.negotiationPercentage&&et.property.negotiationPercentage>0&&(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum negotiation: ",et.property.negotiationPercentage,"%"]}),"NEGOTIATION_REJECTED"===et.status&&(0,t.jsx)("p",{className:"text-xs text-orange-600 mt-1 font-medium",children:"⚠️ Your previous negotiation was rejected. Please enter a new price."})]}),W&&(0,t.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-red-700",children:W})}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>{ee(!1),es(null),K("")},className:"flex-1",children:"Cancel"}),(0,t.jsx)(l.Button,{onClick:eM,disabled:V[et.id],className:"flex-1 bg-teal-600 hover:bg-teal-700 text-white",children:V[et.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})}),(0,t.jsx)(I.Dialog,{open:ei,onOpenChange:el,children:(0,t.jsxs)(I.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(I.DialogHeader,{children:(0,t.jsx)(I.DialogTitle,{className:"text-2xl font-bold text-gray-900",children:"Booking Details"})}),en&&(0,t.jsxs)("div",{className:"space-y-6 mt-4",children:[en.property&&(0,t.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-teal-100 to-teal-200 rounded-lg overflow-hidden mb-4",children:[eY(en.property)?(0,t.jsx)(C.default,{src:eH(eY(en.property)),alt:en.property.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 80vw"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(m.MapPin,{className:"w-16 h-16 text-teal-300"})}),(0,t.jsx)("div",{className:"absolute top-4 right-4",children:e$(en.status)})]}),en.property&&(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:en.property.title}),en.property.address&&(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(m.MapPin,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsxs)("span",{children:[en.property.address.city,", ",en.property.address.country]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,t.jsx)(o.Calendar,{className:"w-5 h-5 mr-2 text-teal-600"}),"Booking Dates"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-in"}),(0,t.jsx)("p",{className:"text-base font-semibold text-gray-900",children:eL(en.checkInDate)})]}),(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Check-out"}),(0,t.jsx)("p",{className:"text-base font-semibold text-gray-900",children:eL(en.checkOutDate)})]})]}),(0,t.jsx)("div",{className:"p-4 bg-teal-50 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-700",children:[(0,t.jsx)(h.Clock,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsx)("span",{className:"font-medium",children:"Duration"})]}),(0,t.jsxs)("span",{className:"text-lg font-bold text-teal-700",children:[eq(en.checkInDate,en.checkOutDate)," ",1===eq(en.checkInDate,en.checkOutDate)?"night":"nights"]})]})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,t.jsx)(p.CreditCard,{className:"w-5 h-5 mr-2 text-teal-600"}),"Pricing"]}),(0,t.jsxs)("div",{className:"p-6 bg-gradient-to-br from-teal-50 to-teal-100 rounded-lg border-2 border-teal-200",children:[(0,t.jsxs)("div",{className:"flex items-baseline justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Total Price"}),(0,t.jsxs)("span",{className:"text-xl font-bold text-teal-700",children:[en.totalPrice?.toFixed(0)||"N/A"," MAD"]})]}),en.longStayDiscountPercent&&en.longStayDiscountPercent>0&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-teal-200",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Long Stay Discount"}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-blue-600",children:[en.longStayDiscountPercent,"%"]})]}),en.requestedNegotiationPercent&&en.requestedNegotiationPercent>0&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Negotiation"}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-yellow-600",children:[en.requestedNegotiationPercent,"%"]})]})]})]}),"PENDING_NEGOTIATION"===en.status&&(0,t.jsx)("div",{className:"p-4 bg-yellow-50 border-2 border-yellow-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm font-medium text-yellow-800 text-center",children:"⏳ Waiting for host to approve your negotiation"})}),"NEGOTIATION_REJECTED"===en.status&&(0,t.jsxs)("div",{className:"p-4 bg-orange-50 border-2 border-orange-200 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-orange-800 text-center mb-2",children:"⚠️ Your negotiation was rejected by the host"}),(0,t.jsx)("p",{className:"text-xs text-orange-700 text-center",children:"You can edit the booking to change the price or cancel it"})]}),"TENANT_CHECKED_OUT"===en.status&&(0,t.jsx)("div",{className:"p-4 bg-yellow-50 border-2 border-yellow-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm font-medium text-yellow-800 text-center",children:"⏳ Waiting for host to confirm your checkout"})}),"COMPLETED"===en.status&&(0,t.jsx)("div",{className:"p-4 bg-green-50 border-2 border-green-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm font-medium text-green-800 text-center",children:"✓ Booking completed successfully"})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3 pt-4 border-t border-gray-200",children:["PENDING_PAYMENT"===en.status&&(0,t.jsxs)(l.Button,{onClick:()=>{el(!1),e_(en.id)},className:"flex-1 bg-teal-600 hover:bg-teal-700 text-white",children:[(0,t.jsx)(p.CreditCard,{className:"w-4 h-4 mr-2"}),"Pay Now"]}),"NEGOTIATION_REJECTED"===en.status&&(0,t.jsxs)(l.Button,{onClick:()=>{el(!1),eR(en)},className:"flex-1 bg-orange-600 hover:bg-orange-700 text-white",children:[(0,t.jsx)(u.Edit,{className:"w-4 h-4 mr-2"}),"Change Price"]}),"CONFIRMED"===en.status&&(0,t.jsx)(l.Button,{onClick:async()=>{el(!1),await eG(en.id)},disabled:V[en.id],className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:V[en.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.CheckCircle,{className:"w-4 h-4 mr-2"}),"I've Checked Out"]})}),"CONFIRMED"===en.status&&(0,t.jsx)(t.Fragment,{children:ed[en.id]?(0,t.jsx)(l.Button,{onClick:async()=>{el(!1),await eS(en.id,ed[en.id].id)},disabled:V[en.id],variant:"outline",className:"flex-1 border-red-300 text-red-700 hover:bg-red-50",children:V[en.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.X,{className:"w-4 h-4 mr-2"}),"Remove Reclamation"]})}):(0,t.jsxs)(l.Button,{onClick:()=>{el(!1),eB(en.id)},variant:"outline",className:"flex-1 border-orange-300 text-orange-700 hover:bg-orange-50",children:[(0,t.jsx)(y.AlertTriangle,{className:"w-4 h-4 mr-2"}),"Reclamation"]})}),("PENDING_PAYMENT"===en.status||"PENDING_NEGOTIATION"===en.status||"NEGOTIATION_REJECTED"===en.status)&&(0,t.jsxs)(l.Button,{onClick:()=>{el(!1),eR(en)},variant:"outline",className:"flex-1",children:[(0,t.jsx)(u.Edit,{className:"w-4 h-4 mr-2"}),"Edit"]}),("PENDING_PAYMENT"===en.status||"PENDING_NEGOTIATION"===en.status||"NEGOTIATION_REJECTED"===en.status)&&(0,t.jsx)(l.Button,{onClick:async()=>{el(!1),await eF(en.id)},disabled:V[en.id],variant:"destructive",className:"flex-1",children:V[en.id]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Deleting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Trash2,{className:"w-4 h-4 mr-2"}),"Cancel"]})}),(0,t.jsx)(l.Button,{onClick:()=>el(!1),variant:"outline",className:"flex-1",children:"Close"})]})]})]})})]})}):null}e.s(["default",()=>D])}]);