(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12426,e=>{"use strict";let t=(0,e.i(75254).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],12426)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},88511,e=>{"use strict";let t=(0,e.i(75254).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],88511)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},70065,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(47163);let r=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));r.displayName="Card";let i=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...s}));i.displayName="CardHeader";let l=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));l.displayName="CardTitle";let n=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",e),...s}));n.displayName="CardDescription";let c=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent",s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>c,"CardDescription",()=>n,"CardHeader",()=>i,"CardTitle",()=>l])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},94179,e=>{"use strict";var t=e.i(43476),s=e.i(25913),a=e.i(47163);let r=(0,s.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:s,...i}){return(0,t.jsx)("div",{className:(0,a.cn)(r({variant:s}),e),...i})}e.s(["Badge",()=>i])},69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},73884,e=>{"use strict";let t=(0,e.i(75254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],73884)},61659,e=>{"use strict";let t=(0,e.i(75254).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>t],61659)},26318,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),r=e.i(71667),i=e.i(25715),l=e.i(67881),n=e.i(70065),c=e.i(94179),d=e.i(31278),o=e.i(87316),m=e.i(46897),x=e.i(3116),u=e.i(12426),h=e.i(88511),g=e.i(27612),y=e.i(71689),p=e.i(69638),f=e.i(73884),N=e.i(61659),b=e.i(63209),j=e.i(22016),k=e.i(57688);function v(){let e=(0,a.useParams)(),v=(0,a.useRouter)(),{user:C,isAuthenticated:w}=(0,i.useAuth)(),[D,P]=(0,s.useState)(null),[I,E]=(0,s.useState)(null),[T,O]=(0,s.useState)(!0),[B,S]=(0,s.useState)(""),[A,F]=(0,s.useState)(!1),[M,q]=(0,s.useState)(!1),[G,H]=(0,s.useState)({checkInDate:"",checkOutDate:"",numberOfGuests:1,requestedPrice:""}),[L,R]=(0,s.useState)(null),[z,_]=(0,s.useState)(null),U=e.id;(0,s.useEffect)(()=>{U&&V()},[U]),(0,s.useEffect)(()=>{D?.propertyId&&(Y(),$())},[D?.propertyId]),(0,s.useEffect)(()=>{M&&G.checkInDate&&G.checkOutDate&&z?.pricePerNight&&K()},[M,G.checkInDate,G.checkOutDate,z]);let V=async()=>{try{O(!0),S("");let e=await r.apiClient.bookings.getById(U);P(e),H({checkInDate:e.checkInDate||"",checkOutDate:e.checkOutDate||"",numberOfGuests:1,requestedPrice:e.requestedNegotiationPercent?"":e.totalPrice?.toString()||""})}catch(e){console.error("Failed to fetch booking:",e),S(e.message||"Failed to load booking details")}finally{O(!1)}},Y=async()=>{if(D?.propertyId)try{let e=await r.apiClient.properties.getById(String(D.propertyId));E(e)}catch(e){console.error("Failed to fetch property:",e)}},$=async()=>{if(D?.propertyId)try{let e=await r.apiClient.bookings.getPropertyInfo(String(D.propertyId));_(e)}catch(e){console.error("Failed to fetch property info:",e)}},K=()=>{if(G.checkInDate&&G.checkOutDate&&z?.pricePerNight)try{let e=new Date(G.checkInDate),t=new Date(G.checkOutDate),s=Math.ceil((t.getTime()-e.getTime())/864e5),a=Number(z.pricePerNight)*s;R(a)}catch(e){console.error("Error calculating base price:",e)}},W=async()=>{if(!D)return;if(!G.checkInDate||!G.checkOutDate)return void S("Please fill in all required fields");let e=new Date(G.checkInDate),t=new Date(G.checkOutDate),s=new Date;if(s.setHours(0,0,0,0),e<s)return void S("Check-in date must be today or later");if(t<=e)return void S("Check-out date must be after check-in date");F(!0),S("");try{let e={checkInDate:G.checkInDate,checkOutDate:G.checkOutDate,numberOfGuests:G.numberOfGuests};G.requestedPrice&&(e.requestedPrice=parseFloat(G.requestedPrice));let t=await r.apiClient.bookings.update(D.id,e);!1===t.hasNegotiation&&e.requestedPrice&&L?setTimeout(()=>{v.push(`/payment?bookingId=${D.id}`)},1e3):(await V(),q(!1))}catch(e){S(e.message||"Failed to update booking")}finally{F(!1)}},X=async()=>{if(D&&window.confirm("Are you sure you want to cancel this booking? This action cannot be undone.")){F(!0),S("");try{await r.apiClient.bookings.delete(D.id),v.push("/my-bookings")}catch(e){S(e.message||"Failed to cancel booking"),F(!1)}}},Q=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return e}};if(T)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(d.Loader2,{className:"h-12 w-12 animate-spin text-teal-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading booking details..."})]})});if(B&&!D)return(0,t.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50",children:(0,t.jsxs)(n.Card,{className:"p-8 text-center max-w-md",children:[(0,t.jsx)(b.AlertCircle,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:B}),(0,t.jsx)(j.default,{href:"/my-bookings",children:(0,t.jsx)(l.Button,{variant:"outline",children:"Back to Bookings"})})]})});if(!D)return(0,t.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50",children:(0,t.jsxs)(n.Card,{className:"p-8 text-center max-w-md",children:[(0,t.jsx)(f.XCircle,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Booking Not Found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"The booking you're looking for doesn't exist."}),(0,t.jsx)(j.default,{href:"/my-bookings",children:(0,t.jsx)(l.Button,{variant:"outline",children:"Back to Bookings"})})]})});let J=((e,t)=>{if(!e||!t)return 0;try{let s=new Date(e),a=new Date(t),r=Math.abs(a.getTime()-s.getTime());return Math.ceil(r/864e5)}catch{return 0}})(D.checkInDate,D.checkOutDate),Z=(e=>{if(!e?.propertyImages||0===e.propertyImages.length)return null;let t=e.propertyImages.find(e=>e.cover);return t?t.url:e.propertyImages[0].url})(I);return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50",children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,t.jsx)(j.default,{href:"/my-bookings",children:(0,t.jsxs)(l.Button,{variant:"ghost",className:"mb-6",children:[(0,t.jsx)(y.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Back to Bookings"]})}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Booking #",D.id]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(e=>{switch(e.toUpperCase()){case"PENDING_PAYMENT":return(0,t.jsx)(c.Badge,{className:"bg-blue-100 text-blue-800 border-blue-200",children:"Awaiting Payment"});case"PENDING_NEGOTIATION":case"PENDING":return(0,t.jsx)(c.Badge,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"Pending"});case"CONFIRMED":return(0,t.jsx)(c.Badge,{className:"bg-green-100 text-green-800 border-green-200",children:"Confirmed"});case"COMPLETED":return(0,t.jsx)(c.Badge,{className:"bg-gray-100 text-gray-800 border-gray-200",children:"Completed"});case"TENANT_CHECKED_OUT":return(0,t.jsx)(c.Badge,{className:"bg-purple-100 text-purple-800 border-purple-200",children:"Checked Out"});case"CANCELLED":return(0,t.jsx)(c.Badge,{className:"bg-red-100 text-red-800 border-red-200",children:"Cancelled"});default:return(0,t.jsx)(c.Badge,{className:"bg-gray-100 text-gray-800 border-gray-200",children:e})}})(D.status),D.onChainTxHash&&(0,t.jsxs)(c.Badge,{variant:"outline",className:"text-xs",children:["Transaction: ",D.onChainTxHash.substring(0,10),"..."]})]})]}),B&&(0,t.jsx)(n.Card,{className:"p-4 mb-6 border-red-200 bg-red-50",children:(0,t.jsx)("p",{className:"text-red-700 text-sm",children:B})}),I&&Z&&(0,t.jsxs)(n.Card,{className:"mb-6 overflow-hidden",children:[(0,t.jsx)("div",{className:"relative h-64 bg-gradient-to-br from-teal-100 to-teal-200",children:(0,t.jsx)(k.default,{src:Z?Z.startsWith("http://")||Z.startsWith("https://")?Z:Z.startsWith("/uploads")?`http://localhost:8081${Z}`:Z:"/placeholder.jpg",alt:I.title||"Property",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 80vw"})}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:I.title}),I.address&&(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(m.MapPin,{className:"w-4 h-4 mr-2 text-teal-600"}),(0,t.jsxs)("span",{children:[I.address.city,", ",I.address.country]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2 space-y-6",children:M?(0,t.jsxs)(n.Card,{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Edit Booking"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check-in Date *"}),(0,t.jsx)("input",{type:"date",value:G.checkInDate,onChange:e=>H({...G,checkInDate:e.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check-out Date *"}),(0,t.jsx)("input",{type:"date",value:G.checkOutDate,onChange:e=>H({...G,checkOutDate:e.target.value}),min:G.checkInDate||new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Guests"}),(0,t.jsx)("input",{type:"number",min:"1",value:G.numberOfGuests,onChange:e=>H({...G,numberOfGuests:parseInt(e.target.value)||1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600"})]}),L&&(0,t.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,t.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,t.jsx)("strong",{children:"Base Price:"})," ",L.toFixed(4)," ETH"]}),z?.negotiationPercentage&&z.negotiationPercentage>0&&(0,t.jsxs)("p",{className:"text-sm text-blue-800 mt-1",children:[(0,t.jsx)("strong",{children:"Min Negotiation:"})," ",(L*(1-z.negotiationPercentage/100)).toFixed(4)," ETH"]})]}),z?.negotiationPercentage&&z.negotiationPercentage>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requested Price (ETH) - Leave empty for full price"}),(0,t.jsx)("input",{type:"number",step:"0.001",min:L?(L*(1-z.negotiationPercentage/100)).toFixed(4):0,max:L?.toFixed(4),value:G.requestedPrice,onChange:e=>H({...G,requestedPrice:e.target.value}),placeholder:L?`Enter price (min: ${(L*(1-z.negotiationPercentage/100)).toFixed(4)} ETH)`:"",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600"}),L&&G.requestedPrice&&(0,t.jsx)("p",{className:"text-xs mt-1 text-gray-600",children:parseFloat(G.requestedPrice)>=L?"✅ Full price - negotiation will be cancelled":parseFloat(G.requestedPrice)>=L*(1-z.negotiationPercentage/100)?"✅ Valid negotiation price":"⚠️ Price below minimum allowed"})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)(l.Button,{onClick:W,disabled:A,className:"flex-1 bg-teal-600 hover:bg-teal-700 text-white",children:A?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"}),(0,t.jsx)(l.Button,{onClick:()=>{q(!1),D&&H({checkInDate:D.checkInDate||"",checkOutDate:D.checkOutDate||"",numberOfGuests:1,requestedPrice:D.requestedNegotiationPercent?"":D.totalPrice?.toString()||""})},disabled:A,variant:"outline",className:"flex-1",children:"Cancel"})]})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.Card,{className:"p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,t.jsx)(o.Calendar,{className:"w-5 h-5 mr-2 text-teal-600"}),"Booking Dates"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center py-3 border-b border-gray-200",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Check-in Date"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:Q(D.checkInDate)})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-3 border-b border-gray-200",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Check-out Date"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:Q(D.checkOutDate)})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-3",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-600 flex items-center",children:[(0,t.jsx)(x.Clock,{className:"w-4 h-4 mr-2 text-teal-600"}),"Duration"]}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[J," ",1===J?"night":"nights"]})]})]})]}),(0,t.jsxs)(n.Card,{className:"p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,t.jsx)(u.DollarSign,{className:"w-5 h-5 mr-2 text-teal-600"}),"Pricing Details"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center py-3 border-b border-gray-200",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Total Price"}),(0,t.jsxs)("span",{className:"text-2xl font-bold text-teal-600",children:[D.totalPrice?.toFixed(4)||"N/A"," ETH"]})]}),D.longStayDiscountPercent&&D.longStayDiscountPercent>0&&(0,t.jsxs)("div",{className:"flex justify-between items-center py-3 border-b border-gray-200",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Long Stay Discount"}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-blue-600",children:[D.longStayDiscountPercent,"%"]})]}),D.requestedNegotiationPercent&&D.requestedNegotiationPercent>0&&(0,t.jsxs)("div",{className:"flex justify-between items-center py-3",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Negotiation"}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-yellow-600",children:[D.requestedNegotiationPercent,"%"]})]})]})]}),(0,t.jsxs)(n.Card,{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Booking Information"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center py-3 border-b border-gray-200",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Booking ID"}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:["#",D.id]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-3 border-b border-gray-200",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Property ID"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:D.propertyId})]}),D.createdAt&&(0,t.jsxs)("div",{className:"flex justify-between items-center py-3",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Created At"}),(0,t.jsx)("span",{className:"text-sm text-gray-900",children:Q(D.createdAt)})]})]})]})]})}),(0,t.jsxs)("div",{className:"space-y-6",children:[!M&&(0,t.jsxs)(n.Card,{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Actions"}),(0,t.jsxs)("div",{className:"space-y-3",children:[("PENDING"===D.status||"PENDING_PAYMENT"===D.status||"PENDING_NEGOTIATION"===D.status)&&(0,t.jsxs)(l.Button,{onClick:()=>{q(!0)},disabled:A,variant:"outline",className:"w-full",children:[(0,t.jsx)(h.Edit,{className:"w-4 h-4 mr-2"}),"Edit Booking"]}),("PENDING_PAYMENT"===D.status||"PENDING"===D.status&&!D.requestedNegotiationPercent)&&(0,t.jsxs)(l.Button,{onClick:()=>v.push(`/payment?bookingId=${D.id}`),className:"w-full bg-teal-600 hover:bg-teal-700 text-white",children:[(0,t.jsx)(N.CreditCard,{className:"w-4 h-4 mr-2"}),"Pay Now"]}),"CONFIRMED"===D.status&&(0,t.jsx)(l.Button,{onClick:async()=>{if(window.confirm("Are you sure you have checked out?")){F(!0);try{await r.apiClient.bookings.markAsCheckedOut(D.id,parseInt(C.id)),await V()}catch(e){S(e.message||"Failed to confirm checkout")}finally{F(!1)}}},disabled:A,className:"w-full bg-green-600 hover:bg-green-700 text-white",children:A?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.CheckCircle,{className:"w-4 h-4 mr-2"}),"I've Checked Out"]})}),("PENDING"===D.status||"PENDING_PAYMENT"===D.status||"PENDING_NEGOTIATION"===D.status)&&(0,t.jsx)(l.Button,{onClick:X,disabled:A,variant:"destructive",className:"w-full",children:A?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Deleting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Trash2,{className:"w-4 h-4 mr-2"}),"Cancel Booking"]})})]})]}),(0,t.jsxs)(n.Card,{className:"p-6 bg-teal-50 border-teal-200",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-teal-900 mb-3",children:"Quick Info"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-teal-700",children:"Status:"}),(0,t.jsx)("span",{className:"font-medium text-teal-900",children:D.status})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-teal-700",children:"Nights:"}),(0,t.jsx)("span",{className:"font-medium text-teal-900",children:J})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-teal-700",children:"Total:"}),(0,t.jsxs)("span",{className:"font-medium text-teal-900",children:[D.totalPrice?.toFixed(4)||"N/A"," ETH"]})]})]})]})]})]})]})})}e.s(["default",()=>v])}]);