(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(47163);let a=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));a.displayName="Card";let i=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...r}));i.displayName="CardHeader";let n=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));n.displayName="CardTitle";let o=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,s.cn)("text-sm text-muted-foreground",e),...r}));o.displayName="CardDescription";let l=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,s.cn)("p-6 pt-0",e),...r}));l.displayName="CardContent",r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,s.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter",e.s(["Card",()=>a,"CardContent",()=>l,"CardDescription",()=>o,"CardHeader",()=>i,"CardTitle",()=>n])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},48425,e=>{"use strict";var t=e.i(71645),r=e.i(74080),s=e.i(91918),a=e.i(43476),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,r)=>{let i=t.forwardRef((e,t)=>{let{asChild:i,...n}=e,o=i?s.Slot:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(o,{...n,ref:t})});return i.displayName=`Primitive.${r}`,{...e,[r]:i}},{});function n(e,t){e&&r.flushSync(()=>e.dispatchEvent(t))}e.s(["Primitive",()=>i,"dispatchDiscreteCustomEvent",()=>n])},46897,e=>{"use strict";let t=(0,e.i(75254).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},81140,30030,e=>{"use strict";function t(e,r,{checkForDefaultPrevented:s=!0}={}){return function(t){if(e?.(t),!1===s||!t.defaultPrevented)return r?.(t)}}e.s(["composeEventHandlers",()=>t],81140);var r=e.i(71645),s=e.i(43476);function a(e,t){let a=r.createContext(t),i=e=>{let{children:t,...i}=e,n=r.useMemo(()=>i,Object.values(i));return(0,s.jsx)(a.Provider,{value:n,children:t})};return i.displayName=e+"Provider",[i,function(s){let i=r.useContext(a);if(i)return i;if(void 0!==t)return t;throw Error(`\`${s}\` must be used within \`${e}\``)}]}function i(e,t=[]){let a=[],n=()=>{let t=a.map(e=>r.createContext(e));return function(s){let a=s?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...s,[e]:a}}),[s,a])}};return n.scopeName=e,[function(t,i){let n=r.createContext(i),o=a.length;a=[...a,i];let l=t=>{let{scope:a,children:i,...l}=t,d=a?.[e]?.[o]||n,c=r.useMemo(()=>l,Object.values(l));return(0,s.jsx)(d.Provider,{value:c,children:i})};return l.displayName=t+"Provider",[l,function(s,a){let l=a?.[e]?.[o]||n,d=r.useContext(l);if(d)return d;if(void 0!==i)return i;throw Error(`\`${s}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=s.reduce((t,{useScope:r,scopeName:s})=>{let a=r(e)[`__scope${s}`];return{...t,...a}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return s.scopeName=t.scopeName,s}(n,...t)]}e.s(["createContext",()=>a,"createContextScope",()=>i],30030)},30207,e=>{"use strict";var t=e.i(71645);function r(e){let r=t.useRef(e);return t.useEffect(()=>{r.current=e}),t.useMemo(()=>(...e)=>r.current?.(...e),[])}e.s(["useCallbackRef",()=>r])},69340,e=>{"use strict";var t=e.i(71645),r=e.i(30207);function s({prop:e,defaultProp:s,onChange:a=()=>{}}){let[i,n]=function({defaultProp:e,onChange:s}){let a=t.useState(e),[i]=a,n=t.useRef(i),o=(0,r.useCallbackRef)(s);return t.useEffect(()=>{n.current!==i&&(o(i),n.current=i)},[i,n,o]),a}({defaultProp:s,onChange:a}),o=void 0!==e,l=o?e:i,d=(0,r.useCallbackRef)(a);return[l,t.useCallback(t=>{if(o){let r="function"==typeof t?t(e):t;r!==e&&d(r)}else n(t)},[o,e,n,d])]}e.s(["useControllableState",()=>s])},34620,e=>{"use strict";var t=e.i(71645),r=globalThis?.document?t.useLayoutEffect:()=>{};e.s(["useLayoutEffect",()=>r])},35804,e=>{"use strict";var t=e.i(71645),r=e.i(34620);function s(e){let[s,a]=t.useState(void 0);return(0,r.useLayoutEffect)(()=>{if(e){a({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let r,s;if(!Array.isArray(t)||!t.length)return;let i=t[0];if("borderBoxSize"in i){let e=i.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,s=t.blockSize}else r=e.offsetWidth,s=e.offsetHeight;a({width:r,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}a(void 0)},[e]),s}e.s(["useSize",()=>s])},99682,e=>{"use strict";var t=e.i(71645);function r(e){let r=t.useRef({value:e,previous:e});return t.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}e.s(["usePrevious",()=>r])},69074,e=>{"use strict";let t=(0,e.i(75254).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>t],69074)},19036,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(81140),a=e.i(20783),i=e.i(30030),n=e.i(69340),o=e.i(99682),l=e.i(35804),d=e.i(48425),c="Switch",[u,m]=(0,i.createContextScope)(c),[p,x]=u(c),f=r.forwardRef((e,i)=>{let{__scopeSwitch:o,name:l,checked:c,defaultChecked:u,required:m,disabled:x,value:f="on",onCheckedChange:g,form:h,...N}=e,[v,j]=r.useState(null),w=(0,a.useComposedRefs)(i,e=>j(e)),C=r.useRef(!1),P=!v||h||!!v.closest("form"),[S=!1,k]=(0,n.useControllableState)({prop:c,defaultProp:u,onChange:g});return(0,t.jsxs)(p,{scope:o,checked:S,disabled:x,children:[(0,t.jsx)(d.Primitive.button,{type:"button",role:"switch","aria-checked":S,"aria-required":m,"data-state":b(S),"data-disabled":x?"":void 0,disabled:x,value:f,...N,ref:w,onClick:(0,s.composeEventHandlers)(e.onClick,e=>{k(e=>!e),P&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),P&&(0,t.jsx)(y,{control:v,bubbles:!C.current,name:l,value:f,checked:S,required:m,disabled:x,form:h,style:{transform:"translateX(-100%)"}})]})});f.displayName=c;var g="SwitchThumb",h=r.forwardRef((e,r)=>{let{__scopeSwitch:s,...a}=e,i=x(g,s);return(0,t.jsx)(d.Primitive.span,{"data-state":b(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:r})});h.displayName=g;var y=e=>{let{control:s,checked:a,bubbles:i=!0,...n}=e,d=r.useRef(null),c=(0,o.usePrevious)(a),u=(0,l.useSize)(s);return r.useEffect(()=>{let e=d.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==a&&t){let r=new Event("click",{bubbles:i});t.call(e,a),e.dispatchEvent(r)}},[c,a,i]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...n,tabIndex:-1,ref:d,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b(e){return e?"checked":"unchecked"}var N=e.i(47163);let v=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(f,{className:(0,N.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...r,ref:s,children:(0,t.jsx)(h,{className:"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"})}));v.displayName=f.displayName,e.s(["Switch",()=>v],19036)},87596,e=>{"use strict";var t=e.i(47167),r=e.i(43476),s=e.i(71645),a=e.i(18566),i=e.i(25715),n=e.i(71667),o=e.i(67881),l=e.i(70065),d=e.i(69074),c=e.i(46897),u=e.i(31278),m=e.i(19036);function p({onSuccess:e,propertyId:p,propertyData:x,isEditMode:f=!1}){(0,a.useRouter)();let{user:g,isLoading:h,token:y}=(0,i.useAuth)(),[b,N]=(0,s.useState)(null),[v,j]=(0,s.useState)(!0),[w,C]=(0,s.useState)({title:"",description:"",typeId:"1",dailyPrice:"",depositAmount:"",negotiationPercentage:"",capacity:"",numberOfBedrooms:"",numberOfBathrooms:"",numberOfBeds:"",address:"",city:"",country:"Morocco",zipCode:"",latitude:"",longitude:""}),[P,S]=(0,s.useState)(!1),[k,A]=(0,s.useState)([]),[O,D]=(0,s.useState)([]),[B,E]=(0,s.useState)(!1),[I,M]=(0,s.useState)(""),[R,L]=(0,s.useState)({fiveDays:!1,fifteenDays:!1,oneMonth:!1}),F=(0,s.useRef)(!1),z=(0,s.useRef)(null);if((0,s.useEffect)(()=>{(async()=>{if(!g||!y||h)return j(!1);if(g.walletAddress&&""!==g.walletAddress.trim()){N(g.walletAddress),j(!1);return}try{let e=await n.apiClient.users.getMe(),r=e.walletAddress&&""!==e.walletAddress.trim()?e.walletAddress:null;if(N(r),r){let e={...g,walletAddress:r};localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem(t.default.env.NEXT_PUBLIC_USER_STORAGE_KEY||"derent5_user_data",JSON.stringify(e)),window.dispatchEvent(new Event("auth-state-changed"))}}catch(e){N(null)}finally{j(!1)}})()},[g,y,h]),(0,s.useEffect)(()=>{f&&x&&p&&(z.current===p&&F.current||(C({title:x.title||"",description:x.description||"",typeId:x.type?.id?.toString()||"1",dailyPrice:x.dailyPrice?.toString()||x.price?.toString()||"",depositAmount:x.depositAmount?.toString()||"",negotiationPercentage:x.negotiationPercentage?.toString()||"",capacity:x.capacity?.toString()||"",numberOfBedrooms:x.numberOfBedrooms?.toString()||"",numberOfBathrooms:x.numberOfBathrooms?.toString()||"",numberOfBeds:x.numberOfBeds?.toString()||"",address:x.address?.address||x.address?.street||"",city:x.address?.city||"",country:x.address?.country||"Morocco",zipCode:x.address?.zipCode?.toString()||"",latitude:x.address?.latitude?.toString()||"",longitude:x.address?.longitude?.toString()||""}),F.current=!0,z.current=p),x.discountPlan&&L({fiveDays:!!x.discountPlan.fiveDays,fifteenDays:!!x.discountPlan.fifteenDays,oneMonth:!!x.discountPlan.oneMonth}),x.propertyImages&&x.propertyImages.length>0&&D(x.propertyImages.map(e=>e.url.startsWith("http://")||e.url.startsWith("https://")?e.url:e.url.startsWith("/uploads")?`http://localhost:8081${e.url}`:e.url)))},[f,x,p]),(0,s.useEffect)(()=>{p&&z.current!==p&&(F.current=!1,z.current=null)},[p]),h||v)return(0,r.jsx)(l.Card,{className:"p-12 text-center",children:(0,r.jsx)("p",{className:"text-gray-600",children:"Loading..."})});if(!g)return(0,r.jsx)(l.Card,{className:"p-12 text-center",children:(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Please sign in to post a property."})});if(!(b||g?.walletAddress&&""!==g.walletAddress.trim()))return(0,r.jsx)(l.Card,{className:"p-12 text-center",children:(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:["You must connect your wallet before creating a property.",(0,r.jsx)("br",{}),"Please go to your profile and connect your wallet."]})});let T=e=>{let{name:t,value:r}=e.target;C(e=>({...e,[t]:r}))},U=(e=0)=>{navigator.geolocation?(S(!0),M(""),navigator.geolocation.getCurrentPosition(async e=>{let{latitude:t,longitude:r,accuracy:s}=e.coords;try{let e=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t}&lon=${r}&zoom=18&addressdetails=1`,{headers:{"User-Agent":"Derent Property App"}});if(!e.ok)throw Error("Failed to get address from coordinates");let s=(await e.json()).address||{};C(e=>({...e,latitude:t.toString(),longitude:r.toString(),address:s.road||s.house_number?`${s.house_number||""} ${s.road||""}`.trim():e.address,city:s.city||s.town||s.village||s.municipality||s.county||e.city,country:s.country||e.country,zipCode:s.postcode||e.zipCode})),M("")}catch(e){C(e=>({...e,latitude:t.toString(),longitude:r.toString()})),M("Location detected but could not get address details. Please fill address manually.")}finally{S(!1)}},t=>{if(S(!1),0===e&&(t.code===t.POSITION_UNAVAILABLE||2===t.code))return void setTimeout(()=>U(1),500);let r=t.code,s=t.message||"";r===t.PERMISSION_DENIED||1===r?M("Location access denied. Please enable location permissions in your browser settings and try again."):r===t.POSITION_UNAVAILABLE||2===r?M(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Location unavailable. Please check if GPS is enabled on your device and try again, or enter address manually.":"Location unavailable. Desktop computers usually don't have GPS. Please enter address manually or use a mobile device."):r===t.TIMEOUT||3===r?M("Location request timed out. This may happen if GPS signal is weak. Please try again or enter address manually."):M(`Unable to get location (Error code: ${r}${s?` - ${s}`:""}). Please enter address manually.`)},0===e?{enableHighAccuracy:!0,timeout:15e3,maximumAge:6e4}:{enableHighAccuracy:!1,timeout:1e4,maximumAge:3e5})):M("Geolocation is not supported by your browser. Please enter address manually.")},$=async r=>{r.preventDefault(),M(""),E(!0);let s={...w};try{let r=b||g?.walletAddress;if(!r||""===r.trim()){M("You must connect your wallet before creating a property. Please go to your profile and connect your wallet."),E(!1);return}if(!f){if(0===k.length){M("Please upload at least 5 images for your property."),E(!1);return}if(k.length<5){M(`Please upload at least 5 images. Currently uploaded: ${k.length}`),E(!1);return}if(k.length>10){M(`You can upload at most 10 images. Currently uploaded: ${k.length}`),E(!1);return}}if(f&&0===k.length&&(!x?.propertyImages||0===x.propertyImages.length)){M("Please upload at least one image for your property."),E(!1);return}let a=parseFloat(s.dailyPrice),i=parseFloat(s.depositAmount)||0,o=parseFloat(s.negotiationPercentage),l=Number.parseInt(s.capacity),d=Number.parseInt(s.numberOfBedrooms),c=Number.parseInt(s.numberOfBathrooms),u=Number.parseInt(s.numberOfBeds);if(isNaN(a)||a<=0){M("Daily price must be a valid positive number."),E(!1);return}if(isNaN(o)||o<0||o>100){M("negotiation percentage must be between 0 and 100."),E(!1);return}if(isNaN(l)||l<1){M("Capacity must be at least 1."),E(!1);return}if(isNaN(d)||d<1){M("Number of bedrooms must be at least 1."),E(!1);return}if(isNaN(c)||c<1){M("Number of bathrooms must be at least 1."),E(!1);return}if(isNaN(u)||u<1){M("Number of beds must be at least 1."),E(!1);return}if(f&&p){let t=x?.amenities||[],r=t.filter(e=>e&&e.id).map(e=>({id:e.id,name:e.name||e.amenityName||""}));if(!l||l<1){M("Capacity must be at least 1."),E(!1);return}if(isNaN(d)||d<1){M("Number of bedrooms must be at least 1."),E(!1);return}if(isNaN(u)||u<1){M("Number of beds must be at least 1."),E(!1);return}if(isNaN(c)||c<1){M("Number of bathrooms must be at least 1."),E(!1);return}let i=r.length>0?r:t.length>0?t.map(e=>({id:e.id,name:e.name||e.amenityName||""})):[],o={title:s.title.trim(),description:s.description.trim(),dailyPrice:a,capacity:l,numberOfBedrooms:d,numberOfBeds:u,numberOfBathrooms:c,typeId:Number.parseInt(s.typeId),address:s.address.trim(),city:s.city.trim(),country:s.country.trim(),zipCode:s.zipCode?s.zipCode.trim():null,amenities:i};try{await n.apiClient.properties.update(p,o)}catch(e){throw e}e&&e(),alert("Property updated successfully!"),E(!1);return}let m=k[0]?.name,h={title:w.title.trim(),description:w.description.trim(),typeId:Number.parseInt(w.typeId),dailyPrice:a,depositAmount:i,negotiationPercentage:o,capacity:l,numberOfBedrooms:d,numberOfBathrooms:c,numberOfBeds:u,address:{address:w.address.trim(),city:w.city.trim(),country:w.country.trim(),zipCode:w.zipCode?Number.parseInt(w.zipCode):void 0,latitude:w.latitude?parseFloat(w.latitude):void 0,longitude:w.longitude?parseFloat(w.longitude):void 0},amenities:[],coverImageName:m,discountPlan:R.fiveDays||R.fifteenDays||R.oneMonth?{...R.fiveDays&&{fiveDays:10},...R.fifteenDays&&{fifteenDays:15},...R.oneMonth&&{oneMonth:20}}:null};await n.apiClient.properties.create(h,k);try{let e=await n.apiClient.users.getMe(),r=(e.roles||[]).map(e=>"HOST"===e?"POSTER":"TENANT"===e?"USER":"ADMIN"===e?"ADMIN":e),s={...g,roles:r.length>0?r:g?.roles||["USER"],walletAddress:e.walletAddress||g?.walletAddress};localStorage.setItem("user",JSON.stringify(s)),localStorage.setItem(t.default.env.NEXT_PUBLIC_USER_STORAGE_KEY||"derent5_user_data",JSON.stringify(s)),window.dispatchEvent(new Event("auth-state-changed"))}catch(e){console.error("Failed to refresh user data:",e)}e&&e(),C({title:"",description:"",typeId:"1",dailyPrice:"",depositAmount:"",negotiationPercentage:"",capacity:"",numberOfBedrooms:"",numberOfBathrooms:"",numberOfBeds:"",address:"",city:"",country:"Morocco",zipCode:"",latitude:"",longitude:""}),A([]),D([]),L({fiveDays:!1,fifteenDays:!1,oneMonth:!1}),M(""),alert("Property created successfully!")}catch(e){M(e instanceof Error?e.message:"Failed to create property")}finally{E(!1)}};return(0,r.jsxs)(l.Card,{className:"p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:f?"Edit Property":"Add New Property"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:f?"Update the details of your property":"Fill in the details to post your property"}),(0,r.jsxs)("form",{onSubmit:$,className:"space-y-6",children:[I&&(0,r.jsx)("div",{className:"p-4 bg-red-50 text-red-700 rounded-lg text-sm",children:I}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Upload Images"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-teal-600 transition-colors",children:[(0,r.jsx)(d.Upload,{className:"w-6 h-6 text-gray-400 mx-auto mb-2"}),(0,r.jsxs)("label",{className:"cursor-pointer",children:[(0,r.jsx)("span",{className:"text-teal-600 hover:text-teal-700 font-medium",children:"Click to upload"})," or drag and drop",(0,r.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{let t=Array.from(e.target.files||[]),r=[...k,...t];if(!f&&r.length>10){M(`You can upload at most 10 images total. Currently have ${k.length}, trying to add ${t.length}`),e.target.value="";return}A(r),M(""),D([...O,...t.map(e=>URL.createObjectURL(e))]),e.target.value=""},className:"hidden"})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["PNG, JPG, GIF up to 10MB ",!f&&"(5-10 images required)",!f&&k.length>0&&k.length<10&&" - You can add more images"]})]}),O.length>0&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:O.map((e,t)=>(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsxs)("div",{className:"relative h-24 rounded-lg overflow-hidden border-2 border-gray-200",children:[(0,r.jsx)("img",{src:e||"/placeholder.svg",alt:`Preview ${t+1}`,className:"w-full h-full object-cover"}),(0,r.jsx)("button",{type:"button",onClick:()=>{let e,r;return URL.revokeObjectURL(O[t]),e=k.filter((e,r)=>r!==t),r=O.filter((e,r)=>r!==t),void(A(e),D(r),M(""))},className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",title:"Remove image",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("p",{className:"text-xs text-center mt-1 text-gray-600",children:["Image ",t+1]})]},t))}),!f&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsxs)("span",{className:`font-medium ${k.length<5?"text-red-600":k.length<=10?"text-green-600":"text-gray-600"}`,children:[k.length," / 10 images"]}),k.length<5&&(0,r.jsxs)("span",{className:"text-red-600 text-xs",children:["(Need ",5-k.length," more to proceed)"]}),k.length>=5&&k.length<=10&&(0,r.jsx)("span",{className:"text-green-600 text-xs",children:"âœ“ Ready to submit"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Basic Information"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Title *"}),(0,r.jsx)("input",{type:"text",name:"title",value:w.title,onChange:T,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600",placeholder:"e.g. Modern Downtown Apartment",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,r.jsx)("textarea",{name:"description",value:w.description,onChange:T,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600 h-24",placeholder:"Describe your property in detail...",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type *"}),(0,r.jsxs)("select",{name:"typeId",value:w.typeId,onChange:T,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600",children:[(0,r.jsx)("option",{value:"1",children:"Apartment"}),(0,r.jsx)("option",{value:"2",children:"House"}),(0,r.jsx)("option",{value:"3",children:"Studio"}),(0,r.jsx)("option",{value:"4",children:"Condo"}),(0,r.jsx)("option",{value:"5",children:"Villa"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Daily Price (MAD) *"}),(0,r.jsx)("input",{type:"number",name:"dailyPrice",value:w.dailyPrice,onChange:T,step:"0.001",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600",placeholder:"0.05",required:!0}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Price per day in Moroccan Dirham (MAD)"})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deposit Amount (MAD) *"}),(0,r.jsx)("input",{type:"number",name:"depositAmount",value:w.depositAmount,onChange:T,step:"0.001",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600",placeholder:"0.1",required:!0}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Security deposit amount in Moroccan Dirham (MAD)"})]})}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("label",{htmlFor:"negotiationPercentage",className:"block text-sm font-medium text-gray-700 mb-2",children:"Negotiation Percentage (%) *"}),(0,r.jsx)("input",{id:"negotiationPercentage",type:"number",name:"negotiationPercentage",value:w.negotiationPercentage,onChange:T,step:"0.1",min:"0",max:"100",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600 focus:border-teal-600",placeholder:"0.0",required:!0}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter the negotiation percentage (0-100%)"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Property Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guests *"}),(0,r.jsx)("input",{type:"number",name:"capacity",value:w.capacity,onChange:T,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600",placeholder:"4",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bedrooms *"}),(0,r.jsx)("input",{type:"number",name:"numberOfBedrooms",value:w.numberOfBedrooms,onChange:T,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600",placeholder:"2",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Beds *"}),(0,r.jsx)("input",{type:"number",name:"numberOfBeds",value:w.numberOfBeds,onChange:T,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600",placeholder:"3",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bathrooms *"}),(0,r.jsx)("input",{type:"number",name:"numberOfBathrooms",value:w.numberOfBathrooms,onChange:T,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600",placeholder:"1",min:"1",required:!0})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Discount Plan"}),(0,r.jsxs)("div",{className:"bg-teal-50 border border-teal-200 rounded-lg p-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-900 text-sm",children:"5 Days"}),(0,r.jsx)("span",{className:"px-2 py-1 bg-teal-600 text-white text-xs rounded",children:"10% OFF"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Get 10% discount when booking for 5 days or more"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m.Switch,{checked:R.fiveDays,onCheckedChange:e=>L(t=>({...t,fiveDays:e}))}),(0,r.jsx)("span",{className:"text-xs text-gray-700 min-w-[60px]",children:R.fiveDays?"Enabled":"Disabled"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-900 text-sm",children:"15 Days"}),(0,r.jsx)("span",{className:"px-2 py-1 bg-teal-600 text-white text-xs rounded",children:"15% OFF"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Get 15% discount when booking for 15 days or more"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m.Switch,{checked:R.fifteenDays,onCheckedChange:e=>L(t=>({...t,fifteenDays:e}))}),(0,r.jsx)("span",{className:"text-xs text-gray-700 min-w-[60px]",children:R.fifteenDays?"Enabled":"Disabled"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-900 text-sm",children:"1 Month+"}),(0,r.jsx)("span",{className:"px-2 py-1 bg-teal-600 text-white text-xs rounded",children:"20% OFF"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Get 20% discount when booking for a month or more"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m.Switch,{checked:R.oneMonth,onCheckedChange:e=>L(t=>({...t,oneMonth:e}))}),(0,r.jsx)("span",{className:"text-xs text-gray-700 min-w-[60px]",children:R.oneMonth?"Enabled":"Disabled"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Location"}),(0,r.jsx)(o.Button,{type:"button",onClick:()=>U(),disabled:P,variant:"outline",size:"sm",className:"flex items-center gap-2",children:P?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Loader2,{className:"w-4 h-4 animate-spin"}),"Getting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.MapPin,{className:"w-4 h-4"}),"Use GPS"]})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(w.latitude||w.longitude)&&(0,r.jsxs)("div",{className:"bg-teal-50 border border-teal-200 rounded-lg p-3 text-sm text-teal-700",children:[(0,r.jsx)("p",{className:"font-medium",children:"ðŸ“ Location detected:"}),(0,r.jsx)("p",{className:"text-xs mt-1",children:w.latitude&&w.longitude?`Lat: ${parseFloat(w.latitude).toFixed(6)}, Lng: ${parseFloat(w.longitude).toFixed(6)}`:""})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),(0,r.jsx)("input",{type:"text",name:"address",value:w.address,onChange:T,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600",placeholder:"123 Main Street",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),(0,r.jsx)("input",{type:"text",name:"city",value:w.city,onChange:T,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600",placeholder:"Casablanca",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country *"}),(0,r.jsx)("input",{type:"text",name:"country",value:w.country,onChange:T,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code"}),(0,r.jsx)("input",{type:"text",name:"zipCode",value:w.zipCode,onChange:T,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-600",placeholder:"20000"})]})]})]})]}),(0,r.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,r.jsx)(o.Button,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{C({title:"",description:"",typeId:"1",dailyPrice:"",depositAmount:"",negotiationPercentage:"",capacity:"",numberOfBedrooms:"",numberOfBathrooms:"",numberOfBeds:"",address:"",city:"",country:"Morocco",zipCode:"",latitude:"",longitude:""}),A([]),D([]),L({fiveDays:!1,fifteenDays:!1,oneMonth:!1}),M("")},children:"Clear"}),(0,r.jsx)(o.Button,{type:"submit",className:"flex-1 bg-teal-600 hover:bg-teal-700",disabled:B,children:B?f?"Updating...":"Publishing...":f?"Update Property":"Publish Property"})]})]})]})}e.s(["AddPropertyForm",()=>p])},52439,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),a=e.i(25715),i=e.i(71667),n=e.i(87596),o=e.i(70065),l=e.i(31278);function d(){let e=(0,s.useParams)(),d=(0,s.useRouter)(),{user:c,isLoading:u}=(0,a.useAuth)(),[m,p]=(0,r.useState)(null),[x,f]=(0,r.useState)(!0),[g,h]=(0,r.useState)(""),y=e.id;(0,r.useEffect)(()=>{u||c?c&&y&&b():d.push("/login")},[c,y,u,d]);let b=async()=>{try{f(!0),h("");let e=await i.apiClient.properties.getById(y);if(e.userId!==c?.id)return void h("You don't have permission to edit this property.");p(e)}catch(e){console.error("Failed to fetch property:",e),h(e.message||"Failed to load property")}finally{f(!1)}};return u||x?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(l.Loader2,{className:"h-12 w-12 animate-spin text-teal-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading property..."})]})}):g?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)(o.Card,{className:"p-8 text-center max-w-md",children:[(0,t.jsx)("p",{className:"text-red-600 mb-4",children:g}),(0,t.jsx)("button",{onClick:()=>d.push("/host-dashboard"),className:"px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg",children:"Go Back to Dashboard"})]})}):m?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsx)(n.AddPropertyForm,{propertyId:y,propertyData:m,isEditMode:!0,onSuccess:()=>{d.push("/host-dashboard"),d.refresh()}})})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)(o.Card,{className:"p-8 text-center max-w-md",children:[(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Property not found"}),(0,t.jsx)("button",{onClick:()=>d.push("/host-dashboard"),className:"px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg",children:"Go Back to Dashboard"})]})})}e.s(["default",()=>d])}]);